<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Explorer</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <style>
        /* Base Styles */
        :root {
            --primary-color: #3a86ff;
            --primary-light: #61a0ff;
            --primary-dark: #2563eb;
            --secondary-color: #4b5563;
            --accent-color: #8b5cf6;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            
            --border-color: #e5e7eb;
            --border-radius: 0.5rem;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
            
            --container-width: 1280px;
            --header-height: 70px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            margin-bottom: 1rem;
            font-weight: 600;
            line-height: 1.3;
            color: var(--text-primary);
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        h2 {
            font-size: 2rem;
        }
        
        h3 {
            font-size: 1.5rem;
        }
        
        h4 {
            font-size: 1.25rem;
        }
        
        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }
        
        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        a:hover {
            color: var(--primary-dark);
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            background-color: var(--card-bg);
            color: var(--text-primary);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }
        
        .file-input-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--bg-color);
            transition: border-color var(--transition-fast);
            cursor: pointer;
        }
        
        .file-input-container:hover {
            border-color: var(--primary-color);
        }
        
        .file-input-container input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .file-input-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .file-input-text {
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .file-input-subtext {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        .image-preview {
            margin-top: 1rem;
            width: 100%;
            max-height: 200px;
            border-radius: var(--border-radius);
            overflow: hidden;
            display: none;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-align: center;
        }
        
        .btn-icon {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #374151;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-success {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #059669;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .btn-outline:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        /* Cards */
        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform var(--transition), box-shadow var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        /* Alerts */
        .alert {
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            font-weight: 500;
            display: flex;
            align-items: center;
        }
        
        .alert-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }
        
        .alert-success {
            background-color: #d1fae5;
            color: #065f46;
            border-left: 4px solid var(--success-color);
        }
        
        .alert-danger {
            background-color: #fee2e2;
            color: #b91c1c;
            border-left: 4px solid var(--danger-color);
        }
        
        .alert-info {
            background-color: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--info-color);
        }
        
        .alert-warning {
            background-color: #fef3c7;
            color: #92400e;
            border-left: 4px solid var(--warning-color);
        }
        
        /* Utilities */
        .d-flex {
            display: flex;
        }
        
        .flex-wrap {
            flex-wrap: wrap;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .justify-center {
            justify-content: center;
        }
        
        .align-center {
            align-items: center;
        }
        
        .hidden {
            display: none !important;
        }
        
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 1rem; }
        .mt-4 { margin-top: 1.5rem; }
        .mt-5 { margin-top: 2rem; }
        .mt-6 { margin-top: 2.5rem; }
        
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 1.5rem; }
        .mb-5 { margin-bottom: 2rem; }
        .mb-6 { margin-bottom: 2.5rem; }
        
        .ml-1 { margin-left: 0.25rem; }
        .ml-2 { margin-left: 0.5rem; }
        .ml-3 { margin-left: 1rem; }
        
        .mr-1 { margin-right: 0.25rem; }
        .mr-2 { margin-right: 0.5rem; }
        .mr-3 { margin-right: 1rem; }
        
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 1rem; }
        .p-4 { padding: 1.5rem; }
        .p-5 { padding: 2rem; }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        
        /* Header & Navigation */
        .header {
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            height: var(--header-height);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            margin-right: 0.5rem;
            font-size: 1.75rem;
        }
        
        .nav {
            display: flex;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            gap: 1.5rem;
        }
        
        .nav-link {
            color: var(--text-secondary);
            font-weight: 500;
            transition: color var(--transition-fast);
            position: relative;
        }
        
        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .nav-link.active {
            color: var(--primary-color);
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }
        
        .user-menu {
            margin-left: 1.5rem;
            position: relative;
        }
        
        .user-button {
            display: flex;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 500;
            transition: color var(--transition-fast);
        }
        
        .user-button:hover {
            color: var(--primary-color);
        }
        
        .user-icon {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }
        
        /* Hero Section */
        .hero {
            padding: 4rem 0;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: white;
            margin-bottom: 3rem;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: white;
        }
        
        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* Search Bar */
        .search-container {
            max-width: 800px;
            margin: 0 auto 3rem;
            position: relative;
        }
        
        .search-bar {
            display: flex;
            box-shadow: var(--shadow);
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            font-size: 1.1rem;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
        }
        
        .search-input:focus {
            box-shadow: none;
        }
        
        .search-button {
            padding: 1rem 2rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: background-color var(--transition-fast);
            display: flex;
            align-items: center;
        }
        
        .search-button:hover {
            background-color: var(--primary-dark);
        }
        
        .search-icon {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }
        
        /* Category Navigation */
        .category-nav {
            margin-bottom: 3rem;
        }
        
        .category-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }
        
        .category-item {
            padding: 0.75rem 1.5rem;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
        }
        
        .category-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            color: var(--primary-color);
        }
        
        .category-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .category-item.active:hover {
            background-color: var(--primary-dark);
        }
        
        .category-icon {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }
        
        /* Item Grid */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px;
        }
        
        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .item-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform var(--transition), box-shadow var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        
        .item-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }
        
        .item-card-image {
            height: 200px;
            overflow: hidden;
            position: relative;
        }
        
        .item-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition);
        }
        
        .item-card:hover .item-card-image img {
            transform: scale(1.05);
        }
        
        .item-card-category {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            background-color: var(--primary-color);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .item-card-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .item-card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            line-height: 1.4;
        }
        
        .item-card-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            flex: 1;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.6;
        }
        
        .item-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .item-card-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .keyword-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            background-color: #f3f4f6;
            border-radius: 20px;
            color: var(--text-secondary);
        }
        
        .item-card-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition);
            backdrop-filter: blur(5px);
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px) scale(0.95);
            transition: all var(--transition);
            display: flex;
            flex-direction: column;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0) scale(1);
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--card-bg);
            z-index: 10;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: color var(--transition-fast);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            color: var(--danger-color);
            background-color: #fee2e2;
        }
        
        .modal-body {
            padding: 1.5rem;
            flex: 1;
        }
        
        .modal-image {
            width: 100%;
            max-height: 400px;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }
        
        .modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .modal-content {
            margin-bottom: 1.5rem;
        }
        
        .modal-section {
            margin-bottom: 1.5rem;
        }
        
        .modal-section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }
        
        .modal-description {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .modal-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-date {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        /* Admin Panel */
        .admin-panel {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .admin-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin: 0;
        }
        
        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .admin-tab {
            padding: 0.75rem 1.5rem;
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--text-secondary);
        }
        
        .admin-tab:hover {
            background-color: #f3f4f6;
            color: var(--primary-color);
        }
        
        .admin-tab.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .admin-content {
            margin-bottom: 2rem;
        }
        
        /* Login Form */
        .login-container {
            max-width: 500px;
            margin: 4rem auto;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .login-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .login-subtitle {
            color: var(--text-secondary);
        }
        
        .login-form {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
        }
        
        /* Category Page */
        .category-page-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 3rem;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            text-align: center;
        }
        
        .category-page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: white;
        }
        
        .category-page-description {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto;
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }
        
        .pagination-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
            background-color: var(--card-bg);
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }
        
        .pagination-item:hover {
            background-color: #f3f4f6;
            color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .pagination-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 2rem auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .category-list {
                overflow-x: auto;
                padding-bottom: 1rem;
                justify-content: flex-start;
            }
            
            .modal {
                width: 95%;
            }
        }
        
        @media (max-width: 640px) {
            .items-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .search-input {
                border-radius: var(--border-radius) var(--border-radius) 0 0;
            }
            
            .search-button {
                border-radius: 0 0 var(--border-radius) var(--border-radius);
                justify-content: center;
            }
            
            .header-container {
                flex-direction: column;
                padding: 1rem 0;
                height: auto;
            }
            
            .nav {
                margin-top: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .user-menu {
                margin-left: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <a href="#" class="logo" id="siteLogo">
                <span class="logo-icon">📚</span>
                Content Explorer
            </a>
            <nav class="nav">
                <div class="nav-links">
                    <a href="#" class="nav-link active" id="homeLink">Home</a>
                    <a href="#" class="nav-link" id="categoriesLink">Categories</a>
                    <a href="#" class="nav-link" id="adminLink">Admin</a>
                </div>
                <div class="user-menu">
                    <button class="user-button hidden" id="logoutButton">
                        <span class="user-icon">👤</span>
                        Logout
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Alert for notifications -->
        <div id="alertBox" class="alert hidden"></div>
        
        <!-- Login Form -->
        <div id="loginForm" class="hidden">
            <div class="login-container">
                <div class="login-header">
                    <h2 class="login-title">Admin Login</h2>
                    <p class="login-subtitle">Sign in to manage your content</p>
                </div>
                <div class="login-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" placeholder="Enter your password">
                    </div>
                    <button onclick="login()" class="btn btn-primary w-full">Login</button>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="hidden">
            <div class="admin-header">
                <h2 class="admin-title">Content Management</h2>
                <button onclick="logout()" class="btn btn-danger">Logout</button>
            </div>
            
            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="add-item">Add New Item</div>
                <div class="admin-tab" data-tab="manage-items">Manage Items</div>
            </div>
            
            <div class="admin-content" id="add-item-tab">
                <div class="admin-panel">
                    <div class="form-group">
                        <label for="title">Title</label>
                        <input type="text" id="title" placeholder="Enter item title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" rows="3" placeholder="Enter a brief description" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" required>
                            <option value="">Select a category</option>
                            <option value="technology">Technology</option>
                            <option value="health">Health</option>
                            <option value="education">Education</option>
                            <option value="business">Business</option>
                            <option value="lifestyle">Lifestyle</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="keywords">Keywords (comma separated)</label>
                        <input type="text" id="keywords" placeholder="Enter keywords" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="content">Detailed Content</label>
                        <textarea id="content" rows="8" placeholder="Enter detailed content" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Image</label>
                        <div class="file-input-container" id="imageDropzone">
                            <div class="file-input-icon">📷</div>
                            <div class="file-input-text">Drag & drop an image or click to browse</div>
                            <div class="file-input-subtext">Supports: JPG, PNG, GIF (Max 5MB)</div>
                            <input type="file" id="imageInput" accept="image/*">
                        </div>
                        <div class="image-preview" id="imagePreview">
                            <img id="previewImg" src="/placeholder.svg" alt="Preview">
                        </div>
                    </div>
                    
                    <button onclick="submitItem()" class="btn btn-success">
                        <span class="btn-icon">➕</span>
                        Add Item
                    </button>
                </div>
            </div>
            
            <div class="admin-content hidden" id="manage-items-tab">
                <div class="admin-panel">
                    <div class="form-group">
                        <label for="adminSearchInput">Search Items</label>
                        <input type="text" id="adminSearchInput" placeholder="Search by title, description, or keywords">
                    </div>
                    
                    <div id="adminItemsList" class="mt-4">
                        <!-- Admin items will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Home Page -->
        <div id="homePage">
            <!-- Hero Section -->
            <div class="hero">
                <div class="hero-content">
                    <h1>Discover Amazing Content</h1>
                    <p>Explore our curated collection of resources, articles, and more</p>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="userSearchInput" class="search-input" placeholder="Search for anything...">
                    <button id="searchButton" class="search-button">
                        <span class="search-icon">🔍</span>
                        Search
                    </button>
                </div>
            </div>
            
            <!-- Category Navigation -->
            <div class="category-nav">
                <div class="category-list" id="categoryTabs">
                    <div class="category-item active" data-category="all">
                        <span class="category-icon">🏠</span>
                        All
                    </div>
                    <!-- Categories will be added dynamically -->
                </div>
            </div>
            
            <!-- Items Grid -->
            <div class="section-header">
                <h2 class="section-title" id="currentCategoryTitle">All Items</h2>
            </div>
            
            <div class="items-grid" id="itemsGrid">
                <!-- Items will be added dynamically -->
                <div class="spinner" id="loadingSpinner"></div>
            </div>
        </div>
        
        <!-- Category Page -->
        <div id="categoryPage" class="hidden">
            <div class="category-page-header">
                <h1 class="category-page-title" id="categoryPageTitle">Category Name</h1>
                <p class="category-page-description" id="categoryPageDescription">Explore all items in this category</p>
            </div>
            
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" id="categorySearchInput" class="search-input" placeholder="Search in this category...">
                    <button id="categorySearchButton" class="search-button">
                        <span class="search-icon">🔍</span>
                        Search
                    </button>
                </div>
            </div>
            
            <div class="items-grid" id="categoryItemsGrid">
                <!-- Category items will be added dynamically -->
            </div>
            
            <div class="pagination" id="categoryPagination">
                <!-- Pagination will be added dynamically -->
            </div>
        </div>
        
        <!-- Item Detail Modal -->
        <div class="modal-overlay" id="itemModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalTitle">Item Title</h3>
                    <button class="modal-close" id="modalClose">×</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be added dynamically -->
                </div>
                <div class="modal-footer">
                    <div class="modal-date" id="modalDate">Added: Date</div>
                    <button class="btn btn-primary" id="modalCloseBtn">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            signOut, 
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            query, 
            getDocs,
            orderBy,
            where,
            doc,
            getDoc
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import {
            getStorage,
            ref,
            uploadBytes,
            getDownloadURL
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBDUAF3qJGhLYQJPHyWwY0JzonN5l8ERzE",
            authDomain: "mnthen-3151d.firebaseapp.com",
            projectId: "mnthen-3151d",
            storageBucket: "mnthen-3151d.appspot.com",
            messagingSenderId: "416231360428",
            appId: "1:416231360428:web:36f69cc231be2d84a8dc09"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // DOM Elements
        const alertBox = document.getElementById('alertBox');
        const loginForm = document.getElementById('loginForm');
        const adminPanel = document.getElementById('adminPanel');
        const homePage = document.getElementById('homePage');
        const categoryPage = document.getElementById('categoryPage');
        const adminSearchInput = document.getElementById('adminSearchInput');
        const adminItemsList = document.getElementById('adminItemsList');
        const userSearchInput = document.getElementById('userSearchInput');
        const searchButton = document.getElementById('searchButton');
        const categorySearchInput = document.getElementById('categorySearchInput');
        const categorySearchButton = document.getElementById('categorySearchButton');
        const categoryTabs = document.getElementById('categoryTabs');
        const itemsGrid = document.getElementById('itemsGrid');
        const categoryItemsGrid = document.getElementById('categoryItemsGrid');
        const categoryPagination = document.getElementById('categoryPagination');
        const itemModal = document.getElementById('itemModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const modalDate = document.getElementById('modalDate');
        const modalClose = document.getElementById('modalClose');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        const homeLink = document.getElementById('homeLink');
        const categoriesLink = document.getElementById('categoriesLink');
        const adminLink = document.getElementById('adminLink');
        const logoutButton = document.getElementById('logoutButton');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const currentCategoryTitle = document.getElementById('currentCategoryTitle');
        const categoryPageTitle = document.getElementById('categoryPageTitle');
        const categoryPageDescription = document.getElementById('categoryPageDescription');
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const previewImg = document.getElementById('previewImg');
        const addItemTab = document.getElementById('add-item-tab');
        const manageItemsTab = document.getElementById('manage-items-tab');
        
        // App State
        let currentUser = null;
        let allItems = [];
        let categories = new Set(['all']);
        let activeCategory = 'all';
        let selectedFile = null;
        let currentCategoryItems = [];
        let itemsPerPage = 9;
        let currentPage = 1;
        
        // Category Icons
        const categoryIcons = {
            'all': '🏠',
            'technology': '💻',
            'health': '🏥',
            'education': '🎓',
            'business': '💼',
            'lifestyle': '🌿',
            'other': '📦'
        };

        // Utility Functions
        function showAlert(message, type) {
            alertBox.innerHTML = `
                <span class="alert-icon">${type === 'success' ? '✅' : type === 'danger' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}</span>
                ${message}
            `;
            alertBox.className = `alert alert-${type}`;
            alertBox.classList.remove('hidden');
            setTimeout(() => alertBox.classList.add('hidden'), 3000);
        }

        function clearInputs(ids) {
            ids.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.value = '';
            });
            // Clear image preview
            imagePreview.style.display = 'none';
            previewImg.src = '';
            selectedFile = null;
        }

        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        function formatDate(timestamp) {
            if (!timestamp) return '';
            const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Navigation Functions
        function showHome() {
            homePage.classList.remove('hidden');
            adminPanel.classList.add('hidden');
            loginForm.classList.add('hidden');
            categoryPage.classList.add('hidden');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            homeLink.classList.add('active');
            
            loadItems();
        }
        
        function showAdmin() {
            if (currentUser) {
                homePage.classList.add('hidden');
                adminPanel.classList.remove('hidden');
                loginForm.classList.add('hidden');
                categoryPage.classList.add('hidden');
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                adminLink.classList.add('active');
                
                loadAdminItems();
            } else {
                homePage.classList.add('hidden');
                adminPanel.classList.add('hidden');
                loginForm.classList.remove('hidden');
                categoryPage.classList.add('hidden');
                
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                adminLink.classList.add('active');
            }
        }
        
        function showCategory(category) {
            homePage.classList.add('hidden');
            adminPanel.classList.add('hidden');
            loginForm.classList.add('hidden');
            categoryPage.classList.remove('hidden');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            categoriesLink.classList.add('active');
            
            // Update category page title and description
            categoryPageTitle.textContent = category.charAt(0).toUpperCase() + category.slice(1);
            categoryPageDescription.textContent = `Explore all items in the ${category} category`;
            
            // Load category items
            loadCategoryItems(category);
        }

        // Auth Functions
        window.login = async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                await signInWithEmailAndPassword(auth, email, password);
                clearInputs(['email', 'password']);
                showAdmin();
            } catch (error) {
                showAlert(`Error logging in: ${error.message}`, 'danger');
            }
        };

        window.logout = async () => {
            try {
                await signOut(auth);
                showHome();
            } catch (error) {
                showAlert(`Error logging out: ${error.message}`, 'danger');
            }
        };

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) {
                logoutButton.classList.remove('hidden');
                showAlert(`Logged in as: ${user.email}`, 'success');
            } else {
                logoutButton.classList.add('hidden');
            }
        });

        // Image Upload Preview
        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                selectedFile = file;
                const reader = new FileReader();
                reader.onload = function(event) {
                    previewImg.src = event.target.result;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        // Item Submission
        window.submitItem = async () => {
            if (!currentUser) {
                showAlert('Please log in first', 'warning');
                return;
            }

            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const category = document.getElementById('category').value;
            const keywords = document.getElementById('keywords').value
                .split(',')
                .map(k => k.trim())
                .filter(k => k);
            const content = document.getElementById('content').value;

            if (!title || !description || !category || !keywords.length || !content) {
                showAlert('Please fill in all required fields', 'warning');
                return;
            }
            
            try {
                let imageUrl = '';
                
                // Upload image if selected
                if (selectedFile) {
                    const storageRef = ref(storage, `images/${Date.now()}_${selectedFile.name}`);
                    await uploadBytes(storageRef, selectedFile);
                    imageUrl = await getDownloadURL(storageRef);
                }
                
                // Add item to Firestore
                await addDoc(collection(db, "contentItems"), {
                    title,
                    description,
                    category,
                    keywords,
                    content,
                    imageUrl,
                    timestamp: new Date(),
                    createdBy: currentUser.uid
                });

                showAlert('Item added successfully!', 'success');
                clearInputs(['title', 'description', 'category', 'keywords', 'content']);
                loadAdminItems();
                loadItems(); // Refresh the home page items as well
            } catch (error) {
                showAlert(`Error adding item: ${error.message}`, 'danger');
            }
        };

        // Load Items for Admin
        async function loadAdminItems(searchTerm = '') {
            if (!currentUser) return;

            try {
                const q = query(
                    collection(db, "contentItems"),
                    orderBy("timestamp", "desc")
                );
                const querySnapshot = await getDocs(q);
                
                const items = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    if (!searchTerm || 
                        data.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        data.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        data.keywords.some(k => k.toLowerCase().includes(searchTerm.toLowerCase()))) {
                        items.push({ id: doc.id, ...data });
                    }
                });

                displayAdminItems(items);
            } catch (error) {
                showAlert(`Error loading items: ${error.message}`, 'danger');
            }
        }

        // Display Items in Admin Panel
        function displayAdminItems(items) {
            if (items.length === 0) {
                adminItemsList.innerHTML = `
                    <div class="text-center p-5">
                        <p>No items found</p>
                    </div>
                `;
                return;
            }
            
            adminItemsList.innerHTML = items.map(item => `
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex justify-between align-center mb-3">
                            <h4>${escapeHtml(item.title)}</h4>
                            <span class="keyword-badge">${escapeHtml(item.category)}</span>
                        </div>
                        
                        ${item.imageUrl ? `
                            <div class="mb-3" style="max-height: 150px; overflow: hidden; border-radius: var(--border-radius);">
                                <img src="${item.imageUrl}" alt="${escapeHtml(item.title)}" style="width: 100%; height: 150px; object-fit: cover;">
                            </div>
                        ` : ''}
                        
                        <p>${escapeHtml(item.description)}</p>
                        
                        <div class="keywords-list mb-3">
                            ${item.keywords.map(keyword => 
                                `<span class="keyword-badge">${escapeHtml(keyword)}</span>`
                            ).join('')}
                        </div>
                        
                        <div class="d-flex justify-between align-center">
                            <div class="text-muted" style="font-size: 0.875rem;">
                                Added: ${formatDate(item.timestamp)}
                            </div>
                            <div>
                                <button class="btn btn-outline mr-2" onclick="viewItem('${item.id}')">View</button>
                                <button class="btn btn-danger" onclick="deleteItem('${item.id}')">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load Items for Home Page
        async function loadItems(searchTerm = '') {
            loadingSpinner.classList.remove('hidden');
            itemsGrid.innerHTML = '<div class="spinner" id="loadingSpinner"></div>';
            
            try {
                const q = query(
                    collection(db, "contentItems"),
                    orderBy("timestamp", "desc")
                );
                const querySnapshot = await getDocs(q);
                
                allItems = [];
                categories = new Set(['all']);
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const item = { id: doc.id, ...data };
                    allItems.push(item);
                    categories.add(item.category);
                });

                updateCategories();
                filterAndDisplayItems(searchTerm);
            } catch (error) {
                showAlert(`Error loading items: ${error.message}`, 'danger');
                loadingSpinner.classList.add('hidden');
            }
        }

        // Update Category Tabs
        function updateCategories() {
            categoryTabs.innerHTML = `
                <div class="category-item ${activeCategory === 'all' ? 'active' : ''}" data-category="all">
                    <span class="category-icon">${categoryIcons['all']}</span>
                    All
                </div>
            `;
            
            categories.forEach(category => {
                if (category !== 'all') {
                    const icon = categoryIcons[category] || '📦';
                    const displayName = category.charAt(0).toUpperCase() + category.slice(1);
                    
                    categoryTabs.innerHTML += `
                        <div class="category-item ${activeCategory === category ? 'active' : ''}" data-category="${category}">
                            <span class="category-icon">${icon}</span>
                            ${displayName}
                        </div>
                    `;
                }
            });
            
            // Add event listeners to category tabs
            document.querySelectorAll('.category-item').forEach(tab => {
                tab.addEventListener('click', () => {
                    const category = tab.dataset.category;
                    
                    if (category === 'all') {
                        activeCategory = 'all';
                        document.querySelectorAll('.category-item').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        currentCategoryTitle.textContent = 'All Items';
                        filterAndDisplayItems();
                    } else {
                        showCategory(category);
                    }
                });
            });
        }

        // Filter and Display Items
        function filterAndDisplayItems(searchTerm = '') {
            let filteredItems = allItems;
            
            // Filter by search term if provided
            if (searchTerm) {
                filteredItems = filteredItems.filter(item => 
                    item.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.keywords.some(k => k.toLowerCase().includes(searchTerm.toLowerCase()))
                );
            }
            
            // Filter by active category
            if (activeCategory !== 'all') {
                filteredItems = filteredItems.filter(item => item.category === activeCategory);
            }
            
            // Display filtered items
            displayItems(filteredItems);
        }

        // Display Items in Grid
        function displayItems(items) {
            loadingSpinner.classList.add('hidden');
            
            if (items.length === 0) {
                itemsGrid.innerHTML = `
                    <div class="col-span-full text-center p-5">
                        <h3>No items found</h3>
                        <p>Try a different search or category</p>
                    </div>
                `;
                return;
            }
            
            itemsGrid.innerHTML = items.map(item => `
                <div class="item-card" data-id="${item.id}">
                    <div class="item-card-image">
                        ${item.imageUrl 
                            ? `<img src="${item.imageUrl}" alt="${escapeHtml(item.title)}">`
                            : `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: #f3f4f6; color: #6b7280; font-size: 2rem;">${item.title.charAt(0).toUpperCase()}</div>`
                        }
                        <div class="item-card-category">${escapeHtml(item.category)}</div>
                    </div>
                    <div class="item-card-content">
                        <h3 class="item-card-title">${escapeHtml(item.title)}</h3>
                        <p class="item-card-description">${escapeHtml(item.description)}</p>
                        <div class="item-card-footer">
                            <div class="item-card-keywords">
                                ${item.keywords.slice(0, 2).map(keyword => 
                                    `<span class="keyword-badge">${escapeHtml(keyword)}</span>`
                                ).join('')}
                                ${item.keywords.length > 2 ? `<span class="keyword-badge">+${item.keywords.length - 2}</span>` : ''}
                            </div>
                            <div class="item-card-date">${formatDate(item.timestamp)}</div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add click event to cards
            document.querySelectorAll('.item-card').forEach(card => {
                card.addEventListener('click', () => {
                    const itemId = card.dataset.id;
                    const item = items.find(i => i.id === itemId);
                    if (item) {
                        openItemModal(item);
                    }
                });
            });
        }
        
        // Load Category Items
        async function loadCategoryItems(category, searchTerm = '') {
            try {
                let q;
                if (category === 'all') {
                    q = query(
                        collection(db, "contentItems"),
                        orderBy("timestamp", "desc")
                    );
                } else {
                    q = query(
                        collection(db, "contentItems"),
                        where("category", "==", category),
                        orderBy("timestamp", "desc")
                    );
                }
                
                const querySnapshot = await getDocs(q);
                
                currentCategoryItems = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    if (!searchTerm || 
                        data.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        data.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        data.keywords.some(k => k.toLowerCase().includes(searchTerm.toLowerCase()))) {
                        currentCategoryItems.push({ id: doc.id, ...data });
                    }
                });
                
                displayCategoryItems(currentCategoryItems);
                setupPagination(currentCategoryItems);
            } catch (error) {
                showAlert(`Error loading category items: ${error.message}`, 'danger');
            }
        }
        
        // Display Category Items
        function displayCategoryItems(items) {
            if (items.length === 0) {
                categoryItemsGrid.innerHTML = `
                    <div class="col-span-full text-center p-5">
                        <h3>No items found in this category</h3>
                        <p>Try a different search or category</p>
                    </div>
                `;
                return;
            }
            
            // Calculate pagination
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedItems = items.slice(startIndex, endIndex);
            
            categoryItemsGrid.innerHTML = paginatedItems.map(item => `
                <div class="item-card" data-id="${item.id}">
                    <div class="item-card-image">
                        ${item.imageUrl 
                            ? `<img src="${item.imageUrl}" alt="${escapeHtml(item.title)}">`
                            : `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: #f3f4f6; color: #6b7280; font-size: 2rem;">${item.title.charAt(0).toUpperCase()}</div>`
                        }
                        <div class="item-card-category">${escapeHtml(item.category)}</div>
                    </div>
                    <div class="item-card-content">
                        <h3 class="item-card-title">${escapeHtml(item.title)}</h3>
                        <p class="item-card-description">${escapeHtml(item.description)}</p>
                        <div class="item-card-footer">
                            <div class="item-card-keywords">
                                ${item.keywords.slice(0, 2).map(keyword => 
                                    `<span class="keyword-badge">${escapeHtml(keyword)}</span>`
                                ).join('')}
                                ${item.keywords.length > 2 ? `<span class="keyword-badge">+${item.keywords.length - 2}</span>` : ''}
                            </div>
                            <div class="item-card-date">${formatDate(item.timestamp)}</div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add click event to cards
            document.querySelectorAll('.item-card').forEach(card => {
                card.addEventListener('click', () => {
                    const itemId = card.dataset.id;
                    const item = items.find(i => i.id === itemId);
                    if (item) {
                        openItemModal(item);
                    }
                });
            });
        }
        
        // Setup Pagination
        function setupPagination(items) {
            const totalPages = Math.ceil(items.length / itemsPerPage);
            
            if (totalPages <= 1) {
                categoryPagination.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // Previous button
            paginationHTML += `
                <div class="pagination-item ${currentPage === 1 ? 'disabled' : ''}" data-page="${currentPage - 1}">
                    &laquo;
                </div>
            `;
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <div class="pagination-item ${currentPage === i ? 'active' : ''}" data-page="${i}">
                        ${i}
                    </div>
                `;
            }
            
            // Next button
            paginationHTML += `
                <div class="pagination-item ${currentPage === totalPages ? 'disabled' : ''}" data-page="${currentPage + 1}">
                    &raquo;
                </div>
            `;
            
            categoryPagination.innerHTML = paginationHTML;
            
            // Add click event to pagination items
            document.querySelectorAll('.pagination-item').forEach(item => {
                item.addEventListener('click', () => {
                    const page = parseInt(item.dataset.page);
                    if (page >= 1 && page <= totalPages) {
                        currentPage = page;
                        displayCategoryItems(items);
                        setupPagination(items);
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            });
        }

        // Open Item Modal
        function openItemModal(item) {
            modalTitle.textContent = item.title;
            modalDate.textContent = `Added: ${formatDate(item.timestamp)}`;
            
            modalBody.innerHTML = `
                ${item.imageUrl ? `
                    <div class="modal-image">
                        <img src="${item.imageUrl}" alt="${escapeHtml(item.title)}">
                    </div>
                ` : ''}
                
                <div class="modal-section">
                    <h4 class="modal-section-title">Description</h4>
                    <p class="modal-description">${escapeHtml(item.description)}</p>
                </div>
                
                <div class="modal-section">
                    <h4 class="modal-section-title">Category</h4>
                    <div class="modal-keywords">
                        <span class="keyword-badge" style="background-color: var(--primary-color); color: white;">
                            ${categoryIcons[item.category] || '📦'} ${escapeHtml(item.category)}
                        </span>
                    </div>
                </div>
                
                <div class="modal-section">
                    <h4 class="modal-section-title">Keywords</h4>
                    <div class="modal-keywords">
                        ${item.keywords.map(keyword => 
                            `<span class="keyword-badge">${escapeHtml(keyword)}</span>`
                        ).join('')}
                    </div>
                </div>
                
                <div class="modal-section">
                    <h4 class="modal-section-title">Content</h4>
                    <div class="modal-content p-4" style="background-color: #f9fafb; border-radius: var(--border-radius);">
                        ${escapeHtml(item.content).replace(/\n/g, '<br>')}
                    </div>
                </div>
            `;
            
            itemModal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling when modal is open
        }

        // Close Item Modal
        function closeItemModal() {
            itemModal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }
        
        // View Item (Admin)
        window.viewItem = (itemId) => {
            const item = allItems.find(i => i.id === itemId);
            if (item) {
                openItemModal(item);
            }
        };
        
        // Delete Item (Admin)
        window.deleteItem = async (itemId) => {
            if (confirm('Are you sure you want to delete this item? This action cannot be undone.')) {
                try {
                    // Delete from Firestore
                    await deleteDoc(doc(db, "contentItems", itemId));
                    showAlert('Item deleted successfully!', 'success');
                    loadAdminItems();
                    loadItems(); // Refresh the home page items as well
                } catch (error) {
                    showAlert(`Error deleting item: ${error.message}`, 'danger');
                }
            }
        };

        // Event Listeners
        adminSearchInput.addEventListener('input', (e) => {
            loadAdminItems(e.target.value);
        });
        
        searchButton.addEventListener('click', () => {
            filterAndDisplayItems(userSearchInput.value);
        });
        
        userSearchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                filterAndDisplayItems(userSearchInput.value);
            }
        });
        
        categorySearchButton.addEventListener('click', () => {
            loadCategoryItems(activeCategory, categorySearchInput.value);
        });
        
        categorySearchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                loadCategoryItems(activeCategory, categorySearchInput.value);
            }
        });
        
        modalClose.addEventListener('click', closeItemModal);
        modalCloseBtn.addEventListener('click', closeItemModal);
        
        // Close modal when clicking outside
        itemModal.addEventListener('click', (e) => {
            if (e.target === itemModal) {
                closeItemModal();
            }
        });
        
        // Navigation event listeners
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            showHome();
        });
        
        categoriesLink.addEventListener('click', (e) => {
            e.preventDefault();
            showCategory('all');
        });
        
        adminLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAdmin();
        });
        
        logoutButton.addEventListener('click', (e) => {
            e.preventDefault();
            logout();
        });
        
        // Admin tabs
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show selected tab content
                document.querySelectorAll('.admin-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(`${tabId}-tab`).classList.remove('hidden');
            });
        });

        // Initialize the app
        showHome();
    </script>
</body>
</html>
