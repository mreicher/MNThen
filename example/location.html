<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immersive Location Explorer</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-light: #f0f4f8;
            --text-light: #2c3e50;
            --background-dark: #2c3e50;
            --text-dark: #ecf0f1;
        }

        body {
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .neumorphic {
            background: var(--background-light);
            box-shadow: 8px 8px 16px #d1d9e6, -8px -8px 16px #ffffff;
            border-radius: 20px;
        }

        .dark .neumorphic {
            background: var(--background-dark);
            box-shadow: 8px 8px 16px #1a252f, -8px -8px 16px #3e5771;
        }

        .btn-neumorphic {
            background: var(--background-light);
            box-shadow: 5px 5px 10px #d1d9e6, -5px -5px 10px #ffffff;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .btn-neumorphic:hover {
            box-shadow: inset 5px 5px 10px #d1d9e6, inset -5px -5px 10px #ffffff;
        }

        .dark .btn-neumorphic {
            background: var(--background-dark);
            box-shadow: 5px 5px 10px #1a252f, -5px -5px 10px #3e5771;
        }

        .dark .btn-neumorphic:hover {
            box-shadow: inset 5px 5px 10px #1a252f, inset -5px -5px 10px #3e5771;
        }

        .seek-bar {
            background: linear-gradient(to right, var(--primary-color) 0%, var(--primary-color) 50%, var(--background-light) 50%, var(--background-light) 100%);
            border-radius: 8px;
            height: 8px;
            outline: none;
            transition: background 450ms ease-in;
            -webkit-appearance: none;
        }

        .seek-bar::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s ease-in-out;
        }

        .seek-bar::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .dark .seek-bar {
            background: linear-gradient(to right, var(--primary-color) 0%, var(--primary-color) 50%, var(--background-dark) 50%, var(--background-dark) 100%);
        }

        .audio-visualizer {
            display: flex;
            align-items: flex-end;
            height: 50px;
            width: 100%;
            background: var(--background-light);
            border-radius: 5px;
            overflow: hidden;
        }

        .audio-bar {
            width: 3px;
            margin: 0 1px;
            background: var(--primary-color);
            transition: height 0.2s ease;
        }

        .dark .audio-visualizer {
            background: var(--background-dark);
        }

        .location-image {
            transition: transform 0.3s ease-in-out;
        }

        .location-image:hover {
            transform: scale(1.05);
        }

        #return-to-map {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .bottom-bar {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.8);
        }

        .dark .bottom-bar {
            background-color: rgba(44, 62, 80, 0.8);
        }

        .modal-content {
            background: var(--background-light);
            border-radius: 20px;
        }

        .dark .modal-content {
            background: var(--background-dark);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200">
    <div class="container mx-auto px-4 py-8">
        <div class="neumorphic p-6 mb-8">
            <img id="location-image" class="w-full h-64 object-cover rounded-lg mb-4 location-image" src="https://picsum.photos/800/400" alt="Location Image">
            <h1 id="location-title" class="text-3xl font-bold mb-2"></h1>
            <p id="location-city" class="text-xl mb-1"></p>
            <p id="location-creator" class="text-lg text-gray-600 dark:text-gray-400"></p>
        </div>

        <div class="neumorphic p-6 mb-8">
            <div class="audio-visualizer mb-4">
                <!-- Audio bars will be dynamically added here -->
            </div>
            <input type="range" class="seek-bar w-full mb-4" value="0" min="0" max="100">
            <div class="flex justify-between items-center mb-4">
                <span id="current-time" class="text-sm">0:00</span>
                <span id="duration" class="text-sm">0:00</span>
            </div>
            <div class="flex justify-center space-x-4">
                <button id="rewind-btn" class="btn-neumorphic p-3 rounded-full"><i class="fas fa-backward"></i></button>
                <button id="play-pause-btn" class="btn-neumorphic p-3 rounded-full"><i class="fas fa-play"></i></button>
                <button id="forward-btn" class="btn-neumorphic p-3 rounded-full"><i class="fas fa-forward"></i></button>
            </div>
        </div>
    </div>
    
    <button id="return-to-map" class="btn-neumorphic p-3 rounded-full">
        <i class="fas fa-map-marker-alt"></i>
    </button>
    
    <div class="bottom-bar fixed bottom-0 left-0 right-0 flex justify-around items-center py-4">
        <button id="image-source-btn" class="text-2xl"><i class="fas fa-image"></i></button>
        <button id="feedback-btn" class="text-2xl"><i class="fas fa-comment"></i></button>
        <button id="dark-mode-toggle" class="text-2xl"><i class="fas fa-moon"></i></button>
    </div>
    
    <!-- Modals -->
    <div id="image-source-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="modal-content p-6 max-w-sm mx-auto">
            <h2 class="text-2xl font-bold mb-4">Image Source</h2>
            <p id="image-source-text" class="mb-4"></p>
            <button class="btn-neumorphic px-4 py-2" onclick="closeModal('image-source-modal')">Close</button>
        </div>
    </div>
    
    <div id="feedback-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="modal-content p-6 max-w-sm mx-auto">
            <h2 class="text-2xl font-bold mb-4">Send Feedback</h2>
            <p class="mb-4">Click the button below to open your email client and send feedback about this location.</p>
            <button id="send-email-btn" class="btn-neumorphic px-4 py-2 mb-4">Open Email Client</button>
            <button class="btn-neumorphic px-4 py-2" onclick="closeModal('feedback-modal')">Close</button>
        </div>
    </div>
    
    <audio id="location-audio" src=""></audio>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const audio = document.getElementById('location-audio');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const rewindBtn = document.getElementById('rewind-btn');
            const forwardBtn = document.getElementById('forward-btn');
            const seekBar = document.querySelector('.seek-bar');
            const currentTimeDisplay = document.getElementById('current-time');
            const durationDisplay = document.getElementById('duration');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const audioVisualizer = document.querySelector('.audio-visualizer');

            // Dummy location data (replace with actual data fetching)
            const location = {
                id: '1',
                name: 'Eiffel Tower',
                city: 'Paris, France',
                creator: 'John Doe',
                audioURL: 'https://example.com/audio/eiffel-tower.mp3',
                imageSource: 'Photo by Jane Smith on Unsplash'
            };

            // Populate location details
            document.getElementById('location-title').textContent = location.name;
            document.getElementById('location-city').textContent = location.city;
            document.getElementById('location-creator').textContent = 'Creator: ' + location.creator;
            audio.src = location.audioURL;

            // Audio player functionality
            playPauseBtn.addEventListener('click', togglePlayPause);
            rewindBtn.addEventListener('click', () => seekAudio(-15));
            forwardBtn.addEventListener('click', () => seekAudio(15));
            seekBar.addEventListener('input', seekAudioFromBar);
            audio.addEventListener('timeupdate', updateSeekBar);
            audio.addEventListener('loadedmetadata', setDuration);

            function togglePlayPause() {
                if (audio.paused) {
                    audio.play();
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    audio.pause();
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            }

            function seekAudio(seconds) {
                audio.currentTime = Math.max(0, Math.min(audio.currentTime + seconds, audio.duration));
            }

            function seekAudioFromBar() {
                const seekTime = audio.duration * (seekBar.value / 100);
                audio.currentTime = seekTime;
            }

            function updateSeekBar() {
                const percentage = (audio.currentTime / audio.duration) * 100;
                seekBar.value = percentage;
                seekBar.style.background = `linear-gradient(to right, var(--primary-color) 0%, var(--primary-color) ${percentage}%, var(--background-light) ${percentage}%, var(--background-light) 100%)`;
                currentTimeDisplay.textContent = formatTime(audio.currentTime);
                updateAudioVisualizer();
            }

            function setDuration() {
                durationDisplay.textContent = formatTime(audio.duration);
            }

            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
            }

            // Audio visualizer
            function createAudioBars() {
                for (let i = 0; i < 50; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'audio-bar';
                    audioVisualizer.appendChild(bar);
                }
            }

            function updateAudioVisualizer() {
                const bars = audioVisualizer.children;
                for (let i = 0; i < bars.length; i++) {
                    const height = Math.random() * 100;
                    bars[i].style.height = `${height}%`;
                }
            }

            createAudioBars();

            // Dark mode toggle
            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark');
                const isDark = document.body.classList.contains('dark');
                darkModeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            });

            // Modal functionality
            window.closeModal = function(modalId) {
                document.getElementById(modalId).classList.add('hidden');
            }

            document.getElementById('image-source-btn').onclick = function() {
                document.getElementById('image-source-text').textContent = location.imageSource;
                document.getElementById('image-source-modal').classList.remove('hidden');
            }

            document.getElementById('feedback-btn').onclick = function() {
                document.getElementById('feedback-modal').classList.remove('hidden');
            }

            // Email functionality
            document.getElementById('send-email-btn').onclick = function() {
                let subject = `Feedback about location: ${location.name}`;
                let body = `I have feedback about the following location:\n\n`;
                body += `Name: ${location.name}\n`;
                body += `City: ${location.city}\n`;
                body += `Creator: ${location.creator}\n\n`;
                body += 'My feedback is:\n\n';
                
                const mailtoLink = `mailto:feedback@example.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                window.location.href = mailtoLink;
            }

            // Return to map functionality
            document.getElementById('return-to-map').addEventListener('click', function() {
                // Add your return to map logic here
                console.log('Returning to map...');
            });

            // GSAP animations
            gsap.from(".neumorphic", {duration: 1, y: 50, opacity: 0, stagger: 0.2, ease: "power3.out"});
            gsap.from("#return-to-map", {duration: 1, x: 50, opacity: 0, delay: 0.5, ease: "power3.out"});
            gsap.from(".bottom-bar", {duration: 1, y: 50, opacity: 0, delay: 0.7, ease: "power3.out"});
        });
    </script>
</body>
</html>
