<!DOCTYPE html>
<html>
<head>
  <title>Tour Page</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    /* Custom CSS styles */
    body {
      padding-top: 20px;
    }

    .header-image {
      width: 100%;
      height: auto;
    }

    .header-title {
      font-weight: bold;
      margin-top: 20px;
      text-align: center;
    }

    .dynamic-info {
      display: none; /* Hide dynamic information by default */
    }

    .static-info {
      margin-top: 20px;
    }

    .resource-links {
      margin-top: 20px;
      text-align: center;
    }

    .resource-links a {
      margin: 0 10px;
    }

    .location-info {
      margin-top: 20px;
      text-align: center;
    }

    .location-images {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }

    .location-images img {
      max-width: 200px;
      margin: 10px;
      cursor: pointer;
    }

    .sponsor-logo {
      display: block;
      margin: 20px auto;
      text-align: center;
      cursor: pointer;
    }

    /* Custom CSS styles for pop-up modal */
    .modal-content {
      max-width: 400px;
      margin: 20px auto;
    }

    .modal-title {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .modal-address {
      margin-bottom: 10px;
    }

    .modal-distance {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <img class="header-image" src="images/capitol.jpg" alt="Header Image">

  <h1 class="header-title">Minnesota State Capitol</h1>

  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <div class="dynamic-info">
          <p>Dynamic Information 1</p>
          <p>Dynamic Information 2</p>
        </div>

        <div class="static-info">
          <p><strong>Static Information:</strong></p>
          <div class="resource-links">
            <a href="resource1.html">Resource 1</a>
            <a href="resource2.html">Resource 2</a>
            <a href="resource3.html">Resource 3</a>
          </div>

          <div class="location-info">
            <p>Location Address</p>
            <p>Latitude: <span id="latitude"></span></p>
            <p>Longitude: <span id="longitude"></span></p>
            <p>Distance: <span id="distance"></span> feet</p>
          </div>

          <div class="location-images">
            <img src="path/to/image1.jpg" alt="Image 1" onclick="showImageModal('path/to/image1.jpg', 'Image 1 Source')">
            <img src="path/to/image2.jpg" alt="Image 2" onclick="showImageModal('path/to/image2.jpg', 'Image 2 Source')">
            <img src="path/to/image3.jpg" alt="Image 3" onclick="showImageModal('path/to/image3.jpg', 'Image 3 Source')">
          </div>

          <div class="sponsor-logo" onclick="showSponsorModal()">
            <img src="path/to/sponsor-logo.png" alt="Sponsor Logo">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pop-up Modal for Images -->
  <div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="imageModalLabel"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <img id="modalImage" src="" alt="Modal Image" style="max-width: 100%;">
          <p id="imageSource"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Pop-up Modal for Sponsor -->
  <div class="modal fade" id="sponsorModal" tabindex="-1" role="dialog" aria-labelledby="sponsorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="sponsorModalLabel">Sponsor Information</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Address: Sponsor Address</p>
          <p>Distance: <span id="sponsorDistance"></span> feet</p>
          <p>Sponsor information goes here...</p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- script section -->
<script>

    let userLatitude = 0; // Initialize user latitude
    let userLongitude = 0; // Initialize user longitude
    
     // Initialize tour location coordinates
    const tourLocationLatitude = 45.14427; // Update with the actual location latitude
    const tourLocationLongitude = -93.00334; // Update with the actual location longitude

    // Initialize sponsor location coordinates
    const sponsorLocationLatitude = 45.14391; // Update with actual sponsor latitude
    const sponsorLocationLongitude = -93.00280; // Update with actual sponsor longitude

  // Function to calculate distance between two coordinates in feet

  function calculateDistance(lat1, lon1, lat2, lon2) {

    const earthRadius = 20902231; // feet


    const degToRad = function(deg) {

      return deg * (Math.PI / 180);

    };


    const dLat = degToRad(lat2 - lat1);

    const dLon = degToRad(lon2 - lon1);


    const a =

      Math.sin(dLat / 2) * Math.sin(dLat / 2) +

      Math.cos(degToRad(lat1)) * Math.cos(degToRad(lat2)) *

      Math.sin(dLon / 2) * Math.sin(dLon / 2);


    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    const distance = earthRadius * c;


    return distance.toFixed(2);

  }


  // Function to show the dynamic information section when within desired range

  function showDynamicInformation() {

    const range = 1000; // Desired range in feet

    const currentDistance = calculateDistance(

      userLatitude,

      userLongitude,

      tourLocationLatitude,

      tourLocationLongitude

    );


    if (currentDistance <= range) {

      // Show the dynamic information section

      document.getElementById('dynamic-info').style.display = 'block';

    } else {

      // Hide the dynamic information section

      document.getElementById('dynamic-info').style.display = 'none';

    }

  }

// Define the location summary
var locationSummary = "This is a test to see if this is actually going to work.";
// define the MP3 URL
var mp3Url = "test/rath.mp3";

// Update the dynamic information section
document.getElementById("location-summary").innerHTML = "<p>" + locationSummary + "</p>";

// Create the MP3 player
var audioPlayer = document.createElement("audio");
audioPlayer.setAttribute("src", mp3Url);
audioPlayer.setAttribute("controls", "controls");
document.getElementById("mp3-player").appendChild(audioPlayer);

  // Function to show the image popup

  function showImagePopup(imageSrc, imageSource) {

    // Create a modal element

    const modal = document.createElement('div');

    modal.classList.add('modal');


    // Create the image element

    const image = document.createElement('img');

    image.src = imageSrc;

    image.alt = 'Image';

    image.classList.add('modal-image');


    // Create the image source element

    const source = document.createElement('p');

    source.textContent = `Source: ${imageSource}`;

    source.classList.add('modal-source');


    // Append the image and source to the modal

    modal.appendChild(image);

    modal.appendChild(source);


    // Append the modal to the body

    document.body.appendChild(modal);


    // Close the modal when clicked outside the image

    modal.addEventListener('click', function(event) {

      if (event.target === modal) {

        modal.remove();

      }

    });

  }


  // Function to show the sponsor popup

  function showSponsorPopup() {

    // Create a modal element

    const modal = document.createElement('div');

    modal.classList.add('modal');


    // Create the sponsor information element

    const sponsorInfo = document.createElement('div');

    sponsorInfo.classList.add('modal-sponsor');


    // Create the sponsor address element

    const address = document.createElement('p');

    address.textContent = `Address: ${sponsorAddress}`;

    address.classList.add('modal-address');


    // Create the sponsor distance element

    const distance = document.createElement('p');

    distance.textContent = `Distance: ${sponsorDistance} feet`;

    distance.classList.add('modal-distance');


    // Create the sponsor description element

    const description = document.createElement('p');

    description.textContent = sponsorDescription;

    description.classList.add('modal-description');


    // Append the sponsor information to the modal

    sponsorInfo.appendChild(address);

    sponsorInfo.appendChild(distance);

    sponsorInfo.appendChild(description);


    // Append the sponsor information to the modal

    modal.appendChild(sponsorInfo);


    // Append the modal to the body

    document.body.appendChild(modal);


    // Close the modal when clicked outside the sponsor information

    modal.addEventListener('click', function(event) {

      if (event.target === modal) {

        modal.remove();

      }

    });

  }
  
   // JavaScript code here
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        alert("Geolocation is not supported by this browser.");
      }
    }

    function showPosition(position) {
      const latitude = document.getElementById("latitude");
      const longitude = document.getElementById("longitude");
      const distance = document.getElementById("distance");

      latitude.textContent = position.coords.latitude.toFixed(6);
      longitude.textContent = position.coords.longitude.toFixed(6);

      // Calculate distance using latitude and longitude (you can replace this with your own logic)
      const targetLatitude = 44.95597;
      const targetLongitude = -93.102211;
      const distanceInFeet = calculateDistance(position.coords.latitude, position.coords.longitude, targetLatitude, targetLongitude);
      distance.textContent = distanceInFeet.toFixed(2);
    }

    function calculateDistance(lat1, lon1, lat2, lon2) {
      const R = 6371; // Radius of the earth in km
      const dLat = deg2rad(lat2 - lat1);
      const dLon = deg2rad(lon2 - lon1);
      const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      const distance = R * c * 3280.84; // Convert to feet
      return distance;
    }

    function deg2rad(deg) {
      return deg * (Math.PI / 180);
    }


  // Get the user's current location coordinates

  navigator.geolocation.getCurrentPosition(function(position) {

    userLatitude = position.coords.latitude;

    userLongitude = position.coords.longitude;


    // Calculate the distance between user and tour location

    const distance = calculateDistance(

      userLatitude,

      userLongitude,

      tourLocationLatitude,

      tourLocationLongitude

    );


    // Display the distance in feet on the page

    document.getElementById('distance').textContent = `${distance} feet`;


    // Show the dynamic information section if within range

    showDynamicInformation();
        getLocation();

  });

</script>
</body>
</html>
