<html>
<head>
  <title>Minnesota Then | History Trivia</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    <meta property="og:url" content="https://www.mnthen.com" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Minnesota Then" />
    <meta property="og:description" content="I took a history trivia quiz at Minnesota Then." />
    <meta property="og:image" content="https://www.mnthen.com/images/favicon.css" />
    
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

  <!-- Custom CSS -->
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: url('/images/index_header.png') no-repeat center center fixed;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden; /* Prevent scrolling */
        }
        
            .share-link {
      margin: 15px 0;
      text-align: center; /* Aligns the links at the center */
    }

    .share-link a {
      padding: 8px 16px;
      text-decoration: none;
      color: #fff;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      cursor: pointer;
    }

    .share-link a.facebook {
      background-color: #3b5998; /* Facebook's color */
    }

    .share-link a.twitter {
      background-color: #1da1f2; /* Twitter's color */
    }

    .share-link a:hover {
      background-color: #4267B2; /* Darker shade for Facebook */
    }

    .share-link a.twitter:hover {
      background-color: #2795E9; /* Darker shade for Twitter */
    }

    .spacer {
      margin: 0 10px; /* Adjust spacing as needed */
    }

        .game {
            width: 600px;
            height: 100%;
            padding: 10px;
            background: #fff;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin-top: -5px; /* Adjust margin to start higher */
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Add any other existing styles */
            position: relative; /* Allows absolute positioning */
        }

        h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }

        .question {
            font-size: 20px;
            margin-bottom: 10px;
            color: #333;
        }

        .answers {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            width: 45%;
            margin: 5px;
            font-size: 16px;
            border-radius: 8px;
        }

        .message {
            text-align: center;
            margin-bottom: 10px;
            display: none;
        }

        .game-over {
            text-align: center;
            margin-bottom: 5px;
              position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
        }
        
        .game-over-inner {
  padding: 0 15px;
}

 .return-to-index {

margin: 5px auto;
border-radius: 8px;

}

        .next-btn {
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            margin-bottom: 10px;
        }

        .next-btn button {
            border-radius: 8px;
            display: block;
            width: 95%; /* Adjust the width of the button */
            margin: 0 auto; /* Centers the button horizontally */
        }
        
        .congrats-message {
            font-weight: bold;
        }
        
        @media (max-width: 500px) {
        .game {
            width: 90%;
            height: 90%;
            margin-top: -25px; /* Adjust margin to start higher */
        }
  
         button {
            width: 45%;
        }
        
               .return-to-index {
            margin: -5px auto;
            border-radius: 8px;
        }
        
         .game-over {
            text-align: center;

            padding: 5px;
            margin-top: -10px;
        }
    }
        </style>
</head>
<body>

  <main class="d-flex justify-content-center align-items-center" style="height: 90vh;">
  <div class="game">
    <h3>Minnesota Then History Trivia</h3>

    <div class="question">Question goes here</div>

    <div class="answers">
      <button class="btn btn-primary" id="answer1">Answer 1</button>
      <button class="btn btn-primary" id="answer2">Answer 2</button>  
      <button class="btn btn-primary" id="answer3">Answer 3</button>
      <button class="btn btn-primary" id="answer4">Answer 4</button>
    </div>

    <div class="message" id="message"></div>

<div class="game-over" id="game-over">
  <div class="congrats-message">
    <p>Congratulations! You had <span id="correct-answers"></span> correct answer(s).</p>
  </div>

<div class="share-link">
  <a href="https://www.facebook.com/sharer/sharer.php?u=mnthen.com" target="_blank" class="facebook button">Share on Facebook</a>
  <a href="https://twitter.com/intent/tweet?url=mnthen.com&text=Check out Minnesota Then.!" target="_blank" class="twitter button">Share on X</a>
</div>

  <div class="return-to-index" style="display: none;">
    <button class="btn btn-primary" onclick="returnToIndex()">Return</button>
  </div>
</div>

    <div class="next-btn" id="next-btn" style="display: none;">
      <button class="btn next-btn btn-primary" onclick="handleNext()">Next</button>
    </div>
  </div>
  </main>
  
  <footer>
  <!-- Footer content goes here --> 
</footer>
  
  <!-- Scripts -->
<script src="/questions.js?v=1.0"></script>

  <script>
    let currentQuestion = 0;
    let correctAnswers = 0;
    let wrongAnswers = [];

    const gameContainer = document.querySelector('.game');
    const questionElement = document.querySelector('.question');
    const answerButtons = document.querySelectorAll('.btn[id^="answer"]');
    const messageElement = document.getElementById('message');
    const gameOverElement = document.getElementById('game-over');
    const nextButton = document.getElementById('next-btn');

    let totalQuestions = 0;
    //let questions = []; // Your questions will be loaded here from questions.js

function loadQuestions() {
  console.log("loadQuestions() is being called."); // Add this line for debugging
  totalQuestions = questions.length;
  if (totalQuestions > 0) {
    loadQuestion();
  } else {
    console.error('No questions available.');
  }
}

    function loadQuestion() {
      if (currentQuestion < totalQuestions) {
        questionElement.textContent = questions[currentQuestion].question;
        const currentAnswers = questions[currentQuestion].answers;

        for (let i = 0; i < answerButtons.length; i++) {
          answerButtons[i].removeEventListener('click', handleAnswer);
          answerButtons[i].addEventListener('click', handleAnswer);
          answerButtons[i].textContent = currentAnswers[i];
          answerButtons[i].disabled = false;
        }

        messageElement.style.display = 'none';
        gameOverElement.style.display = 'none';
        nextButton.style.display = 'none';
      } else {
        endGame();
      }
    }

function handleAnswer(event) {
  const selectedAnswer = event.target.textContent;
  const currentQuestionObj = questions[currentQuestion];

  if (selectedAnswer === currentQuestionObj.correctAnswer) {
    correctAnswers++;
    messageElement.textContent = 'You are correct.';
    messageElement.style.color = 'green';
  } else {
    wrongAnswers.push({
      questionNumber: currentQuestion + 1,
      question: currentQuestionObj.question,
      correctAnswer: currentQuestionObj.correctAnswer
    });
    messageElement.textContent = `That is incorrect. The right answer is ${currentQuestionObj.correctAnswer}.`;
    messageElement.style.color = 'red';
  }

  messageElement.style.display = 'block';

  // Displaying the tidbit below the correct or incorrect message
  const tidbitText = document.createElement('p');
  tidbitText.textContent = currentQuestionObj.tidbit;
  tidbitText.style.textAlign = 'left';
  tidbitText.style.padding = '0 20px'; // Adjust padding as needed
  tidbitText.style.marginTop = '10px'; // Adjust margin top as needed
  tidbitText.style.color = 'black'; // Set the color to black
  messageElement.appendChild(tidbitText);

  for (let i = 0; i < answerButtons.length; i++) {
    answerButtons[i].disabled = true;
  }

  nextButton.style.display = 'block';
}

    function handleNext() {
      currentQuestion++;
      loadQuestion();
nextButton.style.display = 'none';

    }

function endGame() {
  // Get the element to display the number of correct answers
  const correctAnswersElement = document.getElementById('correct-answers');
  correctAnswersElement.textContent = correctAnswers; // Display the count of correct answers

  // Actions to perform at the end of the game
  gameOverElement.style.display = 'block';
  nextButton.style.display = 'none';

  const returnButton = document.querySelector('.return-to-index');
  returnButton.style.display = 'block'; // Show the return button
}

    function shareResult() {
      // Share results functionality
      alert('Shared!'); // Placeholder for sharing action
    }
    
function returnToIndex() {
  // Redirect to the index.html page
  window.location.href = 'index.html';
}

    window.onload = loadQuestions;
  </script>
</body>
</html>
