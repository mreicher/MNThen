<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Daily Dollar</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  
<style>
  body {
    background-color: #f4f4f4;
    font-family: 'Arial', sans-serif;
    color: #333;
    line-height: 1.6;
  }

  .container {
    max-width: 800px;
    margin: auto;
    padding: 20px;
  }

  h1, h4, h5 {
    color: #333;
  }

  .card {
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    margin-bottom: 20px;
    border: none;
    border-radius: 10px;
  }

  .card-body {
    padding: 20px;
  }

  .progress {
    height: 20px;
    margin-top: 10px;
  }

  .progress-bar {
    background-color: #007bff;
  }

  .form-control, .btn, .table {
    border-radius: 5px;
  }

  #add-income-source {
    color: #007bff;
    background-color: transparent;
    border: none;
    padding: 5px 10px;
    text-decoration: underline;
    font-size: 16px;
  }

  .table {
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  .table th, .table td {
    padding: 10px;
    text-align: left;
  }

  .table thead {
    background-color: #007bff;
    color: #fff;
  }
  
  /* Dynamic Income Sources Section */
#income-form {
  margin-top: 20px;
}

#income-sources-container .income-source {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
}

#income-sources-container .income-source label {
  flex-grow: 1;
  margin-right: 10px;
}

#income-sources-container .income-source input[type="number"] {
  flex-grow: 2;
  margin-right: 10px;
}

#income-sources-container .income-source button {
  white-space: nowrap;
}

#new-source-name {
  flex-grow: 1;
  margin-right: 10px;
}

#add-income-source {
  display: block;
  margin-top: 10px;
}

.btn {
  transition: background-color 0.3s ease;
}

.btn:hover {
  opacity: 0.9;
}

.btn:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.5);
}

.btn-danger {
  background-color: #dc3545;
}

.btn-danger:hover {
  background-color: #c82333;
}

.btn-primary {
  background-color: #007bff;
}

.btn-primary:hover {
  background-color: #0069d9;
}

    #add-income-source {
        font-weight: bold; /* Makes text bold */
        color: #28a745; /* Sets the text color */
        border-color: #28a745; /* Sets the border color */
        transition: all 0.3s ease; /* Smooth transition for hover effects */
    }

    #add-income-source:hover, #add-income-source:focus {
        color: #fff; /* Changes text color on hover/focus */
        background-color: #28a745; /* Changes background color on hover/focus */
        border-color: #218838; /* Darkens the border on hover/focus */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Adds a subtle shadow on hover/focus */
    }

    #add-income-source:focus {
        outline: none; /* Removes the outline on focus for cleaner look */
        box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5); /* Adds a glow effect on focus */
    }

/* Income Source Row Styling */
#income-sources-container .income-source {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

#income-sources-container .income-source label {
  flex-basis: 30%; /* Adjust the width as needed */
  margin-right: 10px;
}

#income-sources-container .income-source input[type="number"] {
  flex-grow: 2; /* Takes the remaining space */
  margin-right: 10px;
}

#income-sources-container .income-source button {
  white-space: nowrap;
}

/* Overall Section Styling */
.growing-totals {
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 8px;
}

/* Card Styling */
.growing-totals .card {
  background: #fff;
  border: none;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
}

.growing-totals .card-body {
  padding: 20px;
}

.growing-totals .card-title {
  font-size: 1.5rem;
  color: #333;
  margin-bottom: 20px;
  text-align: center;
}

/* Table Styling */
.growing-totals .table {
  margin-bottom: 0; /* Remove default margin */
  border-collapse: separate;
  border-spacing: 0 8px;
}

.growing-totals .table thead th {
  background-color: #007bff;
  color: #fff;
  border: none;
}

.growing-totals .table-striped tbody tr:nth-of-type(odd) {
  background-color: #f2f2f2;
}

.growing-totals .table td, .growing-totals .table th {
  padding: 12px 15px;
  border: none;
  vertical-align: middle;
}

/* Responsive Table */
@media screen and (max-width: 768px) {
  .growing-totals .table {
    display: block;
    overflow-x: auto;
  }
}



/* Responsive Adjustments */
@media (max-width: 768px) {
  #income-sources-container .income-source,
  #new-source-name,
  #add-income-source {
    flex-direction: column;
    align-items: stretch;
  }

  #income-sources-container .income-source label,
  #income-sources-container .income-source input,
  #income-sources-container .income-source button,
  #new-source-name,
  #add-income-source {
    margin-bottom: 10px;
  }

  #income-sources-container .income-source input,
  #income-sources-container .income-source button {
    width: 100%;
  }
}


  @media (max-width: 768px) {
    .container {
      padding: 10px;
    }

    .form-control, .btn {
      width: 100%;
      margin-top: 10px;
    }

    #add-income-source {
      margin-top: 10px;
      width: 100%;
    }
  }
</style>


</head>

<body>

<div class="container">

    <h1 class="text-center display-4 mt-5">The Daily Dollar</h1>

    <!-- Daily Goal and Total Earnings Display -->
    <section class="text-center my-4">
      <div class="card shadow-lg">
        <div class="card-body">
          <h5 class="card-title font-weight-bold">
            Grand Total <span id="daily-goal" class="text-success"></span>
          </h5>
          <h6 class="card-subtitle mb-2">
            Daily Earning: <span id="total-earnings" class="text-primary">$0</span>
          </h6>
          <h6 class="card-subtitle mb-4">
            Year-to-Date: <span id="yearly-total" class="text-info">$0</span>
          </h6>
          <div class="progress" style="height: 25px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" id="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Dynamic Income Sources -->
    <section class="my-4">
      <div class="card shadow">
        <div class="card-body">
          <h5 class="card-title">Income Sources</h5>
          <form id="income-form" class="pt-3">
            <div id="income-sources-container" class="mb-5">
              <!-- Income sources will be added here dynamically -->
            </div>
            <input type="text" id="new-source-name" class="form-control mb-3" placeholder="New Source Name" aria-label="New Source Name">
        <button type="button" id="add-income-source" class="btn btn-outline-success mb-3">+ Add Income Source</button>

          </form>
        </div>
      </div>
    </section>

    <div class="text-center my-4">
      <button type="button" id="clear-data" class="btn btn-outline-danger w-50">Clear Data</button>  
    </div>

    <!-- Growing Totals -->
    <section class="my-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Growing Totals by Source</h5>
          <table class="table table-hover">
            <thead class="thead-light">
              <tr>
                <th>Income Source</th>
                <th>Total Earnings</th>
              </tr>
            </thead>
            <tbody id="source-totals">
              <!-- Growing totals by source will be added here dynamically -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Daily Totals Section -->
    <section class="mb-4">
      <h4 class="text-center mt-4 mb-3">Daily Totals</h4>
      <div id="daily-totals-container" class="px-3">
        <!-- Daily totals will be added here dynamically -->
      </div>
    </section>

</div>



<script>
  // Elements
  const addIncomeSourceButton = document.getElementById('add-income-source');
  const newSourceNameInput = document.getElementById('new-source-name');
  const incomeForm = document.getElementById('income-form');
  const sourceTotalsContainer = document.getElementById('source-totals');
  const totalEarningsElement = document.getElementById('total-earnings');
  const yearlyTotalElement = document.getElementById('yearly-total');
  const clearDataButton = document.getElementById('clear-data');
  const dailyTotalsContainer = document.getElementById('daily-totals-container');

  // Data
  let incomeSources = JSON.parse(localStorage.getItem('incomeSources')) || {};
  let dailyTotals = JSON.parse(localStorage.getItem('dailyTotals')) || {};
  let currentDate = new Date().toISOString().split('T')[0];

  // Initialize application
  function initialize() {
    renderIncomeSources();
    renderDailyTotals();
    renderSourceTotals();
    updateTotalEarningsDisplay();
    updateYearlyTotalDisplay();
  }

  // Add income source
  addIncomeSourceButton.addEventListener('click', () => {
    const sourceName = newSourceNameInput.value.trim();
    if (sourceName && !incomeSources.hasOwnProperty(sourceName)) {
      incomeSources[sourceName] = 0;
      newSourceNameInput.value = '';
      updateLocalStorage();
      renderIncomeSources();
      renderSourceTotals();
    }
  });

  // Update earnings
  incomeForm.addEventListener('submit', (event) => {
    event.preventDefault();
    let dailyTotal = 0;
    Object.keys(incomeSources).forEach(source => {
      const input = document.querySelector(`input[name="${source}"]`);
      const amount = parseFloat(input.value) || 0;
      incomeSources[source] += amount;
      dailyTotal += amount;
      input.value = ''; // Reset input field
    });

    // Update daily and yearly totals
    dailyTotals[currentDate] = (dailyTotals[currentDate] || 0) + dailyTotal;
    updateLocalStorage();
    renderSourceTotals();
    renderDailyTotals();
    updateTotalEarningsDisplay();
    updateYearlyTotalDisplay();
  });

  // Render income sources inputs
  function renderIncomeSources() {
    const container = document.getElementById('income-sources-container');
    container.innerHTML = '';
    Object.keys(incomeSources).forEach(source => {
      const div = document.createElement('div');
      div.className = 'income-source form-group';
      div.innerHTML = `
        <label for="${source}">${source}</label>
        <input type="number" id="${source}" name="${source}" class="form-control" step="0.01">
      `;
      container.appendChild(div);
    });
  }

  // Render source totals
  function renderSourceTotals() {
    sourceTotalsContainer.innerHTML = '';
    Object.keys(incomeSources).forEach(source => {
      const earnings = incomeSources[source];
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${source}</td>
        <td>$${earnings.toFixed(2)}</td>
      `;
      sourceTotalsContainer.appendChild(row);
    });
  }

  // Update total earnings display
  function updateTotalEarningsDisplay() {
    const totalEarnings = Object.values(incomeSources).reduce((acc, curr) => acc + curr, 0);
    totalEarningsElement.textContent = `$${totalEarnings.toFixed(2)}`;
  }

  // Update yearly total display
  function updateYearlyTotalDisplay() {
    const yearlyTotal = Object.values(dailyTotals).reduce((acc, curr) => acc + curr, 0);
    yearlyTotalElement.textContent = `$${yearlyTotal.toFixed(2)}`;
  }
  
function updateIncomeSource(source) {
  const newValue = parseFloat(document.getElementById(source).value) || 0;
  incomeSources[source].total += newValue - incomeSources[source].currentValue;
  incomeSources[source].currentValue = newValue;
  // Optionally, update the display of the total for this source
  updateTotalDisplayForSource(source);
}


function renderIncomeSources() {
  const container = document.getElementById('income-sources-container');
  container.innerHTML = '';
  Object.keys(incomeSources).forEach(source => {
    const div = document.createElement('div');
    div.className = 'income-source form-group d-flex align-items-center';
    div.innerHTML = `
      <label for="${source}" class="flex-grow-1">${source}</label>
      <input type="number" id="${source}" name="${source}" class="form-control mr-2" step="0.01" value="${incomeSources[source].currentValue}">
      <button onclick="updateIncomeSource('${source}')" class="btn btn-primary btn-sm mr-2">Update</button>
      <button onclick="deleteIncomeSource('${source}')" class="btn btn-danger btn-sm">Delete</button>
    `;
    container.appendChild(div);
  });
}

function deleteIncomeSource(sourceName) {
  delete incomeSources[sourceName];
  updateLocalStorage();
  renderIncomeSources();
  renderSourceTotals();
}


  // Remove an income source
  function removeSource(source) {
    delete incomeSources[source];
    updateLocalStorage();
    renderIncomeSources();
    renderSourceTotals();
    updateTotalEarningsDisplay();
  }

  // Render daily totals
  function renderDailyTotals() {
    dailyTotalsContainer.innerHTML = '';
    Object.keys(dailyTotals).forEach(date => {
      const total = dailyTotals[date];
      const div = document.createElement('div');
      div.className = 'total-by-date';
      div.textContent = `${date}: $${total.toFixed(2)}`;
      dailyTotalsContainer.appendChild(div);
    });
  }

  // Update local storage
  function updateLocalStorage() {
    localStorage.setItem('incomeSources', JSON.stringify(incomeSources));
    localStorage.setItem('dailyTotals', JSON.stringify(dailyTotals));
  }

  // Clear all data
  clearDataButton.addEventListener('click', () => {
    localStorage.clear();
    incomeSources = {};
    dailyTotals = {};
    initialize();
  });

  initialize();
</script>

</body>
</html>
