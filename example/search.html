<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="Minnesota, history, walking tours, interactive, landmarks, neighborhoods">
  <title>Minnesota Then | Blpg</title>
<link rel="shortcut icon" type="image/x-icon" href="https://www.mnthen.com/images/mnthenfav.ico">
          <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
        <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">

    <!-- Bootstrap 5.3.2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
.search-hero {
  background: linear-gradient(135deg, #f8fafc, #ffffff);
}

.search-form .form-control {
  border-radius: 8px 0 0 8px;
  border: 1px solid #dee2e6;
  padding: 0.75rem 1.25rem;
}

.search-form .btn {
  border-radius: 0 8px 8px 0;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}

.result-group {
  margin-bottom: 2rem;
}

.result-group h3 {
  color: #1a365d;
  font-size: 1.25rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e2e8f0;
}

.result-card {
  padding: 1rem;
  margin-bottom: 1rem;
  border-radius: 8px;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  transition: transform 0.2s;
}

.result-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.result-title {
  color: #1a365d;
  text-decoration: none;
  font-weight: 600;
}

.result-title:hover {
  color: #2c5282;
}

.result-type {
  font-size: 0.875rem;
  color: #718096;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
    </style>
</head>
<body>
<!-- header -->
<header class="site-header">
  <div class="header-container">
    <a href="/" class="site-title">Minnesota Then</a>
    
    <button class="mobile-menu-btn" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <nav class="main-nav">
      <ul class="nav-list">
        <li class="nav-item">
          <button class="dropdown-btn">
            About
            <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="dropdown-content">
            <a href="/mission">Our Mission</a>
            <a href="/staff">Staff</a>
            <a href="/contact">Contact</a>
          </div>
        </li>
                <li class="nav-item">
          <button class="dropdown-btn">
            Multimedia
            <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="dropdown-content">
            <a href="/blog">Blog</a>
            <a href="/youtube">YouTube</a>
            <a href="/podcast">Podcast</a>
          </div>
        </li>
        <li class="nav-item">
          <button class="dropdown-btn">
            Resources
            <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="dropdown-content">
            <a href="/exhibits">Current Exhibits</a>
            <a href="/events">Events</a>
            <a href="/resources">Educational Resources</a>
          </div>
        </li>
        <li class="nav-item">
          <button class="dropdown-btn">
            Contribute
            <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="dropdown-content">
            <a href="/donate">Donate</a>
            <a href="/volunteer">Volunteer</a>
            <a href="/membership">Membership</a>
          </div>
        </li>
      </ul>
    </nav>
    
    <button class="search-btn" aria-label="Search">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
    </button>
  </div>
</header>
  
<!-- Search Section -->
<div class="search-hero py-5">
  <div class="container">
    <h1 class="text-center mb-4">Explore Minnesota's History</h1>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <form id="searchForm" class="search-form">
          <div class="input-group">
            <input 
              type="search" 
              id="searchInput"
              class="form-control form-control-lg"
              placeholder="Search Minnesota's history..."
              aria-label="Search" 
            >
            <button class="btn btn-primary" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Results Section -->
<div class="container mt-4">
  <div id="searchResults" class="search-results">
    <!-- Results will be populated here -->
  </div>
  <div id="loadingSpinner" class="text-center py-5 d-none">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>

<footer class="footer bg-primary py-5"> 
   <div class="container">
       <!-- Main Footer Content -->
       <div class="row g-4 mb-4">
           <!-- Brand -->
           <div class="col-lg-3 col-md-6 pt-3"> 
               <h3 class="footer-brand mb-3">
                   <span class="text-white">Minnesota</span>
                   <span class="text-navy">Then</span>
               </h3>
           </div>

           <!-- Quick Links -->
           <div class="col-lg-2 col-md-6">
               <h5 class="text-white mb-3">Who We Are</h5>
               <ul class="list-unstyled footer-links">
                   <li><a href="/about.html">About Us</a></li>
                   <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
               </ul>
           </div>

           <div class="col-lg-2 col-md-6">
               <h5 class="text-white mb-3">What We Do</h5>
               <ul class="list-unstyled footer-links">
                   <li><a href="https://mnthen.com/blog.html">Blog</a></li>
                   <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
                   <li><a href="/upcoming_events.html">Upcoming Events</a></li>
               </ul>
           </div>

           <div class="col-lg-2 col-md-6">
               <h5 class="text-white mb-3">Resources</h5>
               <ul class="list-unstyled footer-links">
                   <li><a href="https://www.mnthen.com/works.html">Learn the App</a></li>
                   <li><a href="/faq.html">Help Center</a></li>
                   <li><a href="/resources.html">Research Tools</a></li>
               </ul>
           </div>

           <!-- Tagline -->
           <div class="col-lg-3 col-md-6 pt-3"> <!-- Added top padding -->
               <p class="tagline">Every Step Has a Story</p>
           </div>
       </div>

       <hr class="footer-divider">

       <!-- Footer Bottom -->
       <div class="row align-items-center">
           <div class="col-md-4 text-center text-md-start">
               <small>&copy; 2024 Minnesota Then. All rights reserved</small>
           </div>
           <div class="col-md-8">
<div class="social-icons text-center text-md-end">
    <span class="me-2">Connect:</span>
    <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white">
        <i class="fab fa-facebook-f"></i>
    </a>
    <span class="mx-2 text-white">|</span>
    <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white">
        <i class="fa-brands fa-bluesky"></i>
    </a>
    <span class="mx-2 text-white">|</span>
    <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white">
        <i class="fab fa-linkedin-in"></i>
    </a>
</div>
           </div>
       </div>
   </div>
</footer>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

      <!-- Load Firebase SDK -->

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

<script>
  // Firebase Configuration
import { initializeApp } from 'firebase/app';
import { getFirestore, collection, query, where, getDocs } from 'firebase/firestore';

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyBDUAF3qJGhLYQJPHyWwY0JzonN5l8ERzE",
  authDomain: "mnthen-3151d.firebaseapp.com",
  projectId: "mnthen-3151d",
  storageBucket: "mnthen-3151d.appspot.com",
  messagingSenderId: "416231360428",
  appId: "1:416231360428:web:36f69cc231be2d84a8dc09"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Content types collection structure
const contentTypes = {
  articles: {
    title: "Articles",
    icon: "bi-file-text"
  },
  blog: {
    title: "Blog Posts",
    icon: "bi-pencil-square"
  },
  podcasts: {
    title: "Podcast Episodes",
    icon: "bi-mic"
  },
  locations: {
    title: "Historic Sites",
    icon: "bi-geo-alt"
  }
};

// Search functionality
const searchForm = document.getElementById('searchForm');
const searchInput = document.getElementById('searchInput');
const searchResults = document.getElementById('searchResults');
const loadingSpinner = document.getElementById('loadingSpinner');

searchForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const searchTerm = searchInput.value.trim().toLowerCase();
  if (!searchTerm) return;
  
  showLoading(true);
  try {
    const results = await performSearch(searchTerm);
    displayResults(results);
  } catch (error) {
    console.error('Search error:', error);
    showError();
  }
  showLoading(false);
});

async function performSearch(searchTerm) {
  const results = {};
  
  for (const contentType of Object.keys(contentTypes)) {
    const contentRef = collection(db, contentType);
    const q = query(
      contentRef,
      where('searchTerms', 'array-contains', searchTerm)
    );
    
    const snapshot = await getDocs(q);
    if (!snapshot.empty) {
      results[contentType] = snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
    }
  }
  
  return results;
}

function displayResults(results) {
  searchResults.innerHTML = '';
  
  const hasResults = Object.values(results).some(group => group.length > 0);
  
  if (!hasResults) {
    searchResults.innerHTML = `
      <div class="text-center py-5">
        <p class="text-muted">No results found</p>
      </div>
    `;
    return;
  }
  
  Object.entries(results).forEach(([type, items]) => {
    if (items.length === 0) return;
    
    const groupHTML = `
      <div class="result-group">
        <h3>
          <i class="bi ${contentTypes[type].icon}"></i>
          ${contentTypes[type].title}
        </h3>
        <div class="result-items">
          ${items.map(item => `
            <div class="result-card">
              <span class="result-type">${contentTypes[type].title}</span>
              <h4><a href="${item.url}" class="result-title">${item.title}</a></h4>
              <p class="text-muted mb-0">${item.description}</p>
            </div>
          `).join('')}
        </div>
      </div>
    `;
    
    searchResults.insertAdjacentHTML('beforeend', groupHTML);
  });
}

function showLoading(show) {
  loadingSpinner.classList.toggle('d-none', !show);
  searchResults.style.opacity = show ? '0.5' : '1';
}
</script>
    
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
