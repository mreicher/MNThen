<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minnesota Then</title>
  <link rel="shortcut icon" type="image/x-icon" href="https://www.mnthen.com/images/mnthenfav.ico">
    
    <!-- Bootstrap 5.3.2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">


    <style>
        /* Base Styles */
header {
 background: #ffffff;
 box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.navbar {
 font-family: 'Inter', sans-serif;
 padding: 1rem 0;
 background: #ffffff;
}

/* Brand */
.navbar-brand {
 font-size: 1.75rem;
 font-weight: 600;
 letter-spacing: -0.5px;
 margin-left: 2rem;
}

/* Navigation */
.navbar-nav {
 gap: 0.5rem;
}

.nav-link {
 color: #495057;
 font-weight: 500;
 padding: 0.5rem 1rem;
 transition: color 0.2s;
}

.nav-link:hover {
 color: #0d6efd;
}

/* Dropdown */
.dropdown-menu {
 padding: 1rem 0;
 border: none;
 box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
 border-radius: 8px;
}

.dropdown-item {
 padding: 0.75rem 1.5rem;
 font-weight: 500;
 color: #495057;
}

.dropdown-divider {
 margin: 0.5rem auto;
 width: 90%;
 opacity: 0.1;
}

/* Login Button */
#account-link {
 background-color: #0d6efd;
 color: #ffffff !important;
 padding: 0.8rem 1.5rem;
 font-weight: 600;
 margin-right: 1rem;
 transition: background-color 0.2s;
}

#account-link:hover {
 background-color: #0b5ed7;
}

#account-link i {
 margin-right: 0.5rem;
}

/* Search Icon */
#search-icon {
 color: #495057;
 font-size: 1.2rem;
 transition: color 0.2s;
}

#search-icon:hover {
 color: #0d6efd;
}

/* Responsive */
@media (max-width: 991px) {
 .navbar-brand {
   margin-left: 1rem;
 }

 .navbar-nav {
   text-align: center;
   padding: 1rem 0;
 }

 .nav-link {
   padding: 0.75rem 1rem;
 }

 #account-link {
   margin: 1rem auto;
   display: block;
   max-width: 200px;
 }

 #search-icon {
   display: none;
 }

 .dropdown-menu {
   text-align: center;
   border: 1px solid rgba(0, 0, 0, 0.08);
   box-shadow: none;
 }
}

@media (min-width: 992px) {
 .navbar-nav {
   margin: 0 auto;
 }
}
    </style>
</head>
<body>
<header>
 <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
   <div class="container-fluid px-4">
     <a class="navbar-brand fs-4 fw-bold" href="/index.html">Minnesota Then</a>
     
     <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
       <span class="navbar-toggler-icon"></span>
     </button>

     <div class="collapse navbar-collapse" id="navbarContent">
       <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
         <li class="nav-item">
           <a class="nav-link px-3" href="/blog.html">Blog</a>
         </li>
         <li class="nav-item">
           <a class="nav-link px-3" href="/faq.html">Help Center</a>
         </li>
         <li class="nav-item">
           <a class="nav-link px-3" href="/podcast.html">Podcast</a>
         </li>
         <li class="nav-item dropdown">
           <a class="nav-link dropdown-toggle px-3" href="#" data-bs-toggle="dropdown">
             Contribute
           </a>
           <ul class="dropdown-menu">
             <li><a class="dropdown-item" href="/donate.html">Make a Donation</a></li>
             <li><hr class="dropdown-divider"></li>
             <li><a class="dropdown-item" href="#">Join our Patreon</a></li>
             <li><hr class="dropdown-divider"></li>
             <li><a class="dropdown-item" href="https://mnthen.com/markers.html">Community Markers</a></li>
           </ul>
         </li>
       </ul>
       <div class="d-flex align-items-center">
         <a class="nav-link btn btn-primary rounded-pill px-4 me-3" href="#" id="account-link">
           <i class="fas fa-user me-2"></i>
           <span>Log In | Register</span>
         </a>
         <a class="nav-link d-none d-lg-block" href="#" id="search-icon">
           <i class="fas fa-search fs-5"></i>
         </a>
       </div>
     </div>
   </div>
 </nav>
</header>



    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
        <!-- Load Firebase SDK -->

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <script>
// Wait for DOM to be fully loaded
document.addEventListener('DOMContentLoaded', () => {
  initializeNavigation();
  initializeDropdowns();
  initializeCitationModal();
  initializeCarousel();
});

// Navigation functionality
function initializeNavigation() {
  const toggleButton = document.querySelector('.navbar-toggler');
  const navbarLinks = document.querySelector('.navbar-collapse');

  if (!toggleButton || !navbarLinks) return;

  toggleButton.addEventListener('click', () => {
    const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';
    toggleButton.setAttribute('aria-expanded', String(!isExpanded));
    navbarLinks.classList.toggle('show');
  });

  // Close menu when clicking outside
  document.addEventListener('click', (event) => {
    const isClickOutside = !toggleButton.contains(event.target) && 
                          !navbarLinks.contains(event.target);
    
    if (isClickOutside && navbarLinks.classList.contains('show')) {
      navbarLinks.classList.remove('show');
      toggleButton.setAttribute('aria-expanded', 'false');
    }
  });
}

// Dropdown functionality
function initializeDropdowns() {
  const dropdownToggles = document.querySelectorAll('.dropdown-toggle');

  dropdownToggles.forEach(toggle => {
    toggle.addEventListener('click', (e) => {
      e.preventDefault();
      const menu = toggle.nextElementSibling;
      if (menu) menu.classList.toggle('show');
    });
  });

  // Close dropdowns when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.matches('.dropdown-toggle')) {
      document.querySelectorAll('.dropdown-menu.show')
        .forEach(menu => menu.classList.remove('show'));
    }
  });
}

// Citation modal functionality
function initializeCitationModal() {
  const citationIcon = document.getElementById('citationIcon');
  const citationModal = document.getElementById('citationModal');

  if (!citationIcon || !citationModal || !bootstrap?.Modal) return;

  const modal = new bootstrap.Modal(citationModal);

  citationIcon.addEventListener('click', () => modal.show());

  // Show modal on hover for desktop
  if (window.matchMedia('(min-width: 768px)').matches) {
    citationIcon.addEventListener('mouseenter', () => modal.show());
  }
}

// Firebase configuration and initialization
const firebaseConfig = {
  apiKey: "AIzaSyBDUAF3qJGhLYQJPHyWwY0JzonN5l8ERzE",
  authDomain: "mnthen-3151d.firebaseapp.com",
  projectId: "mnthen-3151d",
  storageBucket: "mnthen-3151d.appspot.com",
  messagingSenderId: "416231360428",
  appId: "1:416231360428:web:36f69cc231be2d84a8dc09"
};

// Initialize Firebase
try {
  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // Authentication state observer
  firebase.auth().onAuthStateChanged((user) => {
    const accountLink = document.getElementById('account-link');
    if (!accountLink) return;

    if (user) {
      accountLink.href = '/account.html';
      accountLink.innerHTML = `
        <i class="fas fa-user-circle" style="margin-right: 5px"></i>
        <span>Account Info</span>
      `;
    } else {
      accountLink.href = '/login.html';
      accountLink.innerHTML = `
        <i class="fas fa-user" style="margin-right: 5px"></i>
        <span>Log In <span>|</span> Register</span>
      `;
    }
  });
} catch (error) {
  console.error('Firebase initialization error:', error);
}

// Carousel functionality
function initializeCarousel() {
  const carousel = document.getElementById('blogCarousel');
  if (!carousel) return;

  const slides = carousel.querySelectorAll('.mnt-carousel-slide');
  const indicators = carousel.querySelectorAll('.mnt-indicator');
  const prevButton = carousel.querySelector('.mnt-prev');
  const nextButton = carousel.querySelector('.mnt-next');

  if (!slides.length || !indicators.length || !prevButton || !nextButton) return;

  let currentSlide = 0;

  function showSlide(n) {
    // Remove active class from current slide and indicator
    slides[currentSlide].classList.remove('mnt-active');
    indicators[currentSlide].classList.remove('mnt-active');

    // Calculate new slide index
    currentSlide = ((n % slides.length) + slides.length) % slides.length;

    // Add active class to new slide and indicator
    slides[currentSlide].classList.add('mnt-active');
    indicators[currentSlide].classList.add('mnt-active');
  }

  // Event listeners for carousel controls
  prevButton.addEventListener('click', () => showSlide(currentSlide - 1));
  nextButton.addEventListener('click', () => showSlide(currentSlide + 1));

  // Event listeners for indicators
  indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', () => showSlide(index));
  });

  // Optional: Auto-advance slides every 5 seconds
  // const autoAdvance = setInterval(() => showSlide(currentSlide + 1), 5000);

  // Optional: Pause auto-advance on hover
  // carousel.addEventListener('mouseenter', () => clearInterval(autoAdvance));
  // carousel.addEventListener('mouseleave', () => {
  //   autoAdvance = setInterval(() => showSlide(currentSlide + 1), 5000);
  // });
}
    </script>
</body>
</html>
