<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta name="keywords" content="Minnesota, history, walking tours, interactive, landmarks, neighborhoods">
 <title>Minnesota Then | Search Results</title>
 <link rel="shortcut icon" type="image/jpg" href="https://www.mnthen.com/images/mnthenfav.ico">
 
 <!-- Bootstrap 5.3.2 CSS -->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
 
 <!-- Font Awesome -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
 
 <!-- Custom Styles -->
 <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_results.css">
 <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_article_fab.css">
 <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">
 <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
 <link rel="stylesheet" href="https://www.mnthen.com/css/dropdown.css">
 
 <!-- Immediate footer hiding script to prevent flash -->
 <script>
   (function() {
     const urlParams = new URLSearchParams(window.location.search);
     const query = urlParams.get('query');
     
     if (query && query.trim()) {
       // Add styles immediately to prevent footer flash
       const style = document.createElement('style');
       style.id = 'immediate-footer-hide';
       style.textContent = `
         footer.footer { 
           display: none !important; 
           visibility: hidden !important;
           opacity: 0 !important;
         }
       `;
       document.head.appendChild(style);
       
       // Add class to body for additional targeting
       if (document.body) {
         document.body.classList.add('search-loading');
       } else {
         document.addEventListener('DOMContentLoaded', function() {
           document.body.classList.add('search-loading');
         });
       }
     }
   })();
 </script>
 
 <style>
   /* Background Colors */
   body {
     background-color: white;
     min-height: 100vh;
   }
   
   body.has-results {
     background-color: #f8f9fa;
   }

   /* Enhanced footer hiding during search loading - Multiple approaches for robustness */
   body.search-loading footer.footer,
   body.search-loading footer,
   body.search-loading .footer {
     display: none !important;
     visibility: hidden !important;
     opacity: 0 !important;
     position: absolute !important;
     left: -9999px !important;
     height: 0 !important;
     overflow: hidden !important;
   }
   
   /* Hide no-results box during search loading */
   body.search-loading #no-results {
     display: none !important;
   }
   
   /* Additional CSS-only approach using URL parameters detection */
   @media screen {
     body {
       --footer-display: block;
     }
   }
   
   /* Hide footer by default if we're on a results page with potential query */
   body footer.footer {
     display: var(--footer-display, none) !important;
   }
   
   /* Show footer only when explicitly allowed */
   body.show-footer footer.footer {
     display: block !important;
     visibility: visible !important;
     opacity: 1 !important;
     position: static !important;
     left: auto !important;
     height: auto !important;
     overflow: visible !important;
   }
   
   /* Ensure proper spacing when footer is hidden */
   body.search-loading {
     padding-bottom: 0;
   }
   
   /* Search Results Container */
   .search-results-container {
     max-width: 1140px;
     margin: 0 auto;
     padding: 2rem 1rem;
     min-height: calc(100vh - 200px);
   }
   
   /* Search Summary */
   .search-summary {
     font-size: 1.1rem;
     color: #4b5563;
     margin-bottom: 1.5rem;
   }
   
   /* Individual Result Cards */
   .search-result-card {
     display: flex;
     border: 1px solid #e5e7eb;
     border-radius: 8px;
     margin-bottom: 1.25rem;
     overflow: hidden;
     background: white;
     height: 160px;
     transition: all 0.2s ease;
   }
   
   .search-result-card:hover {
     box-shadow: 0 2px 8px rgba(0,0,0,0.08);
   }
   
   .search-result-image {
     width: 180px;
     flex-shrink: 0;
     position: relative;
     height: 100%;
   }
   
   .search-result-image img {
     width: 100%;
     height: 100%;
     object-fit: cover;
   }
   
   .search-result-content {
     padding: 1rem;
     flex-grow: 1;
     display: flex;
     flex-direction: column;
     height: 100%;
   }
   
   .search-result-title {
     font-size: 1.15rem;
     font-weight: 600;
     color: #1e3a8a;
     margin-bottom: 0.5rem;
     text-decoration: none !important;
     line-height: 1.3;
   }
   
   .search-result-title a {
     color: inherit;
     text-decoration: none;
   }
   
   .search-result-title a:hover {
     text-decoration: underline;
   }
   
   .search-result-excerpt {
     color: #4b5563;
     font-size: 0.9rem;
     margin-bottom: 0;
     flex-grow: 1;
     overflow: hidden;
     display: -webkit-box;
     -webkit-line-clamp: 2;
     -webkit-box-orient: vertical;
     line-height: 1.4;
   }
   
   /* Metadata Section */
   .search-result-meta {
     display: flex;
     justify-content: space-between;
     padding-top: 0.5rem;
     margin-top: 0.5rem;
     border-top: 1px solid #f0f0f0;
     font-size: 0.8rem;
     color: #6b7280;
   }
   
   .search-result-meta span {
     display: flex;
     align-items: center;
   }
   
   .search-result-meta i {
     margin-right: 0.3rem;
     font-size: 0.7rem;
   }
   
   /* Pagination */
   .pagination {
     display: flex;
     justify-content: center;
     margin-top: 2rem;
     gap: 0.5rem;
   }
   
   .pagination a {
     display: inline-flex;
     align-items: center;
     justify-content: center;
     width: 36px;
     height: 36px;
     border-radius: 6px;
     font-weight: 500;
     color: #374151;
     text-decoration: none;
     transition: background-color 0.2s ease;
     font-size: 0.9rem;
   }
   
   .pagination a:hover {
     background-color: #f3f4f6;
   }
   
   .pagination a.active {
     background-color: #1e3a8a;
     color: white;
   }
   
   /* Enhanced Loading State - Clean minimal design */
   .loading-state {
     text-align: center;
     padding: 4rem 2rem;
     max-width: 600px;
     margin: 3rem auto;
     background-color: transparent;
     border: none;
     box-shadow: none;
   }

   .loading-spinner {
     display: inline-block;
     width: 32px;
     height: 32px;
     border: 3px solid #e5e7eb;
     border-radius: 50%;
     border-top-color: #1e3a8a;
     animation: spin 1s ease-in-out infinite;
     margin-bottom: 1.5rem;
   }

   @keyframes spin {
     to { transform: rotate(360deg); }
   }

   .loading-state p {
     color: #374151;
     font-size: 1.2rem;
     margin: 0;
     font-weight: 500;
   }
   
   /* Popular Keywords Section */
   .popular-keywords {
     background-color: white;
     border-radius: 12px;
     border: 1px solid #e5e7eb;
     box-shadow: 0 2px 8px rgba(0,0,0,0.05);
     max-width: 800px;
     margin: 0 auto 3rem auto;
     padding: 2rem;
     text-align: center;
   }
   
   .popular-keywords h3 {
     font-size: 1.2rem;
     color: #1f2937;
     margin-bottom: 1.5rem;
     font-weight: 600;
   }
   
   .keywords-grid {
     display: flex;
     flex-wrap: wrap;
     gap: 0.75rem;
     justify-content: center;
     align-items: center;
   }
   
   .keyword-tag {
     background-color: #f8f9fa;
     color: #374151;
     padding: 0.5rem 1rem;
     border-radius: 20px;
     text-decoration: none;
     font-size: 0.9rem;
     font-weight: 500;
     transition: all 0.2s ease;
     border: 1px solid #e5e7eb;
   }
   
   .keyword-tag:hover {
     background-color: #1e3a8a;
     color: white;
     text-decoration: none;
     transform: translateY(-1px);
     box-shadow: 0 2px 4px rgba(0,0,0,0.1);
   }
   
   /* No Results State */
   .no-results {
     text-align: center;
     padding: 2.5rem;
     background-color: white;
     border-radius: 12px;
     border: 1px solid #e5e7eb;
     box-shadow: 0 2px 8px rgba(0,0,0,0.05);
     max-width: 600px;
     margin: 2rem auto;
   }
   
   .no-results-icon {
     font-size: 2.2rem;
     color: #9ca3af;
     margin-bottom: 1.25rem;
   }
   
   .no-results h3 {
     font-size: 1.3rem;
     color: #1f2937;
     margin-bottom: 0.75rem;
   }
   
   .no-results p {
     color: #6b7280;
     font-size: 1rem;
     margin-bottom: 1.5rem;
     line-height: 1.5;
   }
   
   .no-results-btn {
     background-color: #1e3a8a;
     color: white;
     border: none;
     padding: 0.6rem 1.5rem;
     border-radius: 6px;
     font-weight: 500;
     text-decoration: none;
     display: inline-block;
     transition: background-color 0.2s ease;
   }
   
   .no-results-btn:hover {
     background-color: #1e40af;
   }
   
   /* Responsive Adjustments */
   @media (max-width: 768px) {
     .search-result-card {
       flex-direction: column;
       height: auto;
       min-height: 240px;
     }
     
     .search-result-image {
       width: 100%;
       height: 275px;
     }
 
     .search-result-content {
       padding: 1rem;
     }
     
     .search-result-title {
       font-size: 1.1rem;
     }
     
     .no-results {
       padding: 2rem 1.5rem;
     }
     
     .loading-state {
       padding: 3rem 1.5rem;
     }
     
     .loading-state p {
       font-size: 1.1rem;
     }
     
     .popular-keywords {
       padding: 1.5rem;
       margin: 0 1rem 3rem 1rem;
     }
     
     .keywords-grid {
       gap: 0.5rem;
     }
     
     .keyword-tag {
       font-size: 0.85rem;
       padding: 0.4rem 0.8rem;
     }
   }
   
   @media (max-width: 576px) {
     .search-results-container {
       padding: 1.5rem 0.75rem;
     }
     
     .search-result-image {
       height: 255px;
     }
     
     .search-result-excerpt {
       font-size: 0.85rem;
     }
     
     .search-result-meta {
       font-size: 0.75rem;
     }
     
     .pagination a {
       width: 32px;
       height: 32px;
       font-size: 0.8rem;
     }
     
     .no-results {
       padding: 1.5rem;
     }
     
     .loading-state {
       padding: 2.5rem 1rem;
     }
     
     .loading-state p {
       font-size: 1rem;
     }
     
     .popular-keywords {
       padding: 1.25rem;
     }
     
     .popular-keywords h3 {
       font-size: 1.1rem;
     }
   }
 </style>
</head>
<body>
 <!-- Header -->
 <header class="mnthen-header">
   <div class="mnthen-header-container">
     <a href="/" class="mnthen-logo">
       <img src="https://www.mnthen.com/images/logo.webp" alt="Minnesota Then Logo" class="mnthen-logo-img" /> 
       Minnesota Then
     </a>
     
     <button class="mnthen-mobile-menu" aria-label="Toggle menu">
       <span></span>
       <span></span>
       <span></span>
     </button>
     
     <nav class="mnthen-nav">
       <ul class="mnthen-nav-list">
         <li class="mnthen-nav-item">
           <button class="mnthen-dropdown-btn">
             About
             <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
               <path d="M7 10l5 5 5-5z"/>
             </svg>
           </button>
           <div class="mnthen-dropdown-content">
             <a href="https://mnthen.com/mission.html">Mission</a>
             <a href="https://mnthen.com/ourteam.html">Our Team</a>
             <a href="https://mnthen.com/contact.html">Contact</a>
           </div>
         </li>
         <li class="mnthen-nav-item">
           <button class="mnthen-dropdown-btn">
             Multimedia
             <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
               <path d="M7 10l5 5 5-5z"/>
             </svg>
           </button>
           <div class="mnthen-dropdown-content">
             <a href="https://mnthen.com/blog.html">Blog</a>
             <a href="https://www.youtube.com/@mnthen" target="_blank">YouTube</a>
             <a href="https://mnthen.com/podcast.html">Podcast</a>
           </div>
         </li>
         <li class="mnthen-nav-item">
           <button class="mnthen-dropdown-btn">
             Resources
             <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
               <path d="M7 10l5 5 5-5z"/>
             </svg>
           </button>
           <div class="mnthen-dropdown-content">
             <a href="https://mnthen.com/faq.html">Help Center</a>
             <a href="https://mnthen.com/upcoming_events.html">Upcoming Events</a>
             <a href="https://mnthen.com/resources.html">Research Tools</a>
           </div>
         </li>
         <li class="mnthen-nav-item">
           <button class="mnthen-dropdown-btn">
             Interact
             <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
               <path d="M7 10l5 5 5-5z"/>
             </svg>
           </button>
           <div class="mnthen-dropdown-content">
             <a href="https://www.patreon.com/mnthen" target="_blank">Join Our Patreon</a>
             <a href="https://mnthen.com/markers.html">Share Your Story</a>
             <a href="https://mnthen.com/trivia.html">Play Trivia Games</a> 
           </div>
         </li>
         <li class="mnthen-nav-item">
           <a href="https://mnthen.com/donate.html" class="mnthen-donate-btn">Donate</a>
         </li>
       </ul>
     </nav>
   </div>
 </header>

 <!-- Floating Action Button -->
 <a href="https://www.mnthen.com/blog.html" class="mnthen-fab" aria-label="Return to Blog Front Page">
   <i class="fas fa-home"></i>
   <span class="mnthen-fab-tooltip">Back to Blog</span>
 </a>
  
 <!-- Search Bar -->
 <div class="search-bar" style="margin-top: 80px">
   <form action="results.html" method="get">
     <input type="search" name="query" placeholder="Search blog articles..." style="color: #86A1B5;">
     <button type="submit"><i class="fas fa-search" style="color: #86A1B5;"></i></button>
   </form>
 </div>

 <!-- Search Results Container -->
 <div class="search-results-container">
   <!-- Search Summary -->
   <div id="search-summary" class="search-summary mb-4"></div>

   <!-- Search Results -->
   <div id="search-results"></div>

   <!-- Loading State -->
   <div id="loading-state" class="loading-state" style="display: none;">
     <div class="loading-spinner"></div>
     <p>Searching articles...</p>
   </div>

   <!-- Popular Keywords Section 
   <div id="popular-keywords" class="popular-keywords" style="display: none;">
     <h3>Popular Search Topics</h3>
     <div class="keywords-grid">
       <a href="/results.html?query=Minneapolis" class="keyword-tag">Minneapolis</a>
       <a href="/results.html?query=Saint Paul" class="keyword-tag">Saint Paul</a>
       <a href="/results.html?query=railroad" class="keyword-tag">Railroad</a>
       <a href="/results.html?query=mill" class="keyword-tag">Mills</a>
       <a href="/results.html?query=river" class="keyword-tag">Rivers</a>
       <a href="/results.html?query=immigration" class="keyword-tag">Immigration</a>
       <a href="/results.html?query=lumber" class="keyword-tag">Lumber Industry</a>
       <a href="/results.html?query=mining" class="keyword-tag">Mining</a>
       <a href="/results.html?query=architecture" class="keyword-tag">Architecture</a>
       <a href="/results.html?query=native" class="keyword-tag">Native American</a>
       <a href="/results.html?query=agriculture" class="keyword-tag">Agriculture</a>
       <a href="/results.html?query=transportation" class="keyword-tag">Transportation</a>
     </div>
   </div>
-->
   <!-- No Results State -->
   <div id="no-results" class="no-results" style="display: none;">
     <div class="no-results-icon">
       <i class="fas fa-search"></i>
     </div>
     <h3>Start Your Search</h3>
     <p>Enter keywords in the search bar above to find articles about Minnesota history.</p>
     <a href="/results.html?query=all" class="no-results-btn">Browse All Articles</a>
   </div>

   <!-- Pagination -->
   <div id="pagination" class="pagination"></div>
 </div>

 <!-- Footer -->
 <footer class="footer bg-primary py-5">
   <div class="container">
     <div class="row g-4 mb-4">
       <div class="col-lg-3 col-md-6 pt-3">
         <h3 class="footer-brand mb-3">
           <span class="text-white">Minnesota</span>
           <span class="text-navy">Then</span>
         </h3>
       </div>
       <div class="col-lg-2 col-md-6">
         <h5 class="text-white mb-3">Who We Are</h5>
         <ul class="list-unstyled footer-links">
           <li><a href="/about.html">About Us</a></li>
           <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
         </ul>
       </div>
       <div class="col-lg-2 col-md-6">
         <h5 class="text-white mb-3">What We Do</h5>
         <ul class="list-unstyled footer-links">
           <li><a href="https://mnthen.com/blog.html">Blog</a></li>
           <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
           <li><a href="/upcoming_events.html">Upcoming Events</a></li>
         </ul>
       </div>
       <div class="col-lg-2 col-md-6">
         <h5 class="text-white mb-3">Resources</h5>
         <ul class="list-unstyled footer-links">
           <li><a href="https://www.mnthen.com/works.html">Learn the App</a></li>
           <li><a href="/faq.html">Help Center</a></li>
           <li><a href="/resources.html">Research Tools</a></li>
         </ul>
       </div>
       <div class="col-lg-3 col-md-6 pt-3">
         <p class="tagline">Every Step Tells a Story</p>
       </div>
     </div>
     <hr class="footer-divider">
     <div class="row align-items-center">
       <div class="col-md-4 text-center text-md-start">
         <small style="color: white;">&copy; 2025 Minnesota Then. All rights reserved</small>
       </div>
       <div class="col-md-8">
         <div class="social-icons text-center text-md-end">
           <span class="me-2" style="color: white;">Connect:</span>
           <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white">
             <i class="fab fa-facebook-f"></i>
           </a>
           <span class="mx-2 text-white">|</span>
           <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white">
             <i class="fa-brands fa-bluesky"></i>
           </a>
           <span class="mx-2 text-white">|</span>
           <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white">
             <i class="fab fa-linkedin-in"></i>
           </a>
         </div>
       </div>
     </div>
   </div>
 </footer>

 <!-- Scripts -->
 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
 <script src="/blog_articles.js?v=1.02"></script>

 <script>
   // Enhanced immediate footer hiding to prevent any flash
   (function() {
     const urlParams = new URLSearchParams(window.location.search);
     const query = urlParams.get('query');
     const noResults = document.getElementById('no-results');
     const loadingState = document.getElementById('loading-state');
     const popularKeywords = document.getElementById('popular-keywords');
     
     if (!query?.trim()) {
       // No query - show the "start your search" state and show footer
       if (noResults) {
         noResults.style.display = 'block';
       }
       if (loadingState) {
         loadingState.style.display = 'none';
       }
       document.body.classList.remove('search-loading');
       document.body.classList.add('show-footer');
       
       // Remove immediate footer hiding styles if they exist
       const immediateStyle = document.getElementById('immediate-footer-hide');
       if (immediateStyle) {
         immediateStyle.remove();
       }
     } else {
       // Has query - show ONLY loading spinner, hide everything else
       if (loadingState) {
         loadingState.style.display = 'block';
       }
       if (noResults) {
         noResults.style.display = 'none';
       }
       if (popularKeywords) {
         popularKeywords.style.display = 'none';
       }
       document.body.classList.add('search-loading');
       document.body.classList.add('has-results');
       document.body.classList.remove('show-footer');
     }
   })();

   // Search functionality
   function searchArticles(query) {
     const stopWords = ['and'];
     const keywords = query.toLowerCase().split(' ')
       .filter(kw => kw.trim() !== '' && !stopWords.includes(kw));

     return blogArticles.filter(article => {
       const articleText = (article.headline + ' ' + 
         article.blurb + ' ' + 
         article.keywords.join(' ')).toLowerCase();
       return keywords.some(keyword => articleText.includes(keyword));
     });
   }

   // Display search results with artificial delay
   function displaySearchResults() {
     const urlParams = new URLSearchParams(window.location.search);
     const query = urlParams.get('query');
     
     if (!query?.trim()) {
       const resultsContainer = document.getElementById('search-results');
       const noResults = document.getElementById('no-results');
       const popularKeywords = document.getElementById('popular-keywords');
       
       if (resultsContainer) {
         resultsContainer.innerHTML = '';
       }
       
       if (noResults) {
         noResults.querySelector('h3').textContent = 'Start Your Search';
         noResults.querySelector('p').textContent = 'Enter keywords in the search bar above to find articles about Minnesota history.';
         noResults.style.display = 'block';
       }
       
       if (popularKeywords) {
         popularKeywords.style.display = 'none';
       }
       
       document.body.classList.remove('has-results');
       document.body.classList.remove('search-loading');
       document.body.classList.add('show-footer');
       return;
     }

     // 2 second delay for search
     setTimeout(() => {
       performSearch(query);
     }, 2000);
   }

   function performSearch(query) {
     const urlParams = new URLSearchParams(window.location.search);
     const page = parseInt(urlParams.get('page')) || 0;
     const resultsPerPage = 10;
     const results = searchArticles(query);
     const resultsContainer = document.getElementById('search-results');
     const resultsSummary = document.getElementById('search-summary');
     const noResults = document.getElementById('no-results');
     const loadingState = document.getElementById('loading-state');
     const popularKeywords = document.getElementById('popular-keywords');

     // Hide loading state, keywords section, and show footer
     if (loadingState) {
       loadingState.style.display = 'none';
     }
     if (popularKeywords) {
       popularKeywords.style.display = 'none';
     }
     
     // Remove search loading state and show footer
     document.body.classList.remove('search-loading');
     document.body.classList.add('show-footer');
     
     // Remove immediate footer hiding styles
     const immediateStyle = document.getElementById('immediate-footer-hide');
     if (immediateStyle) {
       immediateStyle.remove();
     }

     if (resultsSummary) {
       resultsSummary.textContent = 
         `Search results for "${query}" (${results.length} ${results.length === 1 ? 'result' : 'results'})`;
     }

     if (results.length === 0) {
       if (resultsContainer) {
         resultsContainer.innerHTML = '';
       }
       if (noResults) {
         noResults.querySelector('h3').textContent = 'No Results Found';
         noResults.querySelector('p').textContent = 'We couldn\'t find any articles matching your search. Try different keywords or browse our popular topics below.';
         noResults.style.display = 'block';
       }
       // Show keywords again when no results found
       if (popularKeywords) {
         popularKeywords.style.display = 'block';
       }
       
       document.body.classList.add('has-results');
       return;
     } else {
       if (noResults) {
         noResults.style.display = 'none';
       }
       
       document.body.classList.add('has-results');
     }

     const startIndex = page * resultsPerPage;
     const paginatedResults = results.slice(startIndex, startIndex + resultsPerPage);

     if (resultsContainer) {
       resultsContainer.innerHTML = paginatedResults.map(article => `
         <div class="search-result-card">
           <div class="search-result-image">
             <img src="${article.image}" alt="${article.headline}" loading="lazy">
           </div>
           <div class="search-result-content">
             <h3 class="search-result-title">
               <a href="${article.url}">${article.headline}</a></h3>
             <p class="search-result-excerpt">${article.blurb}</p>
             <div class="search-result-meta">
              <span><i class="fas fa-user-edit"></i> ${article.author || "Staff Writer"}</span>
             <span><i class="far fa-calendar-alt"></i> ${article.date || "Date not available"}</span>
             </div>
           </div>
         </div>
       `).join('');
     }

     addPaginationControls(results.length, resultsPerPage, page, query);
   }

   // Add pagination controls
   function addPaginationControls(totalResults, resultsPerPage, currentPage, query) {
     const totalPages = Math.ceil(totalResults / resultsPerPage);
     const paginationElement = document.getElementById('pagination');
     
     if (paginationElement && totalPages > 1) {
       let paginationHtml = '';
       
       // Previous button
       if (currentPage > 0) {
         paginationHtml += `
           <a href="/results.html?query=${encodeURIComponent(query)}&page=${currentPage - 1}">
             <i class="fas fa-chevron-left"></i>
           </a>
         `;
       }
       
       // Page numbers
       for (let i = 0; i < totalPages; i++) {
         if (i === currentPage) {
           paginationHtml += `
             <a href="/results.html?query=${encodeURIComponent(query)}&page=${i}" class="active">${i + 1}</a>
           `;
         } else {
           // Show only adjacent pages and first/last for better mobile experience
           if (i === 0 || i === totalPages - 1 || Math.abs(i - currentPage) <= 2) {
             paginationHtml += `
               <a href="/results.html?query=${encodeURIComponent(query)}&page=${i}">${i + 1}</a>
             `;
           } else if (Math.abs(i - currentPage) === 3) {
             paginationHtml += `<span>...</span>`;
           }
         }
       }
       
       // Next button
       if (currentPage < totalPages - 1) {
         paginationHtml += `
           <a href="/results.html?query=${encodeURIComponent(query)}&page=${currentPage + 1}">
             <i class="fas fa-chevron-right"></i>
           </a>
         `;
       }
       
       paginationElement.innerHTML = paginationHtml;
     } else if (paginationElement) {
       paginationElement.innerHTML = '';
     }
   }

   // Initialize search results if on search page
   if (document.getElementById('search-results')) {
     displaySearchResults();
   }

   // Dropdown and Mobile Menu Functionality
  document.addEventListener('DOMContentLoaded', function () {
    const mobileMenuBtn = document.querySelector('.mnthen-mobile-menu');
    const mainNav = document.querySelector('.mnthen-nav');
    const dropdownBtns = document.querySelectorAll('.mnthen-dropdown-btn');

    // Toggle mobile menu
    if (mobileMenuBtn && mainNav) {
      mobileMenuBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        mainNav.classList.toggle('active');
      });
    }

    // Toggle dropdowns
    dropdownBtns.forEach(btn => {
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();
        dropdownBtns.forEach(otherBtn => {
          if (otherBtn !== btn) {
            otherBtn.classList.remove('active');
            otherBtn.nextElementSibling?.classList.remove('active');
          }
        });
        this.classList.toggle('active');
        const dropdownContent = this.nextElementSibling;
        if (dropdownContent) {
          dropdownContent.classList.toggle('active');
        }
      });
    });

    // Close dropdowns and mobile menu on outside click
    document.addEventListener('click', function (e) {
      if (!e.target.closest('.mnthen-nav') && !e.target.closest('.mnthen-mobile-menu')) {
        mainNav.classList.remove('active');
        dropdownBtns.forEach(btn => {
          btn.classList.remove('active');
          btn.nextElementSibling?.classList.remove('active');
        });
      }
    });

    // Close dropdowns on window resize (for mobile)
    window.addEventListener('resize', function () {
      if (window.innerWidth > 768) {
        mainNav.classList.remove('active');
        dropdownBtns.forEach(btn => {
          btn.classList.remove('active');
          btn.nextElementSibling?.classList.remove('active');
        });
      }
    });
  });
</script>
</body>
</html>
