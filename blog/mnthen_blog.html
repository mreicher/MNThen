<!DOCTYPE html>
<html lang="en">

      
<head>
      
      <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0M8KR45LDB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0M8KR45LDB');
</script>

  <meta charset="UTF-8">
    <link rel="shortcut icon" type="image/jpg" href="https://www.mnthen.com/images/mnthenfav.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

 <title>Minnesota Then | Blog</title>
 
 <style>

    .container {
      margin-top: 20px;
    }

    .card {
      margin-bottom: 10px;
      border: none;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                  border-radius: 8px;
    }

    .nothing-found-message {
      font-size: 18px;
      color: #6c757d;
      text-align: center;
      margin-top: 20px;
    }
    
    .navbar-brand {
      color: #fff;
      font-size: 22px;
      font-weight: bold;
    }
    
    .navbar-nav .nav-link {
      color: #fff;
      font-size: 16px;
    }
    
    .navbar-toggler-icon {
      background-color: #fff;
    }

    /* Updated styling for the search input and buttons */
    .input-group {
      display: flex;
    }

    #searchInput {
      flex: 1;
    }

    #searchButton,
    #clearButton {
      background: #007bff;
      border: none;
      color: #fff;
            margin-left: 10px;
            border-radius: 8px;
    }

    #clearButton {
      background: #6c757d;
      margin-left: 10px;
    }

    .instruction-box {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .recent-article-list {
      list-style-type: none;
      padding: 0;
    }

    .recent-article-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .recent-article-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .recent-article-title {
      margin: 0;
      font-size: 20px;
      color: #007bff;
    }

    .recent-article-summary {
      color: #333;
    }

    .recent-article-link {
      text-decoration: none;
    }

    .return-button {
      margin-top: 20px;
      text-align: center;
      margin-bottom: 20px;
                  border-radius: 8px;
    }
    
      .rounded {
    border-radius: 8px; /* Adjust the border radius value as needed */
  }

    /* Mobile optimization */
    @media (max-width: 576px) {
      .instruction-box {
        padding: 15px;
      }
      .recent-article-image {
        width: 50px;
        height: 50px;
      }
      .recent-article-title {
        font-size: 18px;
      }
    }

/* CSS for the article popup */
.popup {
  display: none;
  position: fixed;
  top: 2%; /* Start closer to the top */
  left: 50%;
  transform: translateX(-50%);
  width: 95%; /* 90% of the screen width */
  height: 97vh; /* 95% of the screen height */
  max-width: 600px;
  background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent background */
  z-index: 999;
  border: 1px solid #ddd;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}
.popup-content {
  padding: 10; /* Remove padding */
  position: relative;
  height: 100%;
  width: 100%;
}

.equal-height {
  height: 550px; /* Set the desired fixed height */
}


/* CSS for the "X" button */
.close-button {
  position: absolute;
  top: 5px;
  right: 5px; /* Adjust the right position for the upper right corner */
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  border: 2px solid blue;
  border-radius: 10%;
  padding: 2px;
  background-color: #fff;
  color: blue;
}

.card-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}


/* Style the iframe inside the popup */
#articleIframe {
  width: 95%;
  height: 100%;
  border: none; /* Remove iframe border */
}

@media (max-width: 768px) {
  .close-button {
    top: 28px; /* Center vertically */
    right: 10px; /* Center horizontally */
      font-size: 35px;
    transform: translate(50%, -50%); /* Center both horizontally and vertically */
  }
}


 </style>
</head>

<body>
  <!-- Header section -->
  <header>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary">
      <div class="container-fluid px-3 px-md-5">
        <a class="navbar-brand text-white" href="/index.html">Minnesota Then</a>
      </div>
    </nav>
  </header>
  
<div id="articlePopup" class="popup">
  <!-- Popup content goes here -->
  <div class="popup-content">
    <span class="close-button" onclick="closePopup()">&times;</span>
    <iframe id="articleIframe" src="" frameborder="0"></iframe>
  </div>
</div>

  <div class="container">
    <h4 class="text-center my-4">Blog Articles</h4>
    <!-- Updated search input and buttons -->
    <div class="input-group mb-3">
      <input type="text" class="form-control" id="searchInput" placeholder="Search for articles." onkeydown="handleSearch(event)">
      <div class="input-group-append">
        <button class="btn btn-lg btn-primary" type="button" id="searchButton" onclick="searchArticles()">Search</button>
        <button class="btn btn-lg btn-secondary" type="button" id="clearButton" onclick="clearSearch()">Clear</button>
      </div>
    </div>

    <div class="row" id="articleRow">
      <!-- Tour cards will be dynamically added here -->
    </div>

    <p id="nothingFoundMessage" class="nothing-found-message d-none">Nothing found ... please search again.</p>

    <div class="return-button">
      <a href="/index.html" class="btn btn-lg btn-primary">Return to Home</a>
    </div>
  </div>
  
  <script src="/articles.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    // Global variable to store articles
    let allTourCards = [];

    function handleSearch(event) {
      if (event.keyCode === 13) {
        searchArticles();
      }
    }

    function searchArticles() {
      let input = document.getElementById("searchInput").value.toLowerCase();
      let keywords = input.split(" ");
      clearTourCards();
      let matchingCards = allTourCards.filter(function(card) {
        return keywords.some(keyword => 
          card.title.toLowerCase().includes(keyword) || 
          card.summary.toLowerCase().includes(keyword) ||
          card.creator.toLowerCase().includes(keyword) ||
          card.keywords.some(kw => kw.toLowerCase().includes(keyword))
        );
      });
      if (matchingCards.length > 0) {
        matchingCards.forEach(displayTourCard);
        hideNothingFoundMessage();
      } else {
        showNothingFoundMessage();
      }
    }

function displayTourCard(card) {
  let articleRow = document.getElementById("articleRow");
  let col = document.createElement("div");
  col.className = "col-md-6 col-lg-4 card-container";

 let tourCard = document.createElement("div");
  tourCard.className = "card equal-height"; // Add a custom class equal-height

  let image = document.createElement("img");
  image.src = card.image;
  image.className = "card-img-top";
  tourCard.appendChild(image);

  let cardBody = document.createElement("div");
  cardBody.className = "card-body d-flex flex-column"; // Use d-flex and flex-column to control card body layout

  let title = document.createElement("h5");
  title.className = "card-title recent-article-title";
  title.textContent = card.title;
  cardBody.appendChild(title);

let summary = document.createElement("p");
summary.className = "card-text recent-article-summary";
summary.textContent = card.summary;
summary.style.marginTop = "5px"; // Add margin to the top of the summary
cardBody.appendChild(summary);

  // Add the "Read More" button
  let link = document.createElement("a");
  link.href = card.link;
  link.className = "btn btn-primary mt-auto"; // Use mt-auto to push content to the top
  link.textContent = "Read More";

  link.addEventListener('click', (event) => {
    event.preventDefault();
    openArticleInPopup(link.href);
  });

  cardBody.appendChild(link);

  tourCard.appendChild(cardBody);
  col.appendChild(tourCard);
  articleRow.appendChild(col);
}


    function clearTourCards() {
      document.getElementById("articleRow").innerHTML = "";
    }

    function showNothingFoundMessage() {
      document.getElementById("nothingFoundMessage").classList.remove("d-none");
    }

    function hideNothingFoundMessage() {
      document.getElementById("nothingFoundMessage").classList.add("d-none");
    }

    function clearSearch() {
      document.getElementById("searchInput").value = "";
      displayAllArticles();
      hideNothingFoundMessage();
    }
    
    // Function to open the popup
function openArticlePopup(articleContent) {
  const articlePopup = document.getElementById('articlePopup');
  const articlePopupContent = document.getElementById('articlePopupContent');
  articlePopupContent.innerHTML = articleContent;
  articlePopup.style.display = 'block';
}

// Function to close the popup
function closePopup() {
  const articlePopup = document.getElementById('articlePopup');
  articlePopup.style.display = 'none';
}

    function displayAllArticles() {
      clearTourCards();
      allTourCards.forEach(displayTourCard);
    }

    function init() {
      allTourCards = getTourCards();
      displayAllArticles();
    }

    window.onload = init;

  </script>
</body>

</html>
