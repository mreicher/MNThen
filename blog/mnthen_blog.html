<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0M8KR45LDB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0M8KR45LDB');
</script>
  
  <meta charset="UTF-8">
  <link rel="shortcut icon" type="image/jpg" href="https://www.mnthen.com/images/mnthenfav.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Minnesota Then | Blog - Explore Minnesota Then's captivating historical blog with articles on the state's rich history. Discover fascinating stories and images from the past. Start your journey today!">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://www.mnthen.com/css/footer.css">
      <link rel="stylesheet" href="https://www.mnthen.com/css/index.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
     <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Boulder&display=swap" />
  <title>Minnesota Then | Blog</title>
<style>
.container {
  margin-top: 20px;
}

.card {
  margin-bottom: 15px;
  border: none;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  border-radius: 8px;
}

.nothing-found-message {
  font-size: 18px;
  color: #6c757d;
  text-align: center;
  margin-top: 20px;
}

.navbar-brand {
  color: #fff;
  font-size: 22px;
  font-weight: bold;
}

.navbar-nav .nav-link {
  color: #fff;
  font-size: 16px;
}

.navbar-toggler-icon {
  background-color: #fff;
}

.input-group {
  display: flex;
}

#searchInput {
  flex: 1;
  font-size: 20px;
}

#searchButton,
#clearButton {
  background: #007bff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: background 0.3s ease;
  border: none;
  color: #fff;
  margin-left: 10px;
  border-radius: 8px;
}

#clearButton {
  background: #6c757d;
  margin-left: 10px;
}

#searchButton:hover {
  background: #0062cc;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

#clearButton:hover {
  background: #545b62;
}

.instruction-box {
  border: 1px solid #ccc;
  font-size: 20px;
  border-radius: 8px;
  padding: 20px;
  margin-top: 10px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.recent-article-list {
  list-style-type: none;
  padding: 0;
}

.recent-article-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.recent-article-image {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  margin-right: 10px;
}

.recent-article-title {
  margin: 0;
  font-size: 20px;
  color: #007bff;
}

.recent-article-summary {
  color: #333;
}

.recent-article-link {
  text-decoration: none;
}

.return-button {
  margin-top: 20px;
  text-align: center;
  margin-bottom: 20px;
  border-radius: 8px;
}

.rounded {
  border-radius: 8px;
}

/* Add this to your existing CSS */
#overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
  z-index: 1; /* Place it above the rest of the page */
}

/* Mobile optimization */
@media (max-width: 576px) {
  .instruction-box {
    padding: 15px;
  }
  .recent-article-image {
    width: 50px;
    height: 50px;
  }
  .recent-article-title {
    font-size: 18px;
  }
}

/* Style for the custom button */
.custom-button {
    font-size: 20px;
  background-color: #007bff; /* Button background color */
  color: #fff; /* Button text color */
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s;
}

.custom-button:hover {
  background-color: #0062cc; /* Change background color on hover */
  transform: scale(1.05); /* Add a slight hover effect */
}

/* Style for the button text */
.custom-button a {
  text-decoration: none;
  color: inherit;
}

/* CSS for the article popup */
.popup {
  display: none;
  position: fixed;
  top: 2%;
  left: 50%;
  transform: translateX(-50%);
  width: 95%;
  height: 97vh;
  max-width: 600px;
  background-color: rgba(255, 255, 255, 0.9);
  z-index: 998;
  border: 1px solid #ddd;
    box-shadow: 0 2px 8px rgba(0,0,0,0.26);
  border-radius: 10px; 
  animation: popupFadeIn 0.3s ease-out forwards;
}

.popup-content {
  padding: 10;
  position: relative;
  height: 100%;
  width: 100%;
}

.equal-height {
  height: 625px;
}

/* CSS for the "X" button */
.close-button {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  border: 2px solid blue;
  border-radius: 10%;
  padding: 2px;
  background-color: #fff;
  color: blue;
}

.card-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Style the iframe inside the popup */
#articleIframe {
  width: 95%;
  height: 100%;
  border: none;
}

@media (max-width: 768px) {
  .close-button {
    top: 28px;
    right: 10px;
    font-size: 35px;
    transform: translate(50%, -50%);
  }
}

/* Keep search bar full width, center buttons below */
@media (max-width: 768px) {
  .input-group {
    flex-direction: column;
  }

  .input-group-append {
    margin-top: 10px;
    align-self: center;
  }

  #searchInput {
    width: 100%;
  }
}

  </style>
</head>

<body>
  <!-- Header section -->
  <header>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary">
      <div class="container-fluid px-3 px-md-5">
        <a class="navbar-brand text-white" href="/index.html">Minnesota Then</a>
      </div>
    </nav>
  </header>
  
  <div id="articlePopup" class="popup">
    <div class="popup-content">
      <span class="close-button" onclick="closePopup()">&times;</span>
      <iframe id="articleIframe" src="" frameborder="0"></iframe>
    </div>
  </div>

  <div class="container">
    <h4 class="text-center my-4">Blog Articles</h4>
    <div class="input-group mb-2">
      <input type="text" class="form-control" id="searchInput" placeholder="Search for articles" onkeydown="handleSearch(event)">
      <div class="input-group-append">
        <button class="btn btn-lg btn-primary" type="button" id="searchButton" onclick="searchArticles()">Search</button>
        <button class="btn btn-lg btn-secondary" type="button" id="clearButton" onclick="clearSearch()">Clear</button>
      </div>
    </div>
    <div class="instruction-box mb-2">
      <h4>Instructions:</h4>
      <p>Search for articles by keyword or browse posts below. Click 'Read Now' to open the full article.</p>
    </div>
    <div class="row" id="articleRow">
      <!-- Tour cards will be dynamically added here -->
    </div>
    <p id="nothingFoundMessage" class="nothing-found-message d-none">Nothing found... please search again.</p>
    <div class="return-button">
      <a href="/index.html" class="btn btn-lg btn-primary">Return to Home</a>
    </div>
  </div>
  
  <div id="overlay" class="overlay"></div>
  
<script>
  // Generate a timestamp
  const timestamp = new Date().getTime();
  const scriptUrl = `/articles.js?ts=${timestamp}`;

  // Create a new script element
  const script = document.createElement('script');
  script.src = scriptUrl;

  // Append the script element to the document
  document.body.appendChild(script);
</script>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    // Global variable to store articles
    let allTourCards = [];

    function handleSearch(event) {
      if (event.keyCode === 13) {
        searchArticles();
      }
    }

    function searchArticles() {
      let input = document.getElementById("searchInput").value.toLowerCase();
      let keywords = input.split(" ");
      clearTourCards();
      let matchingCards = allTourCards.filter(function(card) {
        return keywords.some(keyword => 
          card.title.toLowerCase().includes(keyword) || 
          card.summary.toLowerCase().includes(keyword) ||
          card.creator.toLowerCase().includes(keyword) ||
          card.keywords.some(kw => kw.toLowerCase().includes(keyword))
        );
      });
      if (matchingCards.length > 0) {
        matchingCards.forEach(displayTourCard);
        hideNothingFoundMessage();
      } else {
        showNothingFoundMessage();
      }
    }

function displayTourCard(card) {
  let articleRow = document.getElementById("articleRow");
  let col = document.createElement("div");
  col.className = "col-md-6 col-lg-4 card-container";

  let tourCard = document.createElement("div");
  tourCard.className = "card custom-card equal-height"; // Add a custom class custom-card

  let image = document.createElement("img");
  image.src = card.image;
  image.className = "card-img-top custom-image";
  image.style.objectFit = "cover";
  tourCard.appendChild(image);

  let cardBody = document.createElement("div");
  cardBody.className = "card-body d-flex flex-column custom-card-body";

let title = document.createElement("h5");
title.className = "card-title custom-title text-center"; // Add text-center class to center the title
title.textContent = card.title;
cardBody.appendChild(title);

  let summary = document.createElement("p");
  summary.className = "card-text custom-summary";
  summary.textContent = card.summary;
  cardBody.appendChild(summary);

  // Customize the "Read Now" button
  let link = document.createElement("a");
  link.href = card.link;
  link.className = "btn btn-primary custom-button mt-auto"; // Use mt-auto to push the button to the bottom
  link.textContent = "Read Now";

  link.addEventListener('click', (event) => {
    event.preventDefault();
    openArticleInPopup(link.href);
  });

  cardBody.appendChild(link);

  tourCard.appendChild(cardBody);
  col.appendChild(tourCard);
  articleRow.appendChild(col);
}


    function clearTourCards() {
      document.getElementById("articleRow").innerHTML = "";
    }

    function showNothingFoundMessage() {
      document.getElementById("nothingFoundMessage").classList.remove("d-none");
    }

    function hideNothingFoundMessage() {
      document.getElementById("nothingFoundMessage").classList.add("d-none");
    }

    function clearSearch() {
      document.getElementById("searchInput").value = "";
      displayAllArticles();
      hideNothingFoundMessage();
    }

// Function to open the popup
function openArticlePopup(articleContent) {
  const articlePopup = document.getElementById('articlePopup');
  const overlay = document.getElementById('overlay');

  const articlePopupContent = document.getElementById('articlePopupContent');
  articlePopupContent.innerHTML = articleContent;
  articlePopup.style.display = 'block';
  overlay.style.display = 'block'; // Display the overlay
}

// Function to close the popup
function closePopup() {
  const articlePopup = document.getElementById('articlePopup');
  const overlay = document.getElementById('overlay');

  articlePopup.style.display = 'none';
  overlay.style.display = 'none'; // Hide the overlay
}

    function displayAllArticles() {
      clearTourCards();
      allTourCards.forEach(displayTourCard);
    }

    function init() {
      allTourCards = getTourCards();
      displayAllArticles();
    }

    window.onload = init;

  </script>
</body>

</html>
