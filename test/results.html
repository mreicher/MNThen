<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0M8KR45LDB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-0M8KR45LDB');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minnesota Then | Trivia</title>
  <link rel="shortcut icon" type="image/x-icon" href="https://www.mnthen.com/images/mnthenfav.ico">

  <!-- External Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="https://www.mnthen.com/css/dropdown.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_trivia.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_article_fab.css"> 
  
  <style>
    /* Prevent FOUC */
    body:not(.loaded) {
      visibility: hidden;
      opacity: 0;
    }
    body.loaded {
      visibility: visible;
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    /* Additional Custom Styles */
    :root {
      --primary-color: #0e3b7d;
      --secondary-color: #d4a017;
      --accent-color: #e63946;
      --light-bg: #f8f9fa;
      --dark-bg: #212529;
      --text-color: #333;
      --light-text: #f8f9fa;
    }
    
    body {
      overflow-x: hidden;
    }
    
    .container-fluid, .container {
      width: 100%;
      padding-right: 15px;
      padding-left: 15px;
      margin-right: auto;
      margin-left: auto;
    }
    
    .section-title {
      color: var(--primary-color);
      font-weight: 700;
      margin-bottom: 1.5rem;
      position: relative;
      display: inline-block;
    }
    
    .section-subtitle {
      color: #6c757d;
      max-width: 700px;
      margin: 0 auto 2rem;
    }
    
    /* Utility Classes */
    .trivia-utility-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .trivia-utility-links {
      display: flex;
      gap: 1rem;
    }
    
    .trivia-search {
      max-width: 400px;
      width: 100%;
      position: relative;
    }
    
    .trivia-search input {
      padding-left: 2.5rem;
      border-radius: 30px;
    }
    
    .trivia-search i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #6c757d;
    }
    
    .trivia-link-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 30px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
    }
    
    .trivia-link-btn:hover {
      background: #0a2e62;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }
    
    /* Latest Games Section */
    .latest-games-section {
      padding: 4rem 0;
    }
    
    .latest-games-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
    }
    
    .latest-game-card {
      flex: 0 0 calc(33.333% - 1.5rem);
      max-width: calc(33.333% - 1.5rem);
      min-width: 300px;
      border: none;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
      background: white;
      display: flex;
      flex-direction: column;
    }
    
    .latest-game-img {
      width: 100%;
      height: 240px;
      object-fit: cover;
    }
    
    .latest-game-body {
      padding: 1.5rem;
      flex: 1;
    }
    
    .latest-game-title {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.75rem;
    }
    
    .latest-game-text {
      color: #555;
      margin-bottom: 1.25rem;
      line-height: 1.5;
    }
    
    .latest-game-footer {
      padding: 0 1.5rem 1.5rem;
      margin-top: auto;
    }
    
    /* All Games Grid Section */
    .all-games-section {
      padding: 4rem 0;
      background-color: var(--light-bg);
    }
    
    .all-games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1.5rem;
    }
    
    .game-thumbnail {
      border: none;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      background: white;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .game-thumbnail-img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    
    .game-thumbnail-body {
      padding: 1rem;
      flex: 1;
    }
    
    .game-thumbnail-title {
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .game-thumbnail-footer {
      padding: 0 1rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .game-thumbnail-play {
      font-size: 0.8rem;
      padding: 0.25rem 0.75rem;
    }
    
    /* Search Results Section */
    .search-results-section {
      padding: 2rem 0;
      display: none;
    }
    
    .search-results-title {
      color: var(--primary-color);
      margin-bottom: 1.5rem;
    }
    
    /* How It Works Section */
    .how-it-works-section {
      padding: 4rem 0;
    }
    
    .step-card {
      background-color: white;
      border-radius: 10px;
      padding: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.025);
      height: 100%;
      margin-bottom: 1.5rem;
    }
    
    .step-icon {
      width: 70px;
      height: 70px;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
    }
    
    .step-icon-1 {
      background-color: #0e3b7d; /* Primary blue */
    }
    
    .step-icon-2 {
      background-color: #e63946; /* Red accent */
    }
    
    .step-icon-3 {
      background-color: #d4a017; /* Gold secondary */
    }
    
    .step-icon-4 {
      background-color: #2a9d8f; /* Teal */
    }
    
    .step-title {
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--primary-color);
      font-size: 1.25rem;
    }
    
    .step-description {
      color: #555;
      font-size: 1rem;
      line-height: 1.6;
    }
    
    /* FAQ Section */
    .faq-section {
      padding: 4rem 0;
      background-color: var(--light-bg);
    }
    
    .faq-item {
      margin-bottom: 1.5rem;
      border: none;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }
    
    .faq-header {
      background-color: white;
      padding: 1.25rem;
      cursor: pointer;
      border: none;
      text-align: left;
      width: 100%;
      font-weight: 600;
      color: var(--primary-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .faq-header:hover {
      background-color: #f8f9fa;
    }
    
    .faq-body {
      padding: 0 1.25rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .faq-body.active {
      max-height: 500px;
      padding: 1.25rem;
    }
    
    .faq-icon {
      transition: transform 0.3s ease;
    }
    
    .faq-header.active .faq-icon {
      transform: rotate(180deg);
    }
    
    /* Loading animation */
    .loading-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(14, 59, 125, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive adjustments */
    @media (max-width: 991.98px) {
      .latest-game-card {
        flex: 0 0 calc(50% - 1.5rem);
        max-width: calc(50% - 1.5rem);
      }
      
      .all-games-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
    }
    
    @media (max-width: 767.98px) {
      .trivia-utility-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .trivia-utility-links {
        justify-content: center;
      }
      
      .trivia-search {
        max-width: 100%;
      }
      
      .latest-game-card {
        flex: 0 0 100%;
        max-width: 100%;
      }
      
      .all-games-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
    }
    
    @media (max-width: 575.98px) {
      .step-card {
        padding: 1.5rem;
      }
      
      .step-icon {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
      }
    }
  </style>
</head>
        
<body>
  <!-- Header -->
<header class="mnthen-header">
 <div class="mnthen-header-container">
 <a href="/" class="mnthen-logo" style="color: black;">
 <img src="https://www.mnthen.com/images/logo.webp" alt="Minnesota Then Logo" class="mnthen-logo-img"/> 
 Minnesota Then
 </a>

<button class="mnthen-mobile-menu" aria-label="Toggle menu">
 <span></span>
 <span></span>
 <span></span>
 </button>

<nav class="mnthen-nav">
 <ul class="mnthen-nav-list">
 <li class="mnthen-nav-item">
 <button class="mnthen-dropdown-btn">
 About
 <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
 <path d="M7 10l5 5 5-5z"/>
 </svg>
 </button>
 <div class="mnthen-dropdown-content">
 <a href="https://mnthen.com/mission.html">Mission</a>
 <a href="https://mnthen.com/ourteam.html">Our Team</a>
 <a href="https://mnthen.com/contact">Contact</a>
 </div>
 </li>
 <li class="mnthen-nav-item">
 <button class="mnthen-dropdown-btn">
 Multimedia
 <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
 <path d="M7 10l5 5 5-5z"/>
 </svg>
 </button>
 <div class="mnthen-dropdown-content">
 <a href="https://mnthen.com/blog.html">Blog</a>
 <a href="https://www.youtube.com/@mnthen" target="_blank" rel="noreferrer">YouTube</a>
 <a href="https://mnthen.com/podcast.html">Podcast</a>
 </div>
 </li>
 <li class="mnthen-nav-item">
 <button class="mnthen-dropdown-btn">
 Resources
 <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
 <path d="M7 10l5 5 5-5z"/>
 </svg>
 </button>
 <div class="mnthen-dropdown-content">
 <a href="https://mnthen.com/faq.html">Help Center</a>
 <a href="https://mnthen.com/upcoming_events.html">Upcoming Events</a>
 <a href="https://mnthen.com/resources.html">Research Tools</a>
 </div>
 </li>
 <li class="mnthen-nav-item">
 <button class="mnthen-dropdown-btn">
 Interact
 <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
 <path d="M7 10l5 5 5-5z"/>
 </svg>
 </button>
 <div class="mnthen-dropdown-content">
 <a href="https://www.patreon.com/mnthen" target="_blank" rel="noreferrer">Join Our Patreon</a>
 <a href="https://mnthen.com/markers.html">Share Your Story</a>
 <a href="https://mnthen.com/trivia.html">Play Trivia Games</a> 
 </div>
 </li>
 <li class="mnthen-nav-item">
 <a href="https://mnthen.com/donate.html" class="mnthen-donate-btn">Donate</a>
 </li>
 </ul>
 </nav>
 
 <!-- Sign In Button -->
 <a href="/login" class="mnthen-signin-btn" aria-label="Sign In">
 <i class="fas fa-user"></i>
 </a>
 </div>
</header>

  <!-- Hero Section -->
  <section class="hero-section" aria-labelledby="hero-title" style="margin-top: 80px">
    <div class="hero-content">
      <h1 id="hero-title" class="hero-title">Minnesota History Trivia</h1>
      <p class="hero-subtitle">Test your knowledge of Minnesota's rich past.</p>
    </div>
  </section>

  <main>
    <!-- Utility Bar with Search and Links -->
    <section class="container py-4">
      <div class="trivia-utility-bar">
        <div class="trivia-search">
          <i class="fas fa-search"></i>
          <input type="text" class="form-control" placeholder="Search trivia games..." id="triviaSearch">
        </div>
        <div class="trivia-utility-links">
          <button class="trivia-link-btn" onclick="openLeaderboard()">
            <i class="fas fa-trophy"></i> Leaderboard
          </button>
        </div>
      </div>
    </section>

    <!-- Search Results Section (Hidden by default) -->
    <section class="search-results-section container" id="searchResultsSection">
      <h2 class="search-results-title">Search Results</h2>
      <div class="latest-games-row" id="searchResultsContainer">
        <!-- Search results will be inserted here -->
      </div>
    </section>

    <!-- Latest Games Section -->
    <section class="latest-games-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-4">
            <h2 class="section-title">Latest Games</h2>
            <p class="section-subtitle">Our newest Minnesota history trivia challenges</p>
          </div>
        </div>
        <div class="latest-games-row" id="latest-games-container">
          <!-- Loading spinner will be replaced by latest games -->
          <div class="loading-container">
            <div class="loading-spinner"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- All Games Grid Section -->
    <section class="all-games-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-4">
            <h2 class="section-title">All Trivia Games</h2>
            <p class="section-subtitle">Browse our complete collection of Minnesota history quizzes</p>
          </div>
        </div>
        <div class="all-games-grid" id="all-games-container">
          <!-- Loading spinner will be replaced by game thumbnails -->
          <div class="loading-container">
            <div class="loading-spinner"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="section-title">How It Works</h2>
            <p class="section-subtitle">Our trivia games are easy to play and fun to master</p>
          </div>
        </div>
        <div class="row">
          <!-- Step 1 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon step-icon-1 mx-auto">
                <i class="fas fa-mouse-pointer"></i>
              </div>
              <h4 class="step-title">Choose a Quiz</h4>
              <p class="step-description">Browse our collection and select a trivia quiz that interests you. Each quiz focuses on a different aspect of Minnesota's rich history.</p>
            </div>
          </div>
          
          <!-- Step 2 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon step-icon-2 mx-auto">
                <i class="fas fa-question-circle"></i>
              </div>
              <h4 class="step-title">Answer Questions</h4>
              <p class="step-description">Read each question carefully and select your answer from the multiple-choice options provided. Test your knowledge on various historical topics.</p>
            </div>
          </div>
          
          <!-- Step 3 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon step-icon-3 mx-auto">
                <i class="fas fa-lightbulb"></i>
              </div>
              <h4 class="step-title">Learn Facts</h4>
              <p class="step-description">Discover interesting facts about Minnesota's history with each question. Even if you answer incorrectly, you'll learn something new about our state's fascinating past.</p>
            </div>
          </div>
          
          <!-- Step 4 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon step-icon-4 mx-auto">
                <i class="fas fa-trophy"></i>
              </div>
              <h4 class="step-title">See Your Score</h4>
              <p class="step-description">Get your results and see how well you know Minnesota history! Share your score with friends and challenge them to beat it.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <p class="section-subtitle">Get answers to common questions about our trivia games</p>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <!-- FAQ Item 1 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>How are the trivia questions created?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Our trivia questions are carefully researched and created by Minnesota history experts. We use primary sources, historical documents, and verified information to ensure accuracy in all our quizzes.</p>
              </div>
            </div>
            
            <!-- FAQ Item 2 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Can I suggest a topic for a new trivia quiz?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>We welcome suggestions from our community. You can submit your ideas through our contact form, and our team will review them for potential future quizzes.</p>
              </div>
            </div>
            
            <!-- FAQ Item 3 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Are the quizzes suitable for classroom use?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Yes! Many educators use our trivia quizzes as supplementary learning materials. They're designed to be educational and engaging, making them perfect for classroom activities or homework assignments.</p>
              </div>
            </div>
            
            <!-- FAQ Item 4 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>How many questions are in each game?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Each game offers ten multiple-choice questions that span various topics and time periods.</p>
              </div>
            </div>
            
            <!-- FAQ Item 5 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Can I share my quiz results on social media?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Yes! At the end of each quiz, you'll have the option to share your results on various social media platforms. Show off your Minnesota history knowledge to friends and family!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

<!-- Footer -->
<footer class="footer bg-primary py-5"> 
<div class="container">
  <div class="row g-4 mb-4">
      <div class="col-lg-3 col-md-6 pt-3">
          <h3 class="footer-brand mb-3">
              <span class="text-white">Minnesota</span>
              <span class="text-navy">Then</span>
          </h3>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Who We Are</h5>
          <ul class="list-unstyled footer-links">
              <li><a href="/about.html">About Us</a></li>
              <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
          </ul>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">What We Do</h5>
          <ul class="list-unstyled footer-links">
              <li><a href="https://mnthen.com/blog.html">Blog</a></li>
              <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
              <li><a href="/upcoming_events.html">Upcoming Events</a></li>
          </ul>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Resources</h5>
          <ul class="list-unstyled footer-links">
              <a href="https://github.com/mreicher/MNThen/" target="_blank" rel="noopener noreferrer">GitHub</a>
              <li><a href="/faq.html">Help Center</a></li>
              <li><a href="/resources.html">Research Tools</a></li>
          </ul>
      </div>
      <div class="col-lg-3 col-md-6 pt-3">
          <p class="tagline">Every Step Tells a Story</p>
      </div>
  </div>
  <hr class="footer-divider">
  <div class="row align-items-center">
<div class="col-md-4 text-center text-md-start">
<small style="color: white;">&copy; 2025 Minnesota Then. All rights reserved</small>
</div>
       <div class="col-md-8">
           <div class="social-icons text-center text-md-end">
               <span class="me-2" style="color: white;">Connect:</span>
               <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fab fa-facebook-f"></i>
               </a>
               <span class="mx-2 text-white">|</span>
               <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fa-brands fa-bluesky"></i>
               </a>
               <span class="mx-2 text-white">|</span>
               <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fab fa-linkedin-in"></i>
               </a>
           </div>
       </div>
  </div>
</div>
</footer>

  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Quiz data - using absolute URLs for images
    const quizzes = [
      {
        id: 'gangster-history',
        title: 'Gangster History',
        description: 'Step back in time to the Prohibition era and test your knowledge about Minnesota\'s notorious Depression Era gangster menace. From John Dillinger to Ma Barker\'s gang, discover the criminal underworld that once thrived in the Twin Cities.',
        image: 'https://www.mnthen.com/images/gangster_1.jpg',
        questions: 10,
        url: 'trivia_gng.html',
        featured: true,
        players: 2500,
        date: '2024-05-15'
      },
      {
        id: 'minnesota-history',
        title: 'Minnesota History',
        description: 'Test your knowledge of Minnesota\'s rich history from its founding to modern times. This comprehensive quiz covers important events, notable figures, and significant developments throughout the state\'s history.',
        image: 'https://www.mnthen.com/images/trivia/mn_game_intro.jpg',
        questions: 10,
        url: 'trivia_game.html',
        featured: false,
        date: '2024-05-10'
      },
      {
        id: 'st-paul-history',
        title: 'St. Paul History',
        description: 'Show that you know the history of Minnesota\'s capital city through the ages. From its early days as a trading post to its development as a major urban center, this quiz explores the rich heritage of St. Paul and its significance to Minnesota.',
        image: 'https://www.mnthen.com/images/stp_1.jpg',
        questions: 10,
        url: 'stp_trivia.html',
        featured: false,
        date: '2024-05-05'
      },
    ];

    // Mark body as loaded when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      document.body.classList.add('loaded');
      
      // Initialize all functionality
      initializeNavigation();
      initializeFAQ();
      loadTriviaGames();
      initializeSearch();
    });

    function initializeNavigation() {
      const mobileMenuBtn = document.querySelector('.mnthen-mobile-menu');
      const mainNav = document.querySelector('.mnthen-nav');
      const dropdownBtns = document.querySelectorAll('.mnthen-dropdown-btn');

      // Mobile menu toggle
      if (mobileMenuBtn && mainNav) {
        mobileMenuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          this.classList.toggle('active');
          mainNav.classList.toggle('active');
        });
      }

      // Dropdown functionality
      if (dropdownBtns) {
        dropdownBtns.forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Close other dropdowns
            document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
              if (dropdown !== this.nextElementSibling) {
                dropdown.classList.remove('active');
              }
            });
            
            // Toggle this dropdown
            const dropdownContent = this.nextElementSibling;
            if (dropdownContent) {
              dropdownContent.classList.toggle('active');
            }
          });
        });
      }

      // Close dropdowns when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.mnthen-nav')) {
          // Close mobile menu
          if (mobileMenuBtn) mobileMenuBtn.classList.remove('active');
          if (mainNav) mainNav.classList.remove('active');
          
          // Close all dropdowns
          document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
            dropdown.classList.remove('active');
          });
        }
      });

      // Close dropdowns on window resize (desktop)
      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
          if (mobileMenuBtn) mobileMenuBtn.classList.remove('active');
          if (mainNav) mainNav.classList.remove('active');
          document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
            dropdown.classList.remove('active');
          });
        }
      });
    }

    function initializeFAQ() {
      const faqHeaders = document.querySelectorAll('.faq-header');
      
      faqHeaders.forEach(header => {
        header.addEventListener('click', function() {
          this.classList.toggle('active');
          const faqBody = this.nextElementSibling;
          faqBody.classList.toggle('active');
        });
      });
    }

    function initializeSearch() {
      const searchInput = document.getElementById('triviaSearch');
      const searchResultsSection = document.getElementById('searchResultsSection');
      const searchResultsContainer = document.getElementById('searchResultsContainer');
      
      if (searchInput && searchResultsSection && searchResultsContainer) {
        searchInput.addEventListener('input', function() {
          const searchTerm = this.value.trim().toLowerCase();
          
          if (searchTerm.length === 0) {
            searchResultsSection.style.display = 'none';
            return;
          }
          
          // Filter games based on search term
          const filteredGames = quizzes.filter(quiz => 
            quiz.title.toLowerCase().includes(searchTerm) || 
            quiz.description.toLowerCase().includes(searchTerm))
            .sort((a, b) => new Date(b.date) - new Date(a.date));
          
          // Display search results
          displaySearchResults(filteredGames);
        });
      }
    }
    
    function displaySearchResults(games) {
      const searchResultsSection = document.getElementById('searchResultsSection');
      const searchResultsContainer = document.getElementById('searchResultsContainer');
      
      if (!searchResultsSection || !searchResultsContainer) return;
      
      if (games.length === 0) {
        searchResultsContainer.innerHTML = '<p class="text-center w-100">No games found matching your search.</p>';
        searchResultsSection.style.display = 'block';
        return;
      }
      
      // Clear previous results
      searchResultsContainer.innerHTML = '';
      
      // Add matching games as latest game cards
      games.forEach(game => {
        const gameHTML = createLatestGameHTML(game);
        searchResultsContainer.innerHTML += gameHTML;
      });
      
      // Show the search results section
      searchResultsSection.style.display = 'block';
    }

    function loadTriviaGames() {
      // Get the three most recent games (sorted by date)
      const latestGames = [...quizzes]
        .sort((a, b) => new Date(b.date) - new Date(a.date))
        .slice(0, 3);
      
      // Render latest games (3 large cards)
      renderLatestGames(latestGames);
      
      // Render all games as thumbnails (sorted by title)
      renderAllGames([...quizzes].sort((a, b) => a.title.localeCompare(b.title)));
    }

    function createLatestGameHTML(game) {
      return `
        <div class="latest-game-card">
          <img src="${game.image}" class="latest-game-img" alt="${game.title}">
          <div class="latest-game-body">
            <h3 class="latest-game-title">${game.title}</h3>
            <p class="latest-game-text">${game.description}</p>
          </div>
          <div class="latest-game-footer">
            <a href="${game.url}" class="btn btn-primary w-100">Play Now</a>
          </div>
        </div>
      `;
    }

    function renderLatestGames(games) {
      const container = document.getElementById('latest-games-container');
      if (!container) return;
      
      if (games.length === 0) {
        container.innerHTML = '<p class="text-center w-100">No latest games available.</p>';
        return;
      }
      
      container.innerHTML = ''; // Clear loading spinner
      
      games.forEach(game => {
        const gameHTML = createLatestGameHTML(game);
        container.innerHTML += gameHTML;
      });
    }

    function createThumbnailHTML(game) {
      return `
        <div class="game-thumbnail">
          <img src="${game.image}" class="game-thumbnail-img" alt="${game.title}">
          <div class="game-thumbnail-body">
            <h5 class="game-thumbnail-title">${game.title}</h5>
          </div>
          <div class="game-thumbnail-footer">
            <small class="text-muted">${game.questions} Qs</small>
            <a href="${game.url}" class="btn btn-primary btn-sm game-thumbnail-play">Play</a>
          </div>
        </div>
      `;
    }

    function renderAllGames(games) {
      const container = document.getElementById('all-games-container');
      if (!container) return;
      
      if (games.length === 0) {
        container.innerHTML = '<p class="text-center w-100">No games available.</p>';
        return;
      }
      
      container.innerHTML = ''; // Clear loading spinner
      
      games.forEach(game => {
        const gameHTML = createThumbnailHTML(game);
        container.innerHTML += gameHTML;
      });
    }

    function openLeaderboard() {
      openPopup('/leaderboard.html', 'Leaderboard');
    }

    function openPopup(url, title) {
      const width = 800;
      const height = 600;
      const left = (window.innerWidth - width) / 2;
      const top = (window.innerHeight - height) / 2;
      
      const features = `width=${width},height=${height},left=${left},top=${top},resizable=yes,scrollbars=yes,location=no,toolbar=no,status=no`;
      
      const popup = window.open(url, title, features);
      
      if (popup) {
        popup.focus();
        return true;
      } else {
        alert('Please allow popups for this site to view the content.');
        return false;
      }
    }
  </script>
</body>
</html>
