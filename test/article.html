<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Meta Tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- Primary Meta Tags -->
  <title>Washburn "A" Mill Explosion (1878) | Minnesota's Historic Disaster | Minnesota Then</title>
  <meta name="title" content="Washburn 'A' Mill Explosion (1878) | Minnesota's Historic Disaster | Minnesota Then">
  <meta name="description" content="On May 2, 1878, the Washburn 'A' Mill explosion in Minneapolis killed 18 people and changed industrial safety standards forever. Learn about this pivotal moment in Minnesota history.">
  <meta name="keywords" content="Washburn Mill explosion, Minneapolis history, Minnesota disasters, flour mill explosion, industrial accidents, 19th century Minnesota, Cadwallader Washburn, milling industry history, St. Anthony Falls">
  <meta name="author" content="Minnesota Then">
  
  <!-- Open Graph / Facebook Meta Tags -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://www.mnthen.com/blog/event/washburn_mill.html">
  <meta property="og:title" content="Washburn 'A' Mill Explosion (1878) | Minnesota's Historic Disaster | Minnesota Then">
  <meta property="og:description" content="On May 2, 1878, the Washburn 'A' Mill explosion in Minneapolis killed 18 people and changed industrial safety standards forever. Learn about this pivotal moment in Minnesota history.">
  <meta property="og:image" content="https://www.mnthen.com/images/mill-explosion.webp">
  <meta property="og:image:alt" content="Historic image of the Washburn Mill explosion aftermath">
  <meta property="og:site_name" content="Minnesota Then">
  
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://www.mnthen.com/blog/event/washburn_mill.html">
  <meta name="twitter:title" content="Washburn 'A' Mill Explosion (1878) | Minnesota's Historic Disaster | Minnesota Then">
  <meta name="twitter:description" content="On May 2, 1878, the Washburn 'A' Mill explosion in Minneapolis killed 18 people and changed industrial safety standards forever. Learn about this pivotal moment in Minnesota history.">
  <meta name="twitter:image" content="https://www.mnthen.com/images/mill-explosion.webp">
  <meta name="twitter:image:alt" content="Historic image of the Washburn Mill explosion aftermath">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.mnthen.com/blog/event/washburn_mill.html">
  
  <!-- Favicon -->
  <link rel="shortcut icon" type="image/jpg" href="https://www.mnthen.com/images/mnthenfav.ico">
  
  <!-- Preload Critical Resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style">
  <link rel="preload" href="https://www.mnthen.com/images/mill-explosion.webp" as="image">
  
  <!-- Preconnect for external resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_article.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_article_fab.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_article_search.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/dropdown.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">
  
  <!-- Enhanced Custom Styles -->
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #e74c3c;
      --accent-color: #f39c12;
      --text-dark: #2c3e50;
      --text-light: #7f8c8d;
      --bg-light: #f8f9fa;
      --bg-white: #ffffff;
      --shadow-light: 0 2px 10px rgba(0,0,0,0.1);
      --shadow-medium: 0 4px 20px rgba(0,0,0,0.15);
      --shadow-heavy: 0 8px 30px rgba(0,0,0,0.2);
      --border-radius: 12px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Source Sans Pro', system-ui, -apple-system, sans-serif;
      line-height: 1.7;
      color: var(--text-dark);
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }

    /* Enhanced Typography */
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Playfair Display', serif;
      font-weight: 600;
      line-height: 1.3;
      margin-bottom: 1rem;
    }

    .display-4 {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 2rem;
    }

    /* Enhanced Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Hero Section Enhancement */
    .article-header {
      background: linear-gradient(135deg, rgba(44, 62, 80, 0.95), rgba(231, 76, 60, 0.95)),
                  url('https://www.mnthen.com/images/mill-explosion.webp') center/cover;
      color: white;
      padding: 4rem 2rem;
      margin: -2rem -1rem 3rem -1rem;
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      position: relative;
      overflow: hidden;
    }

    .article-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(44, 62, 80, 0.8), rgba(231, 76, 60, 0.6));
      z-index: 1;
    }

    .article-header > * {
      position: relative;
      z-index: 2;
    }

    .article-title i {
      color: var(--accent-color);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .title-underline {
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
      border-radius: 2px;
      animation: expandWidth 1s ease-out;
    }

    @keyframes expandWidth {
      from { width: 0; }
      to { width: 100px; }
    }

    .post-meta {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 1rem;
      border-radius: var(--border-radius);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .post-meta a {
      color: var(--accent-color);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
    }

    .post-meta a:hover {
      color: white;
      text-shadow: 0 0 10px var(--accent-color);
    }

    /* Enhanced Main Content */
    .blog-post {
      background: var(--bg-white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-medium);
      padding: 3rem;
      margin-bottom: 2rem;
      position: relative;
      overflow: hidden;
    }

    .blog-post::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
    }

    /* Enhanced Image Card */
    .image-showcase {
      position: relative;
      margin: 2rem 0;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-heavy);
      transition: var(--transition);
    }

    .image-showcase:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }

    .image-showcase img {
      width: 100%;
      height: 400px;
      object-fit: cover;
      transition: var(--transition);
    }

    .image-showcase:hover img {
      transform: scale(1.05);
    }

    .image-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      color: white;
      padding: 2rem 1.5rem 1rem;
      font-size: 0.9rem;
    }

    .image-caption strong {
      color: var(--accent-color);
      font-size: 1.1rem;
      display: block;
      margin-bottom: 0.5rem;
    }

    /* Enhanced Lead Paragraph */
    .lead {
      font-size: 1.25rem;
      font-weight: 400;
      line-height: 1.8;
      color: var(--text-dark);
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 2rem;
      border-radius: var(--border-radius);
      border-left: 5px solid var(--accent-color);
      margin: 2rem 0;
      position: relative;
    }

    .lead::before {
      content: '"';
      font-size: 4rem;
      color: var(--accent-color);
      position: absolute;
      top: -10px;
      left: 10px;
      font-family: 'Playfair Display', serif;
      opacity: 0.3;
    }

    /* Enhanced Blog Content */
    .blog-content p {
      font-size: 1.1rem;
      line-height: 1.8;
      margin-bottom: 1.5rem;
      text-align: justify;
    }

    .blog-content p:first-letter {
      font-size: 3.5rem;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      float: left;
      line-height: 1;
      margin: 0.1rem 0.5rem 0 0;
      color: var(--secondary-color);
    }

    /* Enhanced Sidebar */
    .sidebar-card {
      background: var(--bg-white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-light);
      margin-bottom: 2rem;
      overflow: hidden;
      transition: var(--transition);
      border: 1px solid rgba(0,0,0,0.05);
    }

    .sidebar-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-medium);
    }

    .sidebar-card .card-header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 1.5rem;
      border: none;
      position: relative;
    }

    .sidebar-card .card-header::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 10px solid var(--secondary-color);
    }

    .sidebar-card .card-header h4 {
      margin: 0;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .sidebar-card .list-group-item {
      padding: 1rem 1.5rem;
      border: none;
      border-bottom: 1px solid rgba(0,0,0,0.05);
      transition: var(--transition);
    }

    .sidebar-card .list-group-item:hover {
      background: var(--bg-light);
      padding-left: 2rem;
    }

    .sidebar-card .list-group-item:last-child {
      border-bottom: none;
    }

    .sidebar-card .list-group-item strong {
      color: var(--primary-color);
      font-weight: 600;
    }

    /* Enhanced Timeline */
    .timeline-item {
      position: relative;
      padding-left: 2rem;
      margin-bottom: 1rem;
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.5rem;
      width: 12px;
      height: 12px;
      background: var(--accent-color);
      border-radius: 50%;
      box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.3);
    }

    .timeline-item::after {
      content: '';
      position: absolute;
      left: 5px;
      top: 1.5rem;
      width: 2px;
      height: calc(100% + 0.5rem);
      background: linear-gradient(to bottom, var(--accent-color), transparent);
    }

    .timeline-item:last-child::after {
      display: none;
    }

    /* Enhanced Bibliography */
    .bibliography {
      background: var(--bg-light);
      padding: 2rem;
      border-radius: var(--border-radius);
      margin: 3rem 0;
    }

    .bibliography h4 {
      color: var(--primary-color);
      border-bottom: 3px solid var(--accent-color);
      padding-bottom: 0.5rem;
      margin-bottom: 2rem;
    }

    .bibliography-item {
      background: white;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      box-shadow: var(--shadow-light);
      transition: var(--transition);
      border-left: 4px solid var(--accent-color);
    }

    .bibliography-item:hover {
      transform: translateX(5px);
      box-shadow: var(--shadow-medium);
    }

    .bibliography-item .title {
      font-weight: 600;
      color: var(--primary-color);
    }

    .bibliography-item .publication {
      color: var(--secondary-color);
    }

    .bibliography-item a {
      color: var(--accent-color);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
    }

    .bibliography-item a:hover {
      color: var(--secondary-color);
      text-decoration: underline;
    }

    /* Enhanced Action Buttons */
    .article-actions {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 2rem;
      border-radius: var(--border-radius);
      margin: 3rem 0;
    }

    .action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .action-buttons .btn {
      flex: 1;
      min-width: 120px;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      transition: var(--transition);
      border: 2px solid transparent;
    }

    .action-buttons .btn-outline-secondary {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .action-buttons .btn-outline-secondary:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }

    .action-buttons .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border: none;
      color: white;
    }

    .action-buttons .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
      filter: brightness(1.1);
    }

    /* Enhanced Citation Popup */
    .citation-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-heavy);
      z-index: 1000;
      max-width: 90vw;
      width: 600px;
      display: none;
      animation: popupSlideIn 0.3s ease-out;
    }

    @keyframes popupSlideIn {
      from {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    .citation-popup-header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 1.5rem;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .citation-popup-header h5 {
      margin: 0;
      font-weight: 600;
    }

    .citation-popup-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: var(--transition);
    }

    .citation-popup-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .citation-popup-content {
      padding: 2rem;
      font-family: 'Courier New', monospace;
      background: var(--bg-light);
      line-height: 1.6;
      border-radius: 8px;
      margin: 1rem;
    }

    .citation-popup-footer {
      padding: 1.5rem;
      text-align: center;
      border-top: 1px solid rgba(0,0,0,0.1);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 999;
      display: none;
    }

    /* Enhanced Related Articles */
    .related-articles {
      margin: 4rem 0;
    }

    .related-articles h2 {
      color: var(--primary-color);
      text-align: center;
      margin-bottom: 3rem;
      position: relative;
    }

    .related-articles h2::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
      border-radius: 2px;
    }

    .related-articles-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .related-article {
      background: white;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-light);
      transition: var(--transition);
    }

    .related-article:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-heavy);
    }

    .related-article-image {
      position: relative;
      overflow: hidden;
    }

    .related-article-image img {
      transition: var(--transition);
    }

    .related-article:hover .related-article-image img {
      transform: scale(1.05);
    }

    .related-article-content {
      padding: 2rem;
    }

    .related-article-title {
      font-size: 1.3rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .related-article-excerpt {
      color: var(--text-light);
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .container {
        padding: 0 0.5rem;
      }

      .blog-post {
        padding: 1.5rem;
        margin: 1rem 0;
      }

      .article-header {
        padding: 2rem 1rem;
        margin: -1rem -0.5rem 2rem -0.5rem;
      }

      .display-4 {
        font-size: 2rem;
      }

      .post-meta {
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
      }

      .action-buttons {
        flex-direction: column;
      }

      .action-buttons .btn {
        min-width: auto;
      }

      .related-articles-grid {
        grid-template-columns: 1fr;
      }

      .citation-popup {
        width: 95vw;
        margin: 1rem;
      }

      .blog-content p:first-letter {
        font-size: 2.5rem;
      }

      .lead {
        font-size: 1.1rem;
        padding: 1.5rem;
      }
    }

    /* Accessibility Enhancements */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Focus States */
    .btn:focus,
    .citation-popup-close:focus,
    a:focus {
      outline: 3px solid var(--accent-color);
      outline-offset: 2px;
    }

    /* Print Styles */
    @media print {
      .article-header,
      .article-actions,
      .related-articles,
      .citation-popup,
      .overlay {
        display: none !important;
      }

      .blog-post {
        box-shadow: none;
        padding: 0;
      }

      body {
        background: white;
      }
    }

    /* Loading Animation */
    .loading-shimmer {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    /* Scroll Progress Indicator */
    .scroll-progress {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-color), var(--secondary-color));
      z-index: 1000;
      transition: width 0.1s ease-out;
    }
  </style>
  
  <!-- Schema.org markup for Google -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "Washburn "A" Mill Explosion (May 2, 1878)",
      "description": "The catastrophic explosion at the Washburn "A" Mill in Minneapolis on May 2, 1878, which killed 18 people and revolutionized industrial safety standards in flour milling.",
      "image": "https://www.mnthen.com/images/mill-explosion.webp",
      "author": {
        "@type": "Person",
        "name": "Matt Reicher",
        "url": "https://www.mnthen.com/blog/creator/matt_reicher.html"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Minnesota Then",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.mnthen.com/images/logo.webp"
        }
      },
      "datePublished": "2025-05-08",
      "dateModified": "2025-05-08"
    }
  </script>
</head>

<body>
<!-- Scroll Progress Indicator -->
<div class="scroll-progress" id="scrollProgress"></div>

<!-- Header -->
<header class="mnthen-header">
  <div class="mnthen-header-container">
    <a href="/" class="mnthen-logo">
      <img src="https://www.mnthen.com/images/logo.webp" alt="Minnesota Then Logo" class="mnthen-logo-img" /> 
      Minnesota Then
    </a>
    
    <button class="mnthen-mobile-menu" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <nav class="mnthen-nav">
      <ul class="mnthen-nav-list">
        <li class="mnthen-nav-item">
          <button class="mnthen-dropdown-btn">
            About
            <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="mnthen-dropdown-content">
            <a href="https://mnthen.com/mission.html">Mission</a>
            <a href="https://mnthen.com/blog/creator/matt_reicher.html">Our Team</a>
            <a href="https://mnthen.com/contact">Contact</a>
          </div>
        </li>
        <li class="mnthen-nav-item">
          <button class="mnthen-dropdown-btn">
            Multimedia
            <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="mnthen-dropdown-content">
            <a href="https://mnthen.com/blog.html">Blog</a>
            <a href="https://www.youtube.com/@mnthen" target="_blank">YouTube</a>
            <a href="https://mnthen.com/podcast.html">Podcast</a>
          </div>
        </li>
        <li class="mnthen-nav-item">
          <button class="mnthen-dropdown-btn">
            Resources
            <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="mnthen-dropdown-content">
            <a href="https://mnthen.com/faq.html">Help Center</a>
            <a href="https://mnthen.com/upcoming_events.html">Upcoming Events</a>
            <a href="https://mnthen.com/resources.html">Research Tools</a>
          </div>
        </li>
        <li class="mnthen-nav-item">
          <button class="mnthen-dropdown-btn">
            Interact
            <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="mnthen-dropdown-content">
            <a href="https://www.patreon.com/mnthen" target="_blank">Join Our Patreon</a>
            <a href="https://mnthen.com/markers.html">Share Your Story</a>
            <a href="https://mnthen.com/trivia.html">Play Trivia Games</a> 
          </div>
        </li>
        <li class="mnthen-nav-item">
          <a href="https://mnthen.com/donate.html" class="mnthen-donate-btn">Donate</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<!-- Floating Action Button (FAB) to return to the blog's front page -->
<a href="https://www.mnthen.com/blog.html" class="mnthen-fab" aria-label="Return to Blog Front Page">
  <i class="fas fa-home"></i>
  <span class="mnthen-fab-tooltip">Back to Blog</span>
</a>

<!-- Search Bar -->
<div class="search-bar" style="margin-top: 80px">
  <form id="search-form" action="/results.html" method="get">
    <input type="search" id="search-input" name="query" placeholder="Search blog articles..." aria-label="Search blog articles">
    <button type="submit" aria-label="Search">
      <i class="fas fa-search"></i>
    </button>
  </form>
</div>
  
<!-- Main Content -->
<main class="container py-5">
  <article class="blog-post">
    <!-- Article Header -->
    <header class="article-header text-center">
      <div class="article-title">
        <i class="fa-regular fa-calendar fa-3x mb-3" aria-hidden="true"></i>
        <h1 class="display-4">Washburn "A" Mill Explosion</h1>
        <div class="title-underline mx-auto"></div>
        <p class="lead text-white-50 mt-3">May 2, 1878 • Minneapolis, Minnesota</p>
      </div>
      <div class="post-meta d-flex justify-content-between align-items-center mt-4">
        <span class="author">Creator: <a href="/blog/creator/matt_reicher.html">Matt Reicher</a></span>
        <span class="date">Published: May 8, 2025</span>
      </div>
    </header>

    <!-- Article Content -->
    <div class="row">
      <div class="col-lg-8">
        <!-- Enhanced Image Showcase -->
        <div class="image-showcase">
          <img 
            src="https://www.mnthen.com/images/mill-explosion.webp" 
            alt="Washburn 'A' Mill Explosion aftermath showing destroyed buildings and debris" 
            loading="lazy"
          >
          <div class="image-caption">
            <strong>The Devastating Aftermath</strong>
            The Washburn "A" Mill explosion left a trail of destruction across Minneapolis's milling district.
            <br><em>Source: <a href="https://www.generalmills.com/news/stories/the-explosion-that-changed-milling" target="_blank">General Mills</a></em>
          </div>
        </div>

        <!-- Enhanced Lead Paragraph -->
        <div class="lead">
          In the 1870s, Minneapolis became America's flour milling capital. The city's strategic position along the Mississippi River allowed mill operators to harness the power of St. Anthony Falls, driving an impressive array of industrial machinery. By 1874, the Washburn "A" Mill stood as one of the largest and most technologically advanced flour mills in the world, producing 1,200 barrels of flour daily and employing dozens of workers.
        </div>

        <!-- Blog Content -->
        <div class="blog-content">
          <p>At 6:00 PM on Thursday, May 2, 1878, fourteen men began the night shift at the Washburn "A" Mill—an imposing seven-story flouring mill in the heart of downtown Minneapolis—until disaster struck at 7:20 PM. The complex exploded, shaking every corner of the city. The shock was felt as far as St. Paul. The blast leveled the facility, destroyed surrounding buildings, and plunged the city's vital milling district—then the economic engine of Minneapolis—into chaos and uncertainty.</p>

          <p>Immediately after the blast, dense smoke and flames leapt into the sky. Large chunks of granite fell as far as eight blocks away, and windows shattered for miles in all directions. Fire crews laid a network of hoses, drawing water from every nearby hydrant. The intensity of the heat kept them from approaching the building, hindering their efforts and forcing them to battle the blaze throughout the night.</p>

          <p>The following morning, as heat still emanated from the wreckage, opinions began to circulate about the cause of the catastrophe. A flouring mill, powered by falling water delivered from a nearby canal and without boilers, shouldn't have exploded—but it did. While the consensus held that the initial blast originated in the Washburn "A" Mill, early theories were speculative, varied, and largely unsubstantiated.</p>

          <p>Speculation soon turned to scientific theory, and later scientific fact. An early explanation came from John A. Christian, the "A" Mill's manager, later confirmed by University of Minnesota professors S.F. Peckham and Louis W. Peck. He explained that the explosion was caused by a high concentration of flour dust suspended in the air inside the mill—a poorly understood hazard at the time.</p>

          <p>On May 3, only a day after the devastation, mill owner Cadwallader Washburn declared his intention to rebuild. The new structure—completed in 1880—abandoned the traditional grindstone method in favor of a cutting-edge roller mill system. Under Austrian engineer William de la Barre's guidance, the facility incorporated revolutionary safety features, including an extensive dust collection system with powerful fans and ductwork to capture airborne flour particles.</p>

          <p>Beyond rebuilding, Washburn took steps to support those affected by the disaster. He established a relief fund for victims' families—later revealed to be its largest donor—and arranged continued employment for displaced workers at another facility. The rebuilt mill operated until it produced its final flour in 1965.</p>
        </div>

        <!-- License -->
        <div class="license mt-5 text-end">
          <p xmlns:cc="http://creativecommons.org/ns#">
            This work is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" class="text-decoration-none text-primary">Creative Commons BY-NC 4.0</a>.
          </p>
        </div>
      </div>

      <!-- Enhanced Sidebar -->
      <aside class="col-lg-4">
        <!-- Quick Facts Card -->
        <div class="sidebar-card">
          <div class="card-header">
            <h4>Quick Facts</h4>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><strong>Date:</strong> May 2, 1878</li>
            <li class="list-group-item"><strong>Location:</strong> Minneapolis, Minnesota</li>
            <li class="list-group-item"><strong>Building:</strong> Washburn "A" Mill</li>
            <li class="list-group-item"><strong>Mill Size:</strong> Seven stories tall</li>
            <li class="list-group-item"><strong>Production:</strong> 1,200 barrels daily</li>
            <li class="list-group-item"><strong>Fatalities:</strong> 18 people</li>
            <li class="list-group-item"><strong>Cause:</strong> Flour dust explosion</li>
            <li class="list-group-item"><strong>Owner:</strong> Cadwallader Washburn</li>
            <li class="list-group-item"><strong>Impact:</strong> 6 mills destroyed</li>
          </ul>
        </div>

        <!-- Enhanced Chronology Card -->
        <div class="sidebar-card">
          <div class="card-header">
            <h4>Timeline</h4>
          </div>
          <div class="card-body">
            <div class="timeline-item">
              <strong>1874:</strong> Washburn "A" Mill constructed
            </div>
            <div class="timeline-item">
              <strong>May 2, 6:00 PM:</strong> Night shift begins
            </div>
            <div class="timeline-item">
              <strong>May 2, 7:20 PM:</strong> Catastrophic explosion
            </div>
            <div class="timeline-item">
              <strong>Night of May 2:</strong> Fire crews battle blaze
            </div>
            <div class="timeline-item">
              <strong>May 3:</strong> Rebuild plans announced
            </div>
            <div class="timeline-item">
              <strong>1880:</strong> New mill completed
            </div>
            <div class="timeline-item">
              <strong>1965:</strong> Final flour production
            </div>
          </div>
        </div>
      </aside>
    </div>

    <!-- Enhanced Bibliography -->
    <section class="bibliography">
      <h4>Bibliography</h4>
      <div class="bibliography-item">
        <span class="title">"Death and Destruction!"</span> <em class="publication">Daily Globe</em> (St. Paul), <span class="date">May 3, 1878, 1.</span> <a href="https://www.mnhs.org/newspapers/lccn/sn83025287/1878-05-03/ed-1/seq-1" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
      <div class="bibliography-item">
        <span class="author">Dooley, Beth.</span> <span class="title">"Minneapolis was once part of America's breadbasket. Could it be again?"</span> <em class="publication">City Pages</em> (Minneapolis), <span class="date">November 29, 2017.</span> <a href="https://infoweb.newsbank.com/app/news/document-view?p=Newsbank&docref=news/1687E82F90474838" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
      <div class="bibliography-item">
        <span class="title">"The Explosion That Changed Milling."</span> <em class="publication">General Mills: A U.S. Based Food Company.</em> <span class="date">Last modified May 2, 2012.</span> <a href="https://www.generalmills.com/news/stories/the-explosion-that-changed-milling" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
      <div class="bibliography-item">
        <span class="author">Millett, Larry.</span> <span class="title">"Park Specialists Document Historic Milling Effort to Preserve, Find Way to Use it."</span> <em class="publication">St. Paul Pioneer Press</em>, <span class="date">November 16, 1992, 5A.</span> <a href="http://infoweb.newsbank.com/app/news/document-view?p=Newsbank&docref=news/0EB5DC51C6B8C8D8" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
      <div class="bibliography-item">
        <span class="author">Nathanson, Iric.</span> <span class="title">"Washburn A Mill Explosion, 1878."</span> <em class="publication">MNopedia | Minnesota Encyclopedia.</em> <span class="date">Last modified November 14, 2013.</span> <a href="https://www.mnopedia.org/event/washburn-mill-explosion-1878" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
      <div class="bibliography-item">
        <span class="title">"Awful Calamity!"</span> <em class="publication">Saint Charles Times</em>, <span class="date">May 10, 1878, 6.</span> <a href="https://www.mnhs.org/newspapers/lccn/sn85025581/1878-05-10/ed-1/seq-6" target="_blank" rel="noopener noreferrer">LINK</a>
      </div>
    </section>

    <!-- Enhanced Article Actions -->
    <section class="article-actions">
      <div class="row">
        <div class="col-12">
          <h4><i class="fas fa-share-alt me-2"></i>Share and Save</h4>
          <div class="action-buttons">
            <a href="mailto:?subject=Check out this article&body=I thought you might be interested in this article: https://www.mnthen.com/blog/event/washburn_mill.html" target="_blank" class="btn btn-outline-secondary" title="Share via Email">
              <i class="fas fa-envelope me-2"></i>Email
            </a>
            <a href="https://twitter.com/intent/tweet?url=https://www.mnthen.com/blog/event/washburn_mill.html" class="btn btn-outline-secondary" target="_blank" title="Share on Twitter/X">
              <i class="fab fa-x-twitter me-2"></i>Twitter/X
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.mnthen.com/blog/event/washburn_mill.html" target="_blank" class="btn btn-outline-secondary" title="Share on Facebook">
              <i class="fab fa-facebook-f me-2"></i>Facebook
            </a>
            <button class="btn btn-outline-secondary" onclick="saveAsPDF()" title="Save as PDF">
              <i class="fas fa-file-pdf me-2"></i>Save as PDF
            </button>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-12">
          <button class="btn btn-primary w-100" onclick="toggleCitationPopup()">
            <i class="fas fa-quote-left me-2"></i>Cite this Page
          </button>
        </div>
      </div>
    </section>

    <!-- Enhanced Citation Popup -->
    <div class="citation-popup" id="citationPopup">
      <div class="citation-popup-header">
        <h5><i class="fas fa-quote-left me-2"></i>Citation</h5>
        <button class="citation-popup-close" onclick="toggleCitationPopup()" aria-label="Close citation popup">&times;</button>
      </div>
      <div class="citation-popup-content" id="citationContent"></div>
      <div class="citation-popup-footer">
        <button class="btn btn-outline-secondary btn-sm" onclick="copyCitation()">
          <i class="fas fa-copy me-2"></i>Copy to Clipboard
        </button>
        <span id="copyFeedback" class="copy-feedback ms-3"></span>
      </div>
    </div>
    <div class="overlay" id="overlay" onclick="toggleCitationPopup()"></div>
  </article>

  <!-- Enhanced Related Articles -->
  <section class="related-articles">
    <h2><i class="fas fa-book-open me-3"></i>Further Reading</h2>
    <div class="related-articles-grid" id="relatedArticlesGrid">
      <!-- Will be dynamically populated -->
    </div>
  </section>
</main>
  
<!-- Footer -->
<div class="container-fluid p-0">
  <footer class="footer bg-primary py-5"> 
    <div class="container">
        <div class="row g-4 mb-4">
            <div class="col-lg-3 col-md-6 pt-3">
                <h3 class="footer-brand mb-3">
                    <span class="text-white">Minnesota</span>
                    <span class="text-navy">Then</span>
                </h3>
            </div>
            <div class="col-lg-2 col-md-6">
                <h5 class="text-white mb-3">Who We Are</h5>
                <ul class="list-unstyled footer-links">
                    <li><a href="/about.html">About Us</a></li>
                    <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-6">
                <h5 class="text-white mb-3">What We Do</h5>
                <ul class="list-unstyled footer-links">
                    <li><a href="https://mnthen.com/blog.html">Blog</a></li>
                    <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
                    <li><a href="/upcoming_events.html">Upcoming Events</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-6">
                <h5 class="text-white mb-3">Resources</h5>
                <ul class="list-unstyled footer-links">
                    <li><a href="https://www.mnthen.com/works.html">Learn the App</a></li>
                    <li><a href="/faq.html">Help Center</a></li>
                    <li><a href="/resources.html">Research Tools</a></li>
                </ul>
            </div>
            <div class="col-lg-3 col-md-6 pt-3">
                <p class="tagline">Every Step Tells a Story</p>
            </div>
        </div>
        <hr class="footer-divider">
        <div class="row align-items-center">
          <div class="col-md-4 text-center text-md-start">
              <small style="color: white;">&copy; 2025 Minnesota Then. All rights reserved</small>
          </div>
          <div class="col-md-8">
              <div class="social-icons text-center text-md-end">
                  <span class="me-2" style="color: white;">Connect:</span>
                  <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white">
                      <i class="fab fa-facebook-f"></i>
                  </a>
                  <span class="mx-2 text-white">|</span>
                  <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white">
                      <i class="fa-brands fa-bluesky"></i>
                  </a>
                  <span class="mx-2 text-white">|</span>
                  <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white">
                      <i class="fab fa-linkedin-in"></i>
                  </a>
              </div>
          </div>
        </div>
    </div>
  </footer>
</div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="/blog_articles.js?v=1.0.1" defer></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Enhanced JavaScript with performance optimizations and new features

// Scroll Progress Indicator
function updateScrollProgress() {
  const scrollTop = window.pageYOffset;
  const docHeight = document.body.scrollHeight - window.innerHeight;
  const scrollPercent = (scrollTop / docHeight) * 100;
  document.getElementById('scrollProgress').style.width = scrollPercent + '%';
}

// Throttled scroll event for better performance
let scrollTimeout;
window.addEventListener('scroll', () => {
  if (!scrollTimeout) {
    scrollTimeout = setTimeout(() => {
      updateScrollProgress();
      scrollTimeout = null;
    }, 10);
  }
});

// Enhanced Save as PDF functionality
function saveAsPDF() {
  const button = event.target.closest('button');
  const originalText = button.innerHTML;
  
  // Show loading state
  button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Generating PDF...';
  button.disabled = true;
  
  const element = document.querySelector('.blog-post');
  const opt = {
    margin: [0.5, 0.5, 0.5, 0.5],
    filename: 'washburn-mill-explosion-1878.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { 
      scale: 2,
      useCORS: true,
      allowTaint: true,
      backgroundColor: '#ffffff'
    },
    jsPDF: { 
      unit: 'in', 
      format: 'letter', 
      orientation: 'portrait',
      compress: true
    }
  };

  html2pdf().set(opt).from(element).save().then(() => {
    // Reset button state
    button.innerHTML = originalText;
    button.disabled = false;
    
    // Show success feedback
    const feedback = document.createElement('div');
    feedback.className = 'alert alert-success position-fixed';
    feedback.style.cssText = 'top: 20px; right: 20px; z-index: 9999; animation: slideInRight 0.3s ease-out;';
    feedback.innerHTML = '<i class="fas fa-check me-2"></i>PDF saved successfully!';
    document.body.appendChild(feedback);
    
    setTimeout(() => {
      feedback.remove();
    }, 3000);
  }).catch(() => {
    // Reset button state on error
    button.innerHTML = originalText;
    button.disabled = false;
  });
}

// Enhanced Citation popup functionality
function toggleCitationPopup() {
  const popup = document.getElementById('citationPopup');
  const overlay = document.getElementById('overlay');
  const citationContent = document.getElementById('citationContent');

  if (popup.style.display === 'block') {
    popup.style.display = 'none';
    overlay.style.display = 'none';
    document.body.style.overflow = '';
  } else {
    const currentDate = new Date().toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });

    const citation = `Reicher, Matt. "Washburn 'A' Mill Explosion (May 2, 1878)." Minnesota Then, Last Modified May 8, 2025. https://www.mnthen.com/blog/event/washburn_mill.html (Accessed ${currentDate}).`;

    citationContent.textContent = citation;
    popup.style.display = 'block';
    overlay.style.display = 'block';
    document.body.style.overflow = 'hidden';
  }
}

// Enhanced Copy citation functionality
async function copyCitation() {
  const citationContent = document.getElementById('citationContent');
  const feedback = document.getElementById('copyFeedback');
  
  try {
    if (navigator.clipboard && window.isSecureContext) {
      await navigator.clipboard.writeText(citationContent.textContent);
    } else {
      // Fallback for older browsers
      const textArea = document.createElement('textarea');
      textArea.value = citationContent.textContent;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      document.execCommand('copy');
      textArea.remove();
    }
    
    feedback.innerHTML = '<i class="fas fa-check text-success me-1"></i>Copied!';
    feedback.style.opacity = '1';
    
    setTimeout(() => {
      feedback.style.opacity = '0';
    }, 2000);
  } catch (err) {
    feedback.innerHTML = '<i class="fas fa-exclamation-triangle text-warning me-1"></i>Copy failed';
    feedback.style.opacity = '1';
    
    setTimeout(() => {
      feedback.style.opacity = '0';
    }, 2000);
  }
}

// Enhanced Related Articles Population
function populateRelatedArticles() {
  const relatedArticlesGrid = document.querySelector('.related-articles-grid');
  const currentArticleUrl = window.location.pathname;
  
  // Mock data for demonstration - replace with actual blog articles
  const mockArticles = [
    {
      headline: "The Great Hinckley Fire of 1894",
      blurb: "A devastating wildfire that swept through eastern Minnesota, killing over 400 people and destroying entire towns.",
      image: "/placeholder.svg?height=300&width=400",
      url: "/blog/event/hinckley-fire.html"
    },
    {
      headline: "The Armistice Day Blizzard of 1940",
      blurb: "An unexpected and deadly blizzard that caught Minnesota unprepared, resulting in 49 deaths across the state.",
      image: "/placeholder.svg?height=300&width=400",
      url: "/blog/event/armistice-day-blizzard.html"
    },
    {
      headline: "The Collapse of the I-35W Bridge",
      blurb: "The tragic collapse of Minneapolis's I-35W Mississippi River bridge in 2007 that shocked the nation.",
      image: "/placeholder.svg?height=300&width=400",
      url: "/blog/event/i35w-bridge-collapse.html"
    }
  ];
  
  relatedArticlesGrid.innerHTML = '';
  
  mockArticles.forEach((article, index) => {
    const articleElement = document.createElement('article');
    articleElement.className = 'related-article';
    articleElement.style.animationDelay = `${index * 0.1}s`;
    
    articleElement.innerHTML = `
      <div class="related-article-image">
        <img src="${article.image}" alt="${article.headline}" loading="lazy">
      </div>
      <div class="related-article-content">
        <h3 class="related-article-title">${article.headline}</h3>
        <p class="related-article-excerpt">${article.blurb}</p>
        <div class="text-center">
          <a href="${article.url}" class="btn btn-primary">
            <i class="fas fa-arrow-right me-2"></i>Read More
          </a>
        </div>
      </div>
    `;
    
    relatedArticlesGrid.appendChild(articleElement);
  });
}

// Enhanced Navigation functionality
function initializeNavigation() {
  const mobileMenuBtn = document.querySelector('.mnthen-mobile-menu');
  const mainNav = document.querySelector('.mnthen-nav');
  const dropdownBtns = document.querySelectorAll('.mnthen-dropdown-btn');

  if (mobileMenuBtn && mainNav) {
    mobileMenuBtn.addEventListener('click', function (e) {
      e.stopPropagation();
      this.classList.toggle('active');
      mainNav.classList.toggle('active');
      
      // Prevent body scroll when menu is open
      if (mainNav.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    });

    dropdownBtns.forEach(btn => {
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();

        dropdownBtns.forEach(otherBtn => {
          if (otherBtn !== btn) {
            otherBtn.classList.remove('active');
            otherBtn.nextElementSibling?.classList.remove('active');
          }
        });

        this.classList.toggle('active');
        const dropdownContent = this.nextElementSibling;
        if (dropdownContent) {
          dropdownContent.classList.toggle('active');
        }
      });
    });

    document.addEventListener('click', function (e) {
      const isClickInsideNav = e.target.closest('.mnthen-nav');
      const isClickInsideMenu = e.target.closest('.mnthen-mobile-menu');

      if (!isClickInsideNav && !isClickInsideMenu) {
        mainNav.classList.remove('active');
        mobileMenuBtn.classList.remove('active');
        document.body.style.overflow = '';

        dropdownBtns.forEach(btn => {
          btn.classList.remove('active');
          btn.nextElementSibling?.classList.remove('active');
        });
      }
    });

    window.addEventListener('resize', function () {
      if (window.innerWidth > 768) {
        mainNav.classList.remove('active');
        mobileMenuBtn.classList.remove('active');
        document.body.style.overflow = '';

        dropdownBtns.forEach(btn => {
          btn.classList.remove('active');
          btn.nextElementSibling?.classList.remove('active');
        });
      }
    });
  }
}

// Intersection Observer for animations
function initializeAnimations() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };  {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);

  // Observe elements for animation
  const animatedElements = document.querySelectorAll('.sidebar-card, .bibliography-item, .related-article');
  animatedElements.forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
    observer.observe(el);
  });
}

// Lazy loading for images
function initializeLazyLoading() {
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src || img.src;
        img.classList.remove('loading-shimmer');
        observer.unobserve(img);
      }
    });
  });

  const images = document.querySelectorAll('img[loading="lazy"]');
  images.forEach(img => {
    img.classList.add('loading-shimmer');
    imageObserver.observe(img);
  });
}

// Enhanced search functionality
function initializeSearch() {
  const searchForm = document.getElementById('search-form');
  const searchInput = document.getElementById('search-input');

  if (searchForm && searchInput) {
    searchForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const query = searchInput.value.trim();
      if (query) {
        // Add loading state
        searchInput.style.background = 'linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)';
        searchInput.style.backgroundSize = '200% 100%';
        searchInput.style.animation = 'shimmer 1s infinite';
        
        // Simulate search (replace with actual search logic)
        setTimeout(() => {
          window.location.href = `/results.html?query=${encodeURIComponent(query)}`;
        }, 500);
      }
    });

    // Add search suggestions (mock implementation)
    searchInput.addEventListener('input', function() {
      const query = this.value.trim();
      if (query.length > 2) {
        // Show search suggestions (implement as needed)
        console.log('Search suggestions for:', query);
      }
    });
  }
}

// Performance monitoring
function initializePerformanceMonitoring() {
  // Monitor Core Web Vitals
  if ('web-vital' in window) {
    import('https://unpkg.com/web-vitals@3/dist/web-vitals.js').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(console.log);
      getFID(console.log);
      getFCP(console.log);
      getLCP(console.log);
      getTTFB(console.log);
    });
  }
}

// Accessibility enhancements
function initializeAccessibility() {
  // Skip to main content link
  const skipLink = document.createElement('a');
  skipLink.href = '#main-content';
  skipLink.textContent = 'Skip to main content';
  skipLink.className = 'sr-only sr-only-focusable position-absolute';
  skipLink.style.cssText = 'top: 10px; left: 10px; z-index: 9999; padding: 8px 16px; background: var(--primary-color); color: white; text-decoration: none; border-radius: 4px;';
  document.body.insertBefore(skipLink, document.body.firstChild);

  // Add main content ID
  const mainContent = document.querySelector('main');
  if (mainContent) {
    mainContent.id = 'main-content';
  }

  // Enhance focus management
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      // Close any open modals/popups
      const popup = document.getElementById('citationPopup');
      if (popup && popup.style.display === 'block') {
        toggleCitationPopup();
      }
    }
  });
}

// Error handling and fallbacks
function initializeErrorHandling() {
  window.addEventListener('error', function(e) {
    console.error('JavaScript error:', e.error);
    // Implement error reporting as needed
  });

  // Handle failed image loads
  document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG') {
      e.target.src = '/placeholder.svg?height=300&width=400&text=Image+Not+Available';
      e.target.alt = 'Image not available';
    }
  }, true);
}

// Initialize everything when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  initializeNavigation();
  populateRelatedArticles();
  initializeAnimations();
  initializeLazyLoading();
  initializeSearch();
  initializeAccessibility();
  initializeErrorHandling();
  
  // Initialize performance monitoring after a delay
  setTimeout(initializePerformanceMonitoring, 1000);
  
  // Add smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
});

// Service Worker registration for offline functionality
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js')
      .then(function(registration) {
        console.log('ServiceWorker registration successful');
      })
      .catch(function(err) {
        console.log('ServiceWorker registration failed');
      });
  });
}
</script>

</body>
</html>
