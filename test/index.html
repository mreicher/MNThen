<!DOCTYPE html>
<html lang="en">
<head> 
<!-- Basic Meta Tags -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Title -->
<title>Minnesota Then - Museum Without Walls</title>

<!-- Favicon -->
<link rel="shortcut icon" type="image/x-icon" href="https://www.mnthen.com/images/mnthenfav.ico">

<!-- Preload Critical Assets -->
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="preload" href="https://www.mnthen.com/images/logo.webp" as="image">
<link rel="preload" href="https://www.mnthen.com/images/index/index_1.jpg" as="image">

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Font Awesome CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<!-- Custom Styles -->
<link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_index.css">
<link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
<link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">
<link rel="stylesheet" href="https://www.mnthen.com/css/dropdown.css">

<!-- SEO Meta Tags -->
<meta name="description" content="Minnesota Then: A digital Museum Without Walls that brings local history to life through interactive, location-based experiences on your mobile device.">
<meta name="keywords" content="Minnesota history, Museum Without Walls, mobile museum, local history, Minnesota trivia, historical landmarks, GIS history app">
<meta name="author" content="Minnesota Then">

<!-- Open Graph Meta Tags (for social media sharing) -->
<meta property="og:title" content="Minnesota Then - Museum Without Walls">
<meta property="og:description" content="Experience Minnesota's first digital Museum Without Walls. Explore historic sites through your mobile device with our interactive GIS app.">
<meta property="og:image" content="https://www.mnthen.com/images/index/index_1.jpg">
<meta property="og:url" content="https://www.mnthen.com">
<meta property="og:type" content="website">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Minnesota Then - Museum Without Walls">
<meta name="twitter:description" content="Experience Minnesota's first digital Museum Without Walls. Explore historic sites through your mobile device with our interactive GIS app.">
<meta name="twitter:image" content="https://www.mnthen.com/images/index/index_1.jpg">

<!-- Canonical URL -->
<link rel="canonical" href="https://www.mnthen.com">

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "Organization",
"name": "Minnesota Then",
"url": "https://www.mnthen.com",
"logo": "https://www.mnthen.com/images/logo.webp",
"description": "Minnesota's first digital Museum Without Walls. Explore historic sites through your mobile device with our interactive GIS app.",
"sameAs": [
  "https://www.facebook.com/profile.php?id=100090355652945",
  "https://bsky.app/profile/mnthen.bsky.social",
  "https://www.linkedin.com/company/minnesota-then"
]
}
</script>

<style>
/* Define color variables */
:root {
  --primary: #0D47A1;
  --primary-dark: #1a365d;
  --primary-light: rgba(13, 71, 161, 0.1);
  --text-dark: #2c3e50;
  --text-muted: #6c757d;
  --border-light: rgba(0, 0, 0, 0.1);
  --shadow-light: 0 2px 15px rgba(0, 0, 0, 0.08);
  --shadow-medium: 0 4px 25px rgba(0, 0, 0, 0.12);
  --shadow-heavy: 0 8px 40px rgba(0, 0, 0, 0.15);
  --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Utility Bar Styles */
.utility-bar {
  background: linear-gradient(135deg, var(--primary-dark) 0%, #2c5282 100%);
  padding: 10px 0;
  font-size: 14px;
  position: relative;
  z-index: 1000;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.utility-bar .container {
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.utility-nav {
  display: flex;
  align-items: center;
  gap: 24px;
}

.utility-nav a {
  color: white;
  text-decoration: none;
  font-weight: 500;
  font-size: 14px;
  transition: var(--transition-smooth);
  position: relative;
  padding: 8px 12px;
  border-radius: 6px;
}

.utility-nav a:hover {
  color: white;
  background-color: rgba(255, 255, 255, 0.1);
  transform: translateY(-1px);
}

.utility-nav .separator {
  color: rgba(255, 255, 255, 0.6);
  font-weight: 300;
}

.utility-nav .login-icon {
  color: white;
  font-size: 16px;
  cursor: pointer;
  transition: var(--transition-smooth);
  padding: 8px 12px;
  border-radius: 6px;
}

.utility-nav .login-icon:hover {
  background-color: rgba(255, 255, 255, 0.1);
  transform: translateY(-1px);
}

/* Enhanced Header Styles */
.mnthen-header {
  background: linear-gradient(180deg, #ffffff 0%, #fafbfc 100%);
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  box-shadow: var(--shadow-light);
  position: relative;
  z-index: 999;
}

.mnthen-header-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 80px;
}

.mnthen-logo {
  display: flex;
  align-items: center;
  text-decoration: none;
  font-size: 28px;
  font-weight: 700;
  color: var(--text-dark) !important;
  transition: var(--transition-smooth);
  letter-spacing: -0.5px;
}

.mnthen-logo:hover {
  transform: translateY(-2px);
  color: var(--primary) !important;
}

.mnthen-logo-img {
  width: 48px;
  height: 48px;
  margin-right: 12px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.mnthen-nav {
  display: flex;
  align-items: center;
}

.mnthen-nav-list {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  gap: 8px;
}

.mnthen-nav-item {
  position: relative;
}

.mnthen-dropdown-btn {
  background: none;
  border: none;
  color: var(--text-dark);
  font-size: 16px;
  font-weight: 500;
  padding: 12px 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  border-radius: 8px;
  transition: var(--transition-smooth);
  position: relative;
}

.mnthen-dropdown-btn:hover {
  background-color: var(--primary-light);
  color: var(--primary);
  transform: translateY(-1px);
}

.mnthen-dropdown-btn:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

.mnthen-dropdown-arrow {
  fill: currentColor;
  transition: var(--transition-smooth);
}

.mnthen-dropdown-btn:hover .mnthen-dropdown-arrow {
  transform: rotate(180deg);
}

.mnthen-dropdown-content {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  min-width: 200px;
  border-radius: 12px;
  box-shadow: var(--shadow-heavy);
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: var(--transition-smooth);
  z-index: 1000;
  border: 1px solid rgba(0, 0, 0, 0.06);
  overflow: hidden;
}

.mnthen-dropdown-content.active {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.mnthen-dropdown-content a {
  display: block;
  padding: 14px 20px;
  color: var(--text-dark);
  text-decoration: none;
  font-weight: 500;
  transition: var(--transition-smooth);
  border-bottom: 1px solid rgba(0, 0, 0, 0.04);
}

.mnthen-dropdown-content a:last-child {
  border-bottom: none;
}

.mnthen-dropdown-content a:hover {
  background-color: var(--primary-light);
  color: var(--primary);
  transform: translateX(4px);
}

.mnthen-login-btn {
  background: linear-gradient(135deg, var(--primary) 0%, #1565c0 100%);
  color: white !important;
  text-decoration: none;
  padding: 12px 24px;
  border-radius: 25px;
  font-weight: 600;
  font-size: 14px;
  transition: var(--transition-bounce);
  box-shadow: 0 4px 15px rgba(13, 71, 161, 0.3);
  border: none;
  cursor: pointer;
  letter-spacing: 0.5px;
}

.mnthen-login-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(13, 71, 161, 0.4);
  color: white !important;
}

.mnthen-login-btn:active {
  transform: translateY(-1px);
}

/* Mobile Menu Styles */
.mnthen-mobile-menu {
  display: none;
  flex-direction: column;
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 6px;
  transition: var(--transition-smooth);
}

.mnthen-mobile-menu:hover {
  background-color: var(--primary-light);
}

.mnthen-mobile-menu span {
  width: 24px;
  height: 3px;
  background-color: var(--text-dark);
  margin: 3px 0;
  transition: var(--transition-smooth);
  border-radius: 2px;
}

.mnthen-mobile-menu.active span:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.mnthen-mobile-menu.active span:nth-child(2) {
  opacity: 0;
}

.mnthen-mobile-menu.active span:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Mobile utility bar adjustments */
@media (max-width: 768px) {
  .utility-bar {
    padding: 8px 0;
    font-size: 13px;
  }
  
  .utility-nav {
    gap: 16px;
  }
  
  .utility-nav a {
    font-size: 13px;
    padding: 6px 10px;
  }
  
  .mnthen-header-container {
    padding: 0 15px;
    min-height: 70px;
  }
  
  .mnthen-logo {
    font-size: 24px;
  }
  
  .mnthen-logo-img {
    width: 40px;
    height: 40px;
  }
  
  .mnthen-mobile-menu {
    display: flex;
  }
  
  .mnthen-nav {
    position: fixed;
    top: 118px;
    left: 0;
    right: 0;
    background: white;
    flex-direction: column;
    padding: 20px;
    box-shadow: var(--shadow-medium);
    transform: translateY(-100%);
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-smooth);
    z-index: 998;
  }
  
  .mnthen-nav.active {
    transform: translateY(0);
    opacity: 1;
    visibility: visible;
  }
  
  .mnthen-nav-list {
    flex-direction: column;
    width: 100%;
    gap: 0;
  }
  
  .mnthen-nav-item {
    width: 100%;
  }
  
  .mnthen-dropdown-btn {
    width: 100%;
    justify-content: space-between;
    padding: 16px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  }
  
  .mnthen-dropdown-content {
    position: static;
    box-shadow: none;
    border: none;
    border-radius: 0;
    background: var(--primary-light);
    margin-top: 8px;
    margin-bottom: 8px;
  }
  
  .mnthen-login-btn {
    margin-top: 20px;
    text-align: center;
    display: block;
  }
}

@media (max-width: 576px) {
  .utility-nav {
    gap: 12px;
  }
  
  .utility-nav a {
    font-size: 12px;
    padding: 4px 8px;
  }
  
  .mnthen-logo {
    font-size: 20px;
  }
  
  .mnthen-logo-img {
    width: 36px;
    height: 36px;
  }
}

/* Critical path CSS for above-the-fold content */
.rounded-pill {
  transition: var(--transition-bounce);
}

.rounded-pill:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-medium);
}

.citation-icon {
  position: absolute;
  bottom: 15px;
  right: 15px;
  z-index: 3;
  opacity: 0.8;
  transition: var(--transition-smooth);
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.citation-icon:hover {
  opacity: 1;
  transform: scale(1.1);
  background: rgba(0, 0, 0, 0.5);
}

.hero-image img {
  height: calc(100% + 50px);
  object-fit: cover;
  filter: brightness(0.9) contrast(1.1);
}

.hero {
  position: relative;
  height: calc(90vh + 50px);
  min-height: 700px;
  background: linear-gradient(135deg, var(--primary) 0%, #1565c0 100%);
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, rgba(13, 71, 161, 0.3) 0%, rgba(21, 101, 192, 0.2) 100%);
  z-index: 2;
}

.hero-content {
  margin-top: -30px;
  z-index: 3;
  position: relative;
}

.hero-text h1 {
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  font-weight: 800;
  letter-spacing: -1px;
}

.hero-text p {
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  font-weight: 400;
  line-height: 1.6;
}

/* Accessibility improvements */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Enhanced Animation classes */
.fade-in {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.fade-in.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Enhanced Card styling */
.content-card {
  height: 100%;
  background: white;
  border-radius: 16px;
  box-shadow: var(--shadow-light);
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  transition: var(--transition-smooth);
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.content-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-heavy);
}

.content-card .card-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 24px;
}

.content-card .location-info {
  margin-top: auto;
  padding-top: 16px;
}

/* Welcome card styling */
.welcome-card {
  height: 100%;
  background: white;
  border-radius: 16px;
  box-shadow: var(--shadow-light);
  display: flex;
  flex-direction: column;
  transition: var(--transition-smooth);
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.welcome-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-medium);
}

.welcome-card .card-content {
  flex: 1;
  padding: 24px;
}

/* Feature card styling */
.feature-card {
  height: 100%;
  background: white;
  border-radius: 16px;
  box-shadow: var(--shadow-light);
  display: flex;
  flex-direction: column;
  transition: var(--transition-smooth);
  border: 1px solid rgba(0, 0, 0, 0.04);
}

.feature-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-medium);
}

.feature-card .card-content {
  flex: 1;
  padding: 24px;
}

.feature-card .card-footer {
  margin-top: auto;
}

/* Improved section spacing */
section {
  padding: 5rem 0;
}

/* Enhanced Button styling */
.btn-outline-blue {
  color: var(--primary);
  border: 2px solid var(--primary);
  background-color: transparent;
  transition: var(--transition-bounce);
  font-weight: 600;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}

.btn-outline-blue::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.btn-outline-blue:hover::before {
  left: 100%;
}

.btn-outline-blue:hover {
  background: linear-gradient(135deg, var(--primary) 0%, #1565c0 100%);
  border-color: var(--primary);
  color: white;
  transform: translateY(-4px);
  box-shadow: 0 8px 25px rgba(13, 71, 161, 0.3);
}

/* Enhanced Image styling */
.img-cover {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: var(--transition-smooth);
}

.content-card:hover .img-cover {
  transform: scale(1.05);
}

.circular-image {
  overflow: hidden;
  border-radius: 50%;
  box-shadow: var(--shadow-medium);
  transition: var(--transition-smooth);
}

.circular-image:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-heavy);
}

.circular-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: var(--transition-smooth);
}

/* Enhanced Mobile app callout */
.mobile-app-callout {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-left: 4px solid var(--primary);
  padding: 20px;
  margin: 24px 0;
  border-radius: 0 12px 12px 0;
  box-shadow: var(--shadow-light);
}

.how-it-works-step {
  position: relative;
  padding-left: 70px;
  margin-bottom: 40px;
}

.step-number {
  position: absolute;
  left: 0;
  top: 0;
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, var(--primary) 0%, #1565c0 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 1.3rem;
  box-shadow: var(--shadow-medium);
  transition: var(--transition-smooth);
}

.how-it-works-step:hover .step-number {
  transform: scale(1.1);
  box-shadow: var(--shadow-heavy);
}

/* Enhanced device mockup */
.device-mockup {
  position: relative;
  max-width: 320px;
  margin: 0 auto;
  border-radius: 40px;
  padding: 14px;
  background: linear-gradient(145deg, #2c3e50, #34495e);
  box-shadow: var(--shadow-heavy);
  transition: var(--transition-smooth);
}

.device-mockup:hover {
  transform: translateY(-8px) rotateY(5deg);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
}

.device-screen {
  border-radius: 28px;
  overflow: hidden;
  position: relative;
  background: #000;
}

.device-screen img {
  width: 100%;
  display: block;
  border-radius: 28px;
}

.device-notch {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 35%;
  height: 28px;
  background: linear-gradient(145deg, #2c3e50, #34495e);
  border-radius: 0 0 18px 18px;
  z-index: 2;
}

/* How it works section centering */
.how-it-works .row {
  display: flex;
  align-items: center;
  justify-content: center;
}

.how-it-works-content {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.how-it-works-content h2,
.how-it-works-content p.lead {
  text-align: center;
  width: 100%;
}

/* Connect with the Past section styling */
.vision-section .row {
  display: flex;
  align-items: center;
  justify-content: center;
}

.vision-text {
  text-align: center;
}

.vision-text h2 {
  margin-left: auto;
  margin-right: auto;
}

.vision-text p {
  margin-left: auto;
  margin-right: auto;
  max-width: 800px;
  line-height: 1.7;
}

/* Hero buttons */
.hero-buttons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 16px;
}

.hero-btn {
  display: inline-block;
  text-align: center;
  transition: var(--transition-bounce);
}

.hero-btn:hover {
  transform: translateY(-4px);
}

/* Featured location image styling */
.location-image-container {
  position: relative;
  width: 100%;
  padding-top: 100%;
  overflow: hidden;
  border-radius: 16px 16px 0 0;
}

.location-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: var(--transition-smooth);
}

/* Enhanced icon circles */
.icon-circle {
  transition: var(--transition-bounce);
}

.icon-circle:hover {
  transform: scale(1.1) rotate(5deg);
}

/* Enhanced badges */
.badge {
  font-weight: 600;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  body {
    font-size: 16px;
  }
  
  section {
    padding: 4rem 0;
  }
  
  .hero {
    min-height: 600px;
  }
  
  .hero-text h1 {
    font-size: 2.5rem;
  }
  
  .hero-text p {
    font-size: 1.2rem;
  }
  
  .display-4 {
    font-size: 2.5rem;
  }
  
  .hero-buttons {
    flex-direction: row;
    justify-content: center;
    gap: 12px;
    width: 100%;
    padding: 0 15px;
  }
  
  .hero-btn {
    width: auto;
    margin-right: 0 !important;
  }
  
  .lead {
    font-size: 1.2rem;
  }
  
  p, .text-muted {
    font-size: 1rem;
  }
  
  .device-mockup {
    max-width: 280px;
  }
  
  .how-it-works-step {
    padding-left: 60px;
  }
  
  .step-number {
    width: 45px;
    height: 45px;
  }
  
  .how-it-works-content h2,
  .how-it-works-content p.lead {
    text-align: center;
  }
  
  .circular-image {
    width: 280px !important;
    height: 280px !important;
    margin-bottom: 2rem;
  }
  
  .vision-text {
    padding: 2rem !important;
  }
  
  .community-section .d-flex {
    margin-bottom: 2rem !important;
  }
  
  .community-section .icon-circle {
    min-width: 45px !important;
    height: 45px !important;
  }
}

@media (max-width: 576px) {
  body {
    font-size: 16px;
  }
  
  .hero {
    min-height: 550px;
  }
  
  .hero-text h1 {
    font-size: 2.2rem;
  }
  
  .hero-text p {
    font-size: 1.1rem;
  }
  
  .display-4 {
    font-size: 2.2rem;
  }
  
  .lead {
    font-size: 1.1rem;
  }
  
  .d-flex.justify-content-center.flex-wrap {
    gap: 10px;
    padding: 0 10px;
  }
  
  .btn {
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
  
  .device-mockup {
    max-width: 240px;
  }
  
  .circular-image {
    width: 240px !important;
    height: 240px !important;
  }
  
  .vision-text h2 {
    font-size: 2rem;
  }
  
  .content-card .content-image {
    min-height: 200px !important;
  }
  
  .photo-collage .collage-grid {
    height: 300px !important;
  }
}

/* Additional professional enhancements */
.bg-light {
  background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%) !important;
}

.bg-primary {
  background: linear-gradient(135deg, var(--primary) 0%, #1565c0 100%) !important;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Focus styles for accessibility */
*:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* Loading animation for images */
img {
  transition: opacity 0.3s ease;
}

img[loading="lazy"] {
  opacity: 0;
}

img[loading="lazy"].loaded {
  opacity: 1;
}
</style>
</head>

<body>
<!-- Utility Bar -->
<div class="utility-bar">
  <div class="container">
    <nav class="utility-nav">
      <a href="/donate.html">Donate</a>
      <span class="separator">|</span>
      <a href="/news.html">News</a>
      <span class="separator">|</span>
      <a href="/upcoming_events.html">Upcoming Events</a>
      <span class="separator">|</span>
      <a href="/login.html" class="login-icon" aria-label="Login">
        <i class="fas fa-user"></i>
      </a>
    </nav>
  </div>
</div>

<header class="mnthen-header">
<div class="mnthen-header-container">
<a href="/" class="mnthen-logo">
  <img src="https://www.mnthen.com/images/logo.webp" alt="Minnesota Then Logo" class="mnthen-logo-img"/> 
  Minnesota Then
</a>

<button class="mnthen-mobile-menu" aria-label="Toggle menu">
  <span></span>
  <span></span>
  <span></span>
</button>

<nav class="mnthen-nav">
  <ul class="mnthen-nav-list">
    <li class="mnthen-nav-item">
      <button class="mnthen-dropdown-btn">
        Who We Are
        <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>
      <div class="mnthen-dropdown-content">
        <a href="https://mnthen.com/mission.html">Mission</a>
        <a href="https://mnthen.com/ourteam.html">Our Team</a>
        <a href="https://mnthen.com/contact">Contact</a>
      </div>
    </li>
    <li class="mnthen-nav-item">
      <button class="mnthen-dropdown-btn">
        Media
        <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>
      <div class="mnthen-dropdown-content">
        <a href="https://mnthen.com/blog.html">Blog</a>
        <a href="https://www.youtube.com/@mnthen" target="_blank" rel="noreferrer">YouTube</a>
        <a href="https://mnthen.com/podcast.html">Podcast</a>
      </div>
    </li>
    <li class="mnthen-nav-item">
      <button class="mnthen-dropdown-btn">
        Resources
        <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>
      <div class="mnthen-dropdown-content">
        <a href="https://mnthen.com/faq.html">Help Center</a>
        <a href="https://mnthen.com/upcoming_events.html">Upcoming Events</a>
        <a href="https://mnthen.com/resources.html">Research Tools</a>
      </div>
    </li>
    <li class="mnthen-nav-item">
      <button class="mnthen-dropdown-btn">
        Get Involved
        <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>
      <div class="mnthen-dropdown-content">
        <a href="https://www.patreon.com/mnthen" target="_blank" rel="noreferrer">Join Our Patreon</a>
        <a href="https://mnthen.com/markers.html">Share Your Story</a>
        <a href="https://mnthen.com/trivia.html">Play Trivia Games</a> 
      </div>
    </li>
    <li class="mnthen-nav-item">
      <a href="/login.html" class="mnthen-login-btn">Sign Up | Login</a>
    </li>
  </ul>
</nav>
</div>
</header>

<!-- Hero Section -->
<section class="hero position-relative" role="img" aria-label="Hero section showcasing Minnesota's history">
   <div class="hero-content position-absolute w-100 h-100 d-flex flex-column justify-content-center align-items-center text-center">
       <div class="hero-text text-white">
           <h1 class="display-3 fw-bold mb-4">Minnesota's Digital Local History Museum</h1>
           <p class="fs-4 mb-5 px-3">Experience our Museum Without Walls — where history comes alive at the exact locations where it happened.</p>
           <div class="hero-buttons">
              <a href="https://mnthen.com/mnthen_welcome.html" class="btn btn-outline-light btn-lg px-4 py-3 rounded-pill hero-btn" style="width: 220px; white-space: nowrap;" aria-label="Enter the Museum Without Walls">Enter</a>
              <a href="https://mnthen.com/works.html" class="btn btn-light btn-lg px-4 py-3 rounded-pill hero-btn" style="width: 220px; white-space: nowrap;" aria-label="Learn how the Museum Without Walls works">How It Works</a>
           </div>
       </div>
   </div>
   <div class="hero-image">
       <img src="https://www.mnthen.com/images/index/index_1.jpg" alt="Scenic view of Minnesota" class="img-fluid w-100" loading="lazy">
   </div>
   <div class="overlay position-absolute w-100 h-100"></div>
   <!-- Citation Icon -->
   <button class="citation-icon btn btn-sm text-white border-0" id="citationIcon" aria-label="View image citation" data-bs-toggle="tooltip" data-bs-placement="top" title="View Image Citation">
       <i class="fas fa-info-circle fs-5"></i>
   </button>
</section>

<!-- Citation Modal -->
<div class="modal fade" id="citationModal" tabindex="-1" aria-labelledby="citationModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="citationModalLabel">Image Citation</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
  </div>
  <div class="modal-body">
    <p>Image source: <a href="https://www.mprnews.org/story/2018/05/02/photographer-captures-the-day-downtown-st-paul-died" target="_blank" rel="noopener noreferrer">MPR News</a></p>
    <p>Photographer: Jerry Mathiason</p>
    <p>Description: A view of the historic retail along West Seventh Street, near what is now the Xcel Energy Center (1978)</p>
  </div>
</div>
</div>
</div>

<!-- Museum Without Walls Intro Section -->
<section class="museum-intro py-5" aria-label="What is a Museum Without Walls">
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-10 text-center fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">What is a Museum Without Walls?</h2>
      <p class="lead mb-4">Minnesota Then is reimagining how we experience local history by bringing the museum to you — right where history happened.</p>
      <div class="row justify-content-center mt-5">
        <div class="col-md-4 mb-4 mb-md-0">
          <div class="icon-circle mb-4 d-flex align-items-center justify-content-center mx-auto" style="width: 90px; height: 90px; background-color: rgba(192, 57, 43, 0.1); border-radius: 50%;">
            <i class="fas fa-map-marked-alt fa-2x" style="color: #C0392B;" aria-hidden="true"></i>
          </div>
          <h3 class="h5 fw-bold">Location-Based</h3>
          <p class="text-muted">Our exhibits exist at the exact locations where history happened, not in a building.</p>
        </div>
        <div class="col-md-4 mb-4 mb-md-0">
          <div class="icon-circle mb-4 d-flex align-items-center justify-content-center mx-auto" style="width: 90px; height: 90px; background-color: rgba(39, 174, 96, 0.1); border-radius: 50%;">
            <i class="fas fa-mobile-alt fa-2x" style="color: #27AE60;" aria-hidden="true"></i>
          </div>
          <h3 class="h5 fw-bold">Mobile-First</h3>
          <p class="text-muted">Your smartphone becomes your personal guide to Minnesota's rich history.</p>
        </div>
        <div class="col-md-4">
          <div class="icon-circle mb-4 d-flex align-items-center justify-content-center mx-auto" style="width: 90px; height: 90px; background-color: rgba(41, 128, 185, 0.1); border-radius: 50%;">
            <i class="fas fa-clock fa-2x" style="color: #2980B9;" aria-hidden="true"></i>
          </div>
          <h3 class="h5 fw-bold">Always Open</h3>
          <p class="text-muted">Visit any time, day or night, all year round — history is always available.</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Mobile App Callout -->
  <div class="row justify-content-center mt-4">
    <div class="col-lg-10">
      <div class="mobile-app-callout fade-in">
        <div class="d-flex align-items-center">
          <i class="fas fa-info-circle me-3" style="color: #0D47A1; font-size: 28px;"></i>
          <p class="mb-0 fw-medium"><strong>Important:</strong> Our GIS web app is accessible on mobile devices. For the full experience, you must travel to the historic sites using your smartphone or tablet.</p>
        </div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- How It Works Section -->
<section class="how-it-works py-5 bg-light" aria-label="How the Museum Without Walls works">
<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-10 text-center mb-5 fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">How Our Museum Works</h2>
      <p class="lead mb-4">See history where it actually happened with our innovative GIS-powered platform.</p>
    </div>
  </div>
  
  <div class="row justify-content-center align-items-center">
    <div class="col-lg-5 mb-5 mb-lg-0 fade-in">
      <div class="how-it-works-content">
        <div class="how-it-works-step">
          <div class="step-number">1</div>
          <h3 class="h5 fw-bold">Open the Web App</h3>
          <p>Start by opening our web app on your smartphone to see all available historic sites on the interactive map.</p>
        </div>
        
        <div class="how-it-works-step">
          <div class="step-number">2</div>
          <h3 class="h5 fw-bold">Visit a Historic Location</h3>
          <p>Travel to any of our marked historic sites across Minnesota. Your GPS location is key to unlocking the content.</p>
        </div>
        
        <div class="how-it-works-step">
          <div class="step-number">3</div>
          <h3 class="h5 fw-bold">Explore the Exhibit</h3>
          <p>Immerse yourself in rich multimedia content including historic photos, audio narration, and interactive elements.</p>
        </div>
        
        <div class="text-center w-100 mt-5">
          <a href="https://mnthen.com/mnthen_welcome.html" class="btn btn-outline-blue btn-lg px-4 py-2 rounded-pill" aria-label="Start exploring the Museum Without Walls">
            Start Exploring
            <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </div>
    
    <div class="col-lg-5 text-center fade-in" style="animation-delay: 0.2s">
      <div class="device-mockup">
        <div class="device-notch"></div>
        <div class="device-screen">
          <img src="/images/mobileex.png" alt="Minnesota Then mobile app" class="img-fluid">
        </div>
      </div>
      <p class="text-muted mt-3 fw-medium"><small>The Minnesota Then web app on a mobile device</small></p>
    </div>
  </div>
</div>
</section>

<!-- Featured Exhibits Section -->
<section class="featured-exhibits py-5" aria-label="Featured exhibits">
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">Featured Historical Locations</h2>
      <p class="lead">Discover some of our most popular location-based exhibits across Minnesota</p>
    </div>
  </div>
  
  <!-- Dynamic location cards will be inserted here -->
  <div class="row g-4" id="featured-locations-container">
    <!-- Content will be dynamically generated by JavaScript -->
  </div>
</div>
</section>

<!-- Vision Section - Updated with subheadline -->
<section class="vision-section py-5 bg-light" aria-label="Connect with the past">
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">Connect with the Past</h2>
      <p class="lead mb-4">Experience how local history enriches our understanding of every day places</p>
    </div>
  </div>
  
  <div class="row justify-content-center align-items-center">
    <div class="col-lg-4 mb-4 mb-lg-0 text-center fade-in">
      <div class="circular-image mx-auto" style="width: 320px; height: 320px;">
        <img src="https://www.mnthen.com/images/index/vision_header.jpg" alt="Minnehaha Creek before the Falls" loading="lazy">
      </div>
    </div>
    <div class="col-lg-7 fade-in" style="animation-delay: 0.2s">
      <div class="vision-text p-4">
        <p class="lead mb-4 text-start">
          History isn't just something read about in books—it's all around us, in the places we visit every day. Like the coffee shop where activists once gathered, or the lakeside path where Indigenous families fished for generations. Or even that quiet street corner where kids played ball in the summer. Each place is full of stories, rich with memories. Every moment has meaning; every step tells a story.
        </p>
        <div class="text-center mt-4">
          <a href="/mission.html" class="btn btn-outline-blue btn-lg px-4 py-2 rounded-pill" aria-label="Learn why history matters">
            Why It Matters
            <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- Additional Features Section -->
<section class="additional-features py-5" aria-label="Additional features">
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">More Ways to Experience Minnesota History</h2>
      <p class="lead">Beyond our Museum Without Walls, we offer multiple ways to engage with Minnesota's rich past</p>
    </div>
  </div>
  
  <div class="row g-4">
    <!-- Blog Feature Card -->
    <div class="col-lg-6 fade-in">
      <div class="content-card h-100 shadow-sm rounded overflow-hidden">
        <div class="row g-0 h-100">
          <div class="col-md-6">
            <div class="content-image h-100 position-relative">
              <img src="https://www.mnthen.com/images/molter.jpg?height=400&width=300" alt="MNThen Blog" class="img-cover w-100 h-100" style="min-height: 300px; object-fit: cover;">
              <div class="position-absolute top-0 start-0 m-3">
                <span class="badge bg-primary rounded-pill px-3 py-2 fw-medium">Our Stories</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 d-flex flex-column">
            <div class="content-text p-4 flex-grow-1">
              <div class="mb-3">
                <div class="d-flex align-items-center">
                  <div class="icon-box me-3 d-flex align-items-center justify-content-center rounded-circle" style="width: 48px; height: 48px; background-color: rgba(13, 71, 161, 0.1);">
                    <i class="fas fa-book-open" style="color: #0D47A1; font-size: 20px;" aria-hidden="true"></i>
                  </div>
                  <h3 class="h4 fw-bold mb-0">MNThen Blog</h3>
                </div>
              </div>
              <p class="mb-4">Dive into Minnesota's rich history with our curated collection of in-depth articles exploring the people, places, and events that shaped our state.</p>
            </div>
            <div class="p-4 pt-0 mt-auto">
              <a href="https://www.mnthen.com/blog.html" class="btn btn-outline-primary rounded-pill px-4" aria-label="Read more on the MNThen Blog">
                Read More
                <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Trivia Feature Card -->
    <div class="col-lg-6 fade-in" style="animation-delay: 0.2s">
      <div class="content-card h-100 shadow-sm rounded overflow-hidden">
        <div class="row g-0 h-100">
          <div class="col-md-6">
            <div class="content-image h-100 position-relative">
              <img src="/images/dottie.jpg" alt="Minnesota History Trivia" class="img-cover w-100 h-100" style="min-height: 300px; object-fit: cover;">
              <div class="position-absolute top-0 start-0 m-3">
                <span class="badge bg-primary rounded-pill px-3 py-2 fw-medium">Test Your Knowledge</span>
              </div>
            </div>
          </div>
          <div class="col-md-6 d-flex flex-column">
            <div class="content-text p-4 flex-grow-1">
              <div class="mb-3">
                <div class="d-flex align-items-center">
                  <div class="icon-box me-3 d-flex align-items-center justify-content-center rounded-circle" style="width: 48px; height: 48px; background-color: rgba(13, 71, 161, 0.1);">
                    <i class="fas fa-trophy" style="color: #0D47A1; font-size: 20px;" aria-hidden="true"></i>
                  </div>
                  <h3 class="h4 fw-bold mb-0">Minnesota Trivia</h3>
                </div>
              </div>
              <p class="mb-4">Challenge yourself with engaging quizzes covering landmarks, famous Minnesotans, gangsters, and sports stars from our state's colorful history.</p>
            </div>
            <div class="p-4 pt-0 mt-auto">
              <a href="https://www.mnthen.com/trivia.html" class="btn btn-outline-primary rounded-pill px-4" aria-label="Start playing Minnesota History Trivia">
                Play Now
                <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- Community Engagement Section -->
<section class="community-section py-5 bg-light" aria-label="Community engagement">
<div class="container">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center fade-in">
      <h2 class="display-4 fw-bold mb-4" style="color: #0D47A1">Join Our Community</h2>
      <p class="lead">Minnesota Then is more than just a digital museum — we're a community of history enthusiasts dedicated to preserving and sharing our state's rich heritage.</p>
    </div>
  </div>
  
  <div class="row justify-content-center align-items-center">
    <div class="col-lg-6 fade-in">
      <div class="d-flex align-items-start mb-4">
        <div class="icon-circle me-3 d-flex align-items-center justify-content-center" style="min-width: 55px; height: 55px; background-color: rgba(13, 71, 161, 0.1); border-radius: 50%;">
          <i class="fas fa-users fa-lg" style="color: #0D47A1;" aria-hidden="true"></i>
        </div>
        <div>
          <h3 class="h5 fw-bold">Share Your Stories</h3>
          <p class="text-muted">Contribute your family's history or memories of historic events to our growing archive.</p>
        </div>
      </div>
      
      <div class="d-flex align-items-start mb-4">
        <div class="icon-circle me-3 d-flex align-items-center justify-content-center" style="min-width: 55px; height: 55px; background-color: rgba(13, 71, 161, 0.1); border-radius: 50%;">
          <i class="fas fa-calendar-alt fa-lg" style="color: #0D47A1;" aria-hidden="true"></i>
        </div>
        <div>
          <h3 class="h5 fw-bold">Attend Events</h3>
          <p class="text-muted">Join us for guided tours, lectures, and community gatherings focused on local history.</p>
        </div>
      </div>
      
      <div class="d-flex align-items-start">
        <div class="icon-circle me-3 d-flex align-items-center justify-content-center" style="min-width: 55px; height: 55px; background-color: rgba(13, 71, 161, 0.1); border-radius: 50%;">
          <i class="fas fa-hand-holding-heart fa-lg" style="color: #0D47A1;" aria-hidden="true"></i>
        </div>
        <div>
          <h3 class="h5 fw-bold">Support Our Mission</h3>
          <p class="text-muted">Help us expand our digital museum through donations or by becoming a Patreon supporter.</p>
        </div>
      </div>
      
      <div class="mt-4 text-center text-lg-start">
        <a href="https://mnthen.com/markers.html" class="btn btn-outline-blue btn-lg px-4 py-2 rounded-pill me-3 mb-3 mb-md-0" aria-label="Share your story">
          Share Your Story
        </a>
        <a href="https://www.patreon.com/mnthen" target="_blank" rel="noreferrer" class="btn btn-outline-blue btn-lg px-4 py-2 rounded-pill" aria-label="Join our Patreon">
          Join Our Patreon
        </a>
      </div>
    </div>
    
    <div class="col-lg-6 mt-5 mt-lg-0 fade-in" style="animation-delay: 0.2s">
      <div class="photo-collage p-3 bg-white shadow-sm rounded">
        <div class="collage-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 1fr); gap: 12px; height: 420px;">
          <div class="collage-item" style="grid-column: 1 / 3; grid-row: 1 / 2; overflow: hidden; border-radius: 12px;">
            <img src="/images/index/mapone.jpg" alt="Minnesota historical site 1" class="img-cover" loading="lazy">
          </div>
          <div class="collage-item" style="grid-column: 3 / 4; grid-row: 1 / 3; overflow: hidden; border-radius: 12px;">
            <img src="/images/index/maptwo.jpg" alt="Minnesota historical site 2" class="img-cover" loading="lazy">
          </div>
          <div class="collage-item" style="grid-column: 1 / 2; grid-row: 2 / 3; overflow: hidden; border-radius: 12px;">
            <img src="/images/index/mapthree.jpg" alt="Minnesota historical site 3" class="img-cover" loading="lazy">
          </div>
          <div class="collage-item" style="grid-column: 2 / 3; grid-row: 2 / 3; overflow: hidden; border-radius: 12px;">
            <img src="/images/index/mapfour.jpg" alt="Minnesota historical site 4" class="img-cover" loading="lazy">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</section>

<!-- Footer -->
<footer class="footer bg-primary py-5"> 
<div class="container">
  <div class="row g-4 mb-4">
      <div class="col-lg-3 col-md-6 pt-3">
          <h3 class="footer-brand mb-3">
              <span class="text-white">Minnesota</span>
              <span class="text-navy">Then</span>
          </h3>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Who We Are</h5>
          <ul class="list-unstyled footer-links">
              <li><a href="/about.html">About Us</a></li>
              <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
          </ul>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">What We Do</h5>
          <ul class="list-unstyled footer-links">
              <li><a href="https://mnthen.com/blog.html">Blog</a></li>
              <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
              <li><a href="/upcoming_events.html">Upcoming Events</a></li>
          </ul>
      </div>
      <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Resources</h5>
          <ul class="list-unstyled footer-links">
              <a href="https://github.com/mreicher/MNThen/" target="_blank" rel="noopener noreferrer">GitHub</a>
              <li><a href="/faq.html">Help Center</a></li>
              <li><a href="/resources.html">Research Tools</a></li>
          </ul>
      </div>
      <div class="col-lg-3 col-md-6 pt-3">
          <p class="tagline">Every Step Tells a Story</p>
      </div>
  </div>
  <hr class="footer-divider">
  <div class="row align-items-center">
<div class="col-md-4 text-center text-md-start">
<small style="color: white;">&copy; 2025 Minnesota Then. All rights reserved</small>
</div>
       <div class="col-md-8">
           <div class="social-icons text-center text-md-end">
               <span class="me-2" style="color: white;">Connect:</span>
               <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fab fa-facebook-f"></i>
               </a>
               <span class="mx-2 text-white">|</span>
               <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fa-brands fa-bluesky"></i>
               </a>
               <span class="mx-2 text-white">|</span>
               <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white" rel="noreferrer">
                   <i class="fab fa-linkedin-in"></i>
               </a>
           </div>
       </div>
  </div>
</div>
</footer>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>

<!-- Main JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  initializeDropdowns(); // Initialize dropdowns
  initializeCitationModal(); // Initialize citation modal
  initializeGoogleAnalytics(); // Initialize Google Analytics
  initializeAnimations(); // Initialize scroll animations
  loadFeaturedLocations(); // Load featured locations dynamically
  initializeImageLoading(); // Initialize lazy loading
});

function initializeDropdowns() {
  const mobileMenu = document.querySelector('.mnthen-mobile-menu');
  const nav = document.querySelector('.mnthen-nav');
  const dropdownBtns = document.querySelectorAll('.mnthen-dropdown-btn');

  // Toggle mobile menu and nav
  mobileMenu?.addEventListener('click', function (e) {
    e.stopPropagation();
    this.classList.toggle('active');
    nav.classList.toggle('active');
  });

  // Handle dropdown toggling
  const handleDropdown = function (e) {
    e.stopPropagation();
    e.preventDefault();
    const dropdownContent = this.nextElementSibling;

    // Close all other dropdowns
    document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
      if (dropdown !== dropdownContent) {
        dropdown.classList.remove('active');
      }
    });

    // Toggle the clicked dropdown
    dropdownContent.classList.toggle('active');
  };

  // Add event listeners to dropdown buttons
  dropdownBtns.forEach(btn => {
    btn.addEventListener('click', handleDropdown);
    btn.addEventListener('touchstart', handleDropdown, { passive: false });
  });

  // Close dropdowns and mobile menu when clicking outside
  const closeDropdownsAndMenu = function (e) {
    if (!e.target.closest('.mnthen-dropdown-content') && !e.target.closest('.mnthen-dropdown-btn')) {
      document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
        dropdown.classList.remove('active');
      });
      if (nav) nav.classList.remove('active');
      if (mobileMenu) mobileMenu.classList.remove('active');
    }
  };

  document.addEventListener('click', closeDropdownsAndMenu);
  document.addEventListener('touchend', closeDropdownsAndMenu);

  // Close dropdowns and mobile menu on window resize (desktop view)
  window.addEventListener('resize', function () {
    if (window.innerWidth > 768) {
      if (nav) nav.classList.remove('active');
      if (mobileMenu) mobileMenu.classList.remove('active');
      document.querySelectorAll('.mnthen-dropdown-content').forEach(dropdown => {
        dropdown.classList.remove('active');
      });
    }
  });

  // Close dropdowns and mobile menu when clicking on a link inside the dropdown
  document.querySelectorAll('.mnthen-dropdown-content a').forEach(link => {
    link.addEventListener('click', function () {
      const dropdownContent = this.closest('.mnthen-dropdown-content');
      if (dropdownContent) {
        dropdownContent.classList.remove('active');
      }
      if (nav) nav.classList.remove('active');
      if (mobileMenu) mobileMenu.classList.remove('active');
    });
  });
}

function initializeCitationModal() {
  const citationIcon = document.getElementById('citationIcon');
  const citationModal = document.getElementById('citationModal');
  const closeButton = citationModal?.querySelector('.btn-close');

  // Show modal
  const showModal = function () {
    citationModal?.classList.add('show');
    citationModal.style.display = 'block';
    citationModal.setAttribute('aria-hidden', 'false');
    document.body.classList.add('modal-open');

    const backdrop = document.createElement('div');
    backdrop.className = 'modal-backdrop fade show';
    document.body.appendChild(backdrop);
  };

  // Hide modal
  const hideModal = function () {
    citationModal?.classList.remove('show');
    citationModal.style.display = 'none';
    citationModal.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('modal-open');

    const backdrop = document.querySelector('.modal-backdrop');
    backdrop?.remove();
  };

  // Event listeners for modal
  citationIcon?.addEventListener('click', showModal);
  closeButton?.addEventListener('click', hideModal);

  citationModal?.addEventListener('click', function (event) {
    if (event.target === citationModal) {
      hideModal();
    }
  });

  document.addEventListener('keydown', function (event) {
    if (event.key === 'Escape' && citationModal?.classList.contains('show')) {
      hideModal();
    }
  });
}

function initializeAnimations() {
  // Intersection Observer for fade-in animations
  const fadeElements = document.querySelectorAll('.fade-in');
  
  const fadeObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        fadeObserver.unobserve(entry.target); // Stop observing once visible
      }
    });
  }, {
    root: null,
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });
  
  fadeElements.forEach(element => {
    fadeObserver.observe(element);
  });
}

function initializeImageLoading() {
  // Enhanced lazy loading for images
  const images = document.querySelectorAll('img[loading="lazy"]');
  
  const imageObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.addEventListener('load', () => {
          img.classList.add('loaded');
        });
        imageObserver.unobserve(img);
      }
    });
  });
  
  images.forEach(img => {
    imageObserver.observe(img);
  });
}

function initializeGoogleAnalytics() {
  if (navigator.doNotTrack === "1") {
    return;
  }
  
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-0M8KR45LDB');
}

function loadFeaturedLocations() {
  const featuredLocationsContainer = document.getElementById('featured-locations-container');
  const locations = [
    {
      title: "Michael 'Eyedea' Larsen",
      description: "Stand at the memorial of gifted Twin Cities hip-hop artist 'Eyedea' Larsen (1981-2010) and learn about his life and musical legacy.",
      location: "Cherokee Park",
      imageUrl: "https://mnthen.com/images/wsp_eyedea.webp",
      city: "St. Paul"
    },
    {
      title: "Northfield Bank Raid",
      description: "Visit the site of the 1876 bank raid and learn how the townspeople rose up against the notorious James-Younger Gang.",
      location: "First National Bank of Northfield",
      imageUrl: "https://mnthen.com/images/northfield.jpg",
      city: "Northfield"
    },
    {
      title: "St. Croix Boom Site",
      description: "Visit the St. Croix Boom Site where rushing waters once powered Minnesota's legendary logging empire.",
      location: "St. Croix Boom Site",
      imageUrl: "https://mnthen.com/images/boom1.jpg",
      city: "Stillwater"
    }
  ];

  // Display all three locations without randomization
  locations.forEach((location, index) => {
    const card = document.createElement('div');
    card.className = 'col-md-4 fade-in';
    card.style.animationDelay = `${0.1 + index * 0.1}s`;

    card.innerHTML = `
      <div class="content-card h-100 shadow-sm">
        <div class="location-image-container">
          <img src="${location.imageUrl}" alt="${location.title}" class="location-image" loading="lazy">
          <div class="position-absolute top-0 start-0 m-3">
            <span class="badge bg-primary rounded-pill px-3 py-2 fw-medium">${location.city}</span>
          </div>
        </div>
        <div class="card-content p-4">
          <h3 class="h5 fw-bold mb-3">${location.title}</h3>
          <p class="mb-4">${location.description}</p>
          <div class="location-info">
            <div class="d-flex align-items-center">
              <i class="fas fa-map-marker-alt me-2" style="color: #0D47A1;"></i>
              <small class="text-muted fw-medium">${location.location}</small>
            </div>
          </div>
        </div>
      </div>
    `;

    featuredLocationsContainer.appendChild(card);
  });

  // Re-initialize animations for the newly added elements
  initializeAnimations();
}

// Enhanced scroll behavior
window.addEventListener('scroll', function() {
  const header = document.querySelector('.mnthen-header');
  if (window.scrollY > 100) {
    header.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
  } else {
    header.style.boxShadow = '0 2px 15px rgba(0, 0, 0, 0.08)';
  }
});
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-0M8KR45LDB"></script>
  
</body>
</html>
