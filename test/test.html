<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Gangster Tour - Museum Without Walls</title>
  <link rel="shortcut icon" type="image/x-icon" href="/images/mnthenfav.ico">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- SEO Meta Tags -->
  <meta name="description" content="Explore Minnesota's gangster history with the Museum Without Walls. Discover historic locations, take self-guided tours, and experience history like never before.">
  <meta name="keywords" content="Minnesota gangsters, Museum Without Walls, self-guided tours, historic locations, Minnesota landmarks, prohibition era">
  <meta name="author" content="Minnesota Then">
  <meta property="og:title" content="Gangster Tour - Museum Without Walls">
  <meta property="og:description" content="Explore Minnesota's gangster history with the Museum Without Walls. Discover historic locations, take self-guided tours, and experience history like never before.">
  <meta property="og:image" content="https://www.mnthen.com/images/gangster/mccord/gangster_mccord_3.jpg">
  <meta property="og:url" content="https://www.mnthen.com/gangster-tour.html">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://www.mnthen.com/gangster-tour.html">

  <style>
    :root {
      --primary-dark: #1a1a1a;
      --accent-gold: #d4af37;
      --accent-green: #1e5631;
      --accent-green-light: #2e7d32;
      --text-dark: #000000;
      --text-medium: #333333;
      --text-light: #666666;
      --bg-white: #ffffff;
      --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.12);
      --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.16);
      --shadow-popup: 0 20px 60px rgba(0, 0, 0, 0.3);
      --border-radius: 12px;
      --font-heading: 'Playfair Display', serif;
      --font-body: 'Montserrat', sans-serif;
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    html, body { height: 100%; width: 100%; font-family: var(--font-body); overflow: hidden; background-color: #000; }

    /* ===== HERO SECTION ===== */
    .hero {
      position: relative;
      width: 100%;
      height: 100vh;
      height: 100dvh;
      display: none;
      background: #000;
    }
    .hero.active { display: block; }
    .hero-background {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.4) contrast(1.1);
    }
    .hero-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      padding-top: calc(20px + var(--safe-top));
      padding-bottom: calc(20px + var(--safe-bottom));
    }
    .hero-content {
      background: var(--bg-white);
      border-radius: var(--border-radius);
      padding: 36px 28px;
      width: 100%;
      max-width: 480px;
      box-shadow: var(--shadow-heavy);
      text-align: center;
    }
    .hero-header {
      border-bottom: 3px solid var(--accent-green);
      padding-bottom: 20px;
      margin-bottom: 28px;
    }
    .hero-title {
      font-family: var(--font-heading);
      font-size: 36px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 8px;
    }
    .hero-subtitle {
      font-family: var(--font-heading);
      font-size: 18px;
      color: var(--text-light);
      font-style: italic;
    }
    .features {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      margin-bottom: 32px;
    }
    .feature-item {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 10px;
      padding: 18px 10px;
      border: 1px solid #e0e0e0;
    }
    .feature-icon {
      font-size: 36px;
      margin-bottom: 10px;
      display: block;
    }
    .feature-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-medium);
    }

    /* ===== BUTTONS ===== */
    .btn {
      font-family: var(--font-body);
      border: none;
      border-radius: 50px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      transition: opacity 0.2s;
    }
    .btn:active { opacity: 0.9; }
    .btn-primary {
      background: linear-gradient(135deg, var(--accent-green) 0%, var(--accent-green-light) 100%);
      color: white;
      font-weight: 700;
      font-size: 18px;
      padding: 16px 48px;
      box-shadow: var(--shadow-medium);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 14px;
    }
    .btn-secondary {
      background: white;
      color: var(--accent-green);
      font-weight: 600;
      font-size: 16px;
      padding: 13px 32px;
      border: 2px solid var(--accent-green);
    }

    /* ===== SAFETY POPUP ===== */
    .popup-overlay {
      position: fixed;
      inset: 0;
      z-index: 2000;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      padding-top: calc(20px + var(--safe-top));
      padding-bottom: calc(20px + var(--safe-bottom));
    }
    .popup-background {
      position: absolute;
      inset: 0;
      object-fit: cover;
      filter: brightness(0.3) blur(2px);
    }
    .popup-overlay-dark {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }
    .popup-content {
      background: white;
      border-radius: var(--border-radius);
      padding: 40px 32px;
      width: 100%;
      max-width: 500px;
      box-shadow: var(--shadow-popup);
      position: relative;
      z-index: 1;
    }
    .popup-header {
      font-family: var(--font-heading);
      font-size: 32px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 28px;
      padding-bottom: 18px;
      border-bottom: 3px solid var(--accent-green);
    }
    .popup-text {
      font-size: 16px;
      line-height: 1.8;
      color: var(--text-medium);
      margin-bottom: 20px;
    }

    /* Popup button layout */
    .popup-main-actions {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin: 32px auto 24px;
      max-width: 280px;
    }
    .popup-secondary-actions {
      display: flex;
      gap: 14px;
      justify-content: center;
    }
    .popup-secondary-btn {
      flex: 1;
      background: rgba(255, 255, 255, 0.95);
      color: var(--text-dark);
      font-family: var(--font-body);
      font-weight: 600;
      font-size: 15px;
      padding: 15px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: var(--shadow-medium);
      backdrop-filter: blur(10px);
      min-width: 0;
    }

    /* ===== MODALS ===== */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(4px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
      padding-top: calc(20px + var(--safe-top));
      padding-bottom: calc(20px + var(--safe-bottom));
    }
    .modal-overlay.active { display: flex; }
    .modal-content {
      background: white;
      border-radius: var(--border-radius);
      padding: 36px 28px;
      width: 100%;
      max-width: 540px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-heavy);
    }
    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: #f0f0f0;
      border: none;
      border-radius: 50%;
      font-size: 28px;
      color: var(--text-dark);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-header {
      font-family: var(--font-heading);
      font-size: 30px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 20px;
      padding-bottom: 18px;
      border-bottom: 3px solid var(--accent-green);
      padding-right: 40px;
    }

    /* Modal content styles */
    .location-list { list-style: none; margin: 0; padding: 0; }
    .location-item {
      padding: 16px 0;
      border-bottom: 1px solid #e0e0e0;
    }
    .location-item:last-child { border-bottom: none; }
    .location-name {
      font-weight: 600;
      font-size: 17px;
      color: var(--text-dark);
      margin-bottom: 6px;
    }
    .location-date {
      font-size: 14px;
      color: var(--accent-green);
      font-style: italic;
    }

    .help-section { margin-bottom: 32px; }
    .help-section:last-child { margin-bottom: 0; }
    .help-title {
      font-family: var(--font-heading);
      font-size: 22px;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 14px;
    }
    .help-text {
      font-size: 15px;
      line-height: 1.7;
      color: var(--text-medium);
      margin-bottom: 14px;
    }
    .help-tip {
      background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
      border-left: 4px solid var(--accent-green);
      padding: 18px;
      border-radius: 0 8px 8px 0;
      margin-bottom: 18px;
    }

    /* ===== DESKTOP BANNER ===== */
    #desktopBanner {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #ff9800;
      color: #fff;
      text-align: center;
      padding: 12px 16px;
      font-weight: 600;
      font-size: 15px;
      z-index: 9999;
    }
    #desktopBanner a { color: #fff; text-decoration: underline; }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 480px) {
      .hero-content { padding: 32px 24px; }
      .hero-title { font-size: 30px; }
      .popup-content { padding: 36px 28px; max-width: 480px; }
      .popup-header { font-size: 28px; }
      .popup-main-actions { max-width: 260px; }
      .popup-secondary-actions { gap: 10px; }
      .popup-secondary-btn { font-size: 14px; padding: 13px 16px; }
      .modal-content { padding: 32px 24px; }
      .modal-header { font-size: 26px; }
    }

    @media (max-width: 360px) {
      .hero-content { padding: 28px 20px; }
      .hero-title { font-size: 28px; }
      .popup-content { padding: 32px 24px; }
      .popup-header { font-size: 26px; }
      .popup-main-actions { gap: 12px; margin: 28px auto 20px; }
      .popup-secondary-actions { flex-direction: column; gap: 12px; }
      .popup-secondary-btn { width: 100%; }
    }

    @media (max-height: 700px) and (orientation: portrait) {
      .popup-content { padding: 32px 24px; }
      .popup-header { font-size: 28px; margin-bottom: 20px; }
      .popup-text { font-size: 15px; margin-bottom: 16px; }
      .popup-main-actions { gap: 12px; margin: 24px auto 18px; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; }
    }
  </style>
</head>

<body>
  <!-- Desktop warning banner -->
  <div id="desktopBanner">
    This tour is designed for phones & tablets. Some features may not work on desktop.
    <a href="#!" onclick="document.getElementById('desktopBanner').style.display='none'; event.preventDefault();">Hide</a>
  </div>

  <!-- Safety Agreement Popup (shows on first visit) -->
  <div class="popup-overlay" id="safetyPopup">
    <img class="popup-background" src="https://www.mnthen.com/images/gangster/mccord/gangster_mccord_3.jpg" alt="Historic background">
    <div class="popup-overlay-dark"></div>
    <div class="popup-content">
      <h2 class="popup-header">Safety Agreement</h2>
      <p class="popup-text">I will remain cautious, avoid restricted areas, and stay aware of my surroundings, including traffic and pedestrians. I acknowledge that accessing the Gangster Tour while driving is strictly prohibited.</p>
      <p class="popup-text">By agreeing to these terms, I confirm my commitment to using the app responsibly and prioritizing safety at all times.</p>
      
      <div class="popup-main-actions">
        <button class="btn btn-primary" id="agreeBtn">I Agree</button>
        <button class="btn btn-secondary" id="returnBtn">Return to Index</button>
      </div>
      
      <div class="popup-secondary-actions">
        <button class="popup-secondary-btn" id="popupLocationsBtn">Tour Locations</button>
        <button class="popup-secondary-btn" id="popupHelpBtn">Help Guide</button>
      </div>
    </div>
  </div>

  <!-- Main Hero Section (shown after agreement) -->
  <main class="hero" id="mainHero">
    <img class="hero-background" src="https://www.mnthen.com/images/gangster/mccord/gangster_mccord_3.jpg" alt="Historic gangster era street scene">
    <div class="hero-overlay">
      <div class="hero-content">
        <div class="hero-header">
          <h1 class="hero-title">Gangster Chronicles</h1>
          <p class="hero-subtitle">Shadows of a Bygone Era</p>
        </div>
        <div class="features">
          <div class="feature-item">
            <span class="feature-icon">üó∫Ô∏è</span>
            <div class="feature-label">Digital Map</div>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üïµÔ∏è</span>
            <div class="feature-label">Crime Scenes</div>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üéß</span>
            <div class="feature-label">Audio Stories</div>
          </div>
        </div>
        <a href="map.html" class="btn btn-primary">Begin the Tour</a>
        <a href="/index.html" class="btn btn-secondary">Back to Index</a>
      </div>
    </div>
  </main>

  <!-- Tour Locations Modal -->
  <div class="modal-overlay" id="locationsModal">
    <div class="modal-content">
      <button class="modal-close" id="closeLocations">&times;</button>
      <h2 class="modal-header">Tour Locations</h2>
      <p class="modal-text">Explore these historic gangster locations on our tour:</p>
      <ul class="location-list">
        <li class="location-item">
          <div class="location-name">West St. Paul Barker-Karpis Hideout</div>
          <div class="location-date">1932</div>
        </li>
        <li class="location-item">
          <div class="location-name">O'Connor Layover Agreement</div>
          <div class="location-date">St. Paul Police Headquarters</div>
        </li>
        <li class="location-item">
          <div class="location-name">Death of Dan Hogan</div>
          <div class="location-date">December 4, 1928</div>
        </li>
        <li class="location-item">
          <div class="location-name">Shooting of Roy McCord</div>
          <div class="location-date">January 13, 1934</div>
        </li>
      </ul>
    </div>
  </div>

  <!-- Help Guide Modal -->
  <div class="modal-overlay" id="helpModal">
    <div class="modal-content">
      <button class="modal-close" id="closeHelp">&times;</button>
      <h2 class="modal-header">Help Guide</h2>

      <div class="help-section">
        <h3 class="help-title">Getting Started</h3>
        <p class="help-text">Welcome to the Gangster Tour, your digital journey through Minnesota's prohibition-era criminal history.</p>
        <div class="help-tip">
          <strong>Tip:</strong> Click "Begin the Tour" to access the interactive map with all gangster-related historical locations.
        </div>
      </div>

      <div class="help-section" id="desktopHelpSection" style="display:none;">
        <h3 class="help-title">Desktop User?</h3>
        <div class="help-tip">
          <strong>Please note:</strong> This tour is designed for <strong>phones and tablets</strong>. Location check-in, automatic map following and audio cues rely on mobile sensors and may not work on desktop browsers.
        </div>
      </div>

      <div class="help-section">
        <h3 class="help-title">Using the Map</h3>
        <p class="help-text">Our interactive map displays historical locations related to Minnesota's gangster era. Each marker represents a significant location where gangster history unfolded.</p>
      </div>

      <div class="help-section">
        <h3 class="help-title">Safety Guidelines</h3>
        <ul class="help-list">
          <li>Stay aware of your surroundings</li>
          <li>Respect private property</li>
          <li>Never use the app while driving</li>
          <li>Follow all posted signs and regulations</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    // DOM Elements
    const safetyPopup = document.getElementById('safetyPopup');
    const mainHero = document.getElementById('mainHero');
    const locationsModal = document.getElementById('locationsModal');
    const helpModal = document.getElementById('helpModal');

    // Show safety popup on first visit
    if (!sessionStorage.getItem('safetyOk')) {
      safetyPopup.style.display = 'flex';
    } else {
      mainHero.classList.add('active');
    }

    // Safety popup buttons
    document.getElementById('agreeBtn').addEventListener('click', () => {
      sessionStorage.setItem('safetyOk', '1');
      safetyPopup.style.display = 'none';
      mainHero.classList.add('active');
    });

    document.getElementById('returnBtn').addEventListener('click', () => {
      window.location.href = '/index.html';
    });

    document.getElementById('popupLocationsBtn').addEventListener('click', () => {
      openModal(locationsModal);
    });

    document.getElementById('popupHelpBtn').addEventListener('click', () => {
      openModal(helpModal);
    });

    // Modal controls
    function openModal(modal) {
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal(modal) {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    document.getElementById('closeLocations').addEventListener('click', () => {
      closeModal(locationsModal);
    });

    document.getElementById('closeHelp').addEventListener('click', () => {
      closeModal(helpModal);
    });

    // Close modals on outside click
    locationsModal.addEventListener('click', e => {
      if (e.target === locationsModal) closeModal(locationsModal);
    });
    helpModal.addEventListener('click', e => {
      if (e.target === helpModal) closeModal(helpModal);
    });

    // Close modals on Escape key
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        closeModal(locationsModal);
        closeModal(helpModal);
      }
    });

    // Desktop detection
    const isDesktop = !navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i);
    if (isDesktop) {
      document.getElementById('desktopBanner').style.display = 'block';
      document.getElementById('desktopHelpSection').style.display = 'block';
    }
  </script>
</body>
</html>
