<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0M8KR45LDB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-0M8KR45LDB');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minnesota Then | Trivia</title>
  <link rel="shortcut icon" type="image/x-icon" href="https://www.mnthen.com/images/mnthenfav.ico">

  <!-- External Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="https://www.mnthen.com/css/dropdown.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_trivia.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_header.css">
  <link rel="stylesheet" href="https://www.mnthen.com/css/mnthen_footer.css">
  
  <style>
    /* Additional Custom Styles */
    :root {
      --primary-color: #0e3b7d;
      --secondary-color: #d4a017;
      --accent-color: #e63946;
      --light-bg: #f8f9fa;
      --dark-bg: #212529;
      --text-color: #333;
      --light-text: #f8f9fa;
    }
    
    body {
      overflow-x: hidden;
    }
    
    .container-fluid, .container {
      width: 100%;
      padding-right: 15px;
      padding-left: 15px;
      margin-right: auto;
      margin-left: auto;
    }
    
    .section-title {
      color: var(--primary-color);
      font-weight: 700;
      margin-bottom: 1.5rem;
      position: relative;
      display: inline-block;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 50px;
      height: 3px;
      background-color: var(--secondary-color);
    }
    
    .section-subtitle {
      color: #6c757d;
      max-width: 700px;
      margin: 0 auto 2rem;
    }
    
    /* Card Styles */
    .card {
      border: none;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.025);
      height: 100%;
      background-color: white;
    }
    
    .card-img-wrapper {
      position: relative;
      width: 100%;
      padding-top: 56.25%; /* 16:9 Aspect Ratio */
      overflow: hidden;
    }
    
    .card-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
    
    .card-body {
      padding: 1.5rem;
    }
    
    .card-title {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 0.75rem;
    }
    
    .card-text {
      color: #555;
      margin-bottom: 1.25rem;
      line-height: 1.5;
    }
    
    .card-footer {
      padding: 1rem 1.5rem;
      background-color: white;
      border-top: 1px solid rgba(0,0,0,0.05);
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      border: none;
      border-radius: 30px;
      padding: 0.5rem 1.5rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background-color: #0a2e62;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }
    
    /* Featured Game Card */
    .featured-card {
      margin-bottom: 2rem;
    }
    
    .featured-card .card-img-wrapper {
      padding-top: 50%; /* Different aspect ratio for featured */
    }
    
    .featured-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: var(--secondary-color);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 30px;
      font-weight: 600;
      z-index: 1;
    }
    
    .featured-card .card-title {
      font-size: 1.75rem;
    }
    
    .featured-card .card-text {
      font-size: 1.1rem;
    }
    
    /* Column Game Card */
    .column-card {
      display: flex;
      flex-direction: row;
      height: auto;
      margin-bottom: 1.5rem;
    }
    
    .column-card .card-img-wrapper {
      width: 35%;
      padding-top: 26.25%; /* Maintain aspect ratio */
      flex-shrink: 0;
    }
    
    .column-card .card-body {
      width: 65%;
      padding: 1.5rem;
    }
    
    .column-card .card-title {
      font-size: 1.25rem;
    }
    
    /* Grid Game Card */
    .grid-card .card-img-wrapper {
      padding-top: 65%; /* Square-ish aspect ratio */
    }
    
    .grid-card .card-title {
      font-size: 1.1rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .grid-card .card-text {
      font-size: 0.9rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      height: 2.8em;
    }
    
    /* How It Works Section */
    .how-it-works-section {
      padding: 4rem 0;
    }
    
    .step-card {
      background-color: white;
      border-radius: 10px;
      padding: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.025);
      height: 100%;
      margin-bottom: 1.5rem;
    }
    
    .step-icon {
      width: 70px;
      height: 70px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
    }
    
    .step-title {
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--primary-color);
      font-size: 1.25rem;
    }
    
    .step-description {
      color: #555;
      font-size: 1rem;
      line-height: 1.6;
    }
    
    /* FAQ Section */
    .faq-section {
      padding: 4rem 0;
      background-color: var(--light-bg);
    }
    
    .faq-item {
      margin-bottom: 1.5rem;
      border: none;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }
    
    .faq-header {
      background-color: white;
      padding: 1.25rem;
      cursor: pointer;
      border: none;
      text-align: left;
      width: 100%;
      font-weight: 600;
      color: var(--primary-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .faq-header:hover {
      background-color: #f8f9fa;
    }
    
    .faq-body {
      padding: 0 1.25rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .faq-body.active {
      max-height: 500px;
      padding: 1.25rem;
    }
    
    .faq-icon {
      transition: transform 0.3s ease;
    }
    
    .faq-header.active .faq-icon {
      transform: rotate(180deg);
    }
    
    /* Loading animation */
    .loading-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(14, 59, 125, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Skeleton loading */
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 4px;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    .skeleton-img {
      width: 100%;
      padding-top: 65%;
      position: relative;
    }
    
    .skeleton-title {
      height: 24px;
      margin-bottom: 0.5rem;
      width: 80%;
    }
    
    .skeleton-text {
      height: 16px;
      margin-bottom: 1rem;
      width: 100%;
    }
    
    .skeleton-btn {
      height: 38px;
      width: 80px;
      border-radius: 30px;
    }

        /* Responsive adjustments */
    @media (max-width: 991.98px) {
      .featured-card .card-img-wrapper {
        padding-top: 60%;
      }
      
      .featured-card .card-title {
        font-size: 1.5rem;
      }
    }
    
    @media (max-width: 767.98px) {
      .column-card {
        flex-direction: column;
      }
      
      .column-card .card-img-wrapper {
        width: 100%;
        padding-top: 56.25%;
      }
      
      .column-card .card-body {
        width: 100%;
      }
      
      .step-icon {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
      }
    }
    
    @media (max-width: 575.98px) {
      .container {
        padding-left: 15px;
        padding-right: 15px;
      }
      
      .featured-card .card-img-wrapper {
        padding-top: 75%;
      }
      
      .featured-card .card-title {
        font-size: 1.25rem;
      }
      
      .featured-card .card-text {
        font-size: 1rem;
      }
      
      .step-card {
        padding: 1.5rem;
      }
    }
  </style>
</head>
        
<body>
  <!-- Header -->
  <header class="mnthen-header">
    <div class="mnthen-header-container">
      <a href="/" class="mnthen-logo">
        <img src="https://www.mnthen.com/images/logo.webp" alt="Minnesota Then Logo" class="mnthen-logo-img" /> 
        Minnesota Then
      </a>
      
      <button class="mnthen-mobile-menu" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <nav class="mnthen-nav">
        <ul class="mnthen-nav-list">
          <li class="mnthen-nav-item">
            <button class="mnthen-dropdown-btn">
              About
              <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
                <path d="M7 10l5 5 5-5z"/>
              </svg>
            </button>
            <div class="mnthen-dropdown-content">
              <a href="https://mnthen.com/mission.html">Mission</a>
              <a href="https://mnthen.com/blog/creator/matt_reicher.html">Our Team</a>
              <a href="https://mnthen.com/contact">Contact</a>
            </div>
          </li>
          <li class="mnthen-nav-item">
            <button class="mnthen-dropdown-btn">
              Multimedia
              <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
                <path d="M7 10l5 5 5-5z"/>
              </svg>
            </button>
            <div class="mnthen-dropdown-content">
              <a href="https://mnthen.com/blog.html">Blog</a>
              <a href="https://www.youtube.com/@mnthen" target="_blank">YouTube</a>
              <a href="https://mnthen.com/podcast.html">Podcast</a>
            </div>
          </li>
          <li class="mnthen-nav-item">
            <button class="mnthen-dropdown-btn">
              Resources
              <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
                <path d="M7 10l5 5 5-5z"/>
              </svg>
            </button>
            <div class="mnthen-dropdown-content">
              <a href="https://mnthen.com/faq.html">Help Center</a>
              <a href="https://mnthen.com/upcoming_events.html">Upcoming Events</a>
              <a href="https://mnthen.com/resources.html">Research Tools</a>
            </div>
          </li>
          <li class="mnthen-nav-item">
            <button class="mnthen-dropdown-btn">
              Interact
              <svg class="mnthen-dropdown-arrow" viewBox="0 0 24 24" width="16" height="16">
                <path d="M7 10l5 5 5-5z"/>
              </svg>
            </button>
            <div class="mnthen-dropdown-content">
              <a href="https://www.patreon.com/mnthen" target="_blank">Join Our Patreon</a>
              <a href="https://mnthen.com/markers.html">Share Your Story</a>
              <a href="https://mnthen.com/trivia.html">Play Trivia Games</a> 
            </div>
          </li>
          <li class="mnthen-nav-item">
            <a href="https://mnthen.com/donate.html" class="mnthen-donate-btn">Donate</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero-section" aria-labelledby="hero-title" style="margin-top: 80px">
    <div class="hero-content">
      <h1 id="hero-title" class="hero-title">Minnesota History Trivia</h1>
      <p class="hero-subtitle">Test your knowledge of Minnesota's rich past.</p>
    </div>
  </section>

  <main>
    <!-- Featured Game Section -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-4">
            <h2 class="section-title">Featured Quiz</h2>
            <p class="section-subtitle">Our most popular trivia challenge</p>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div id="featured-game-container">
              <div class="loading-container">
                <div class="loading-spinner"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Games Column Section -->
    <section class="py-5">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-4">
            <h2 class="section-title">Our Newest Games</h2>
            <p class="section-subtitle">Challenge yourself with our latest Minnesota history quizzes</p>
          </div>
        </div>
        <div class="row" id="column-games-container">
          <div class="col-12 text-center">
            <div class="loading-container">
              <div class="loading-spinner"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- All Games Grid Section -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="section-title">All Trivia Games</h2>
            <p class="section-subtitle">Browse our complete collection of Minnesota history trivia</p>
          </div>
        </div>
        <div class="row" id="all-games-container">
          <!-- Skeleton loading placeholders -->
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card grid-card">
              <div class="skeleton skeleton-img"></div>
              <div class="card-body">
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="skeleton" style="height: 16px; width: 100px;"></div>
                  <div class="skeleton skeleton-btn"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card grid-card">
              <div class="skeleton skeleton-img"></div>
              <div class="card-body">
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="skeleton" style="height: 16px; width: 100px;"></div>
                  <div class="skeleton skeleton-btn"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card grid-card">
              <div class="skeleton skeleton-img"></div>
              <div class="card-body">
                <div class="skeleton skeleton-title"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="skeleton" style="height: 16px; width: 100px;"></div>
                  <div class="skeleton skeleton-btn"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="section-title">How It Works</h2>
            <p class="section-subtitle">Our trivia games are easy to play and fun to master</p>
          </div>
        </div>
        <div class="row">
          <!-- Step 1 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon mx-auto">
                <i class="fas fa-mouse-pointer"></i>
              </div>
              <h4 class="step-title">Choose a Quiz</h4>
              <p class="step-description">Browse our collection and select a trivia quiz that interests you. Each quiz focuses on a different aspect of Minnesota's rich history.</p>
            </div>
          </div>
          
          <!-- Step 2 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon mx-auto">
                <i class="fas fa-question-circle"></i>
              </div>
              <h4 class="step-title">Answer Questions</h4>
              <p class="step-description">Read each question carefully and select your answer from the multiple-choice options provided. Test your knowledge on various historical topics.</p>
            </div>
          </div>
          
          <!-- Step 3 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon mx-auto">
                <i class="fas fa-lightbulb"></i>
              </div>
              <h4 class="step-title">Learn Facts</h4>
              <p class="step-description">Discover interesting facts about Minnesota's history with each question. Even if you answer incorrectly, you'll learn something new about our state's fascinating past.</p>
            </div>
          </div>
          
          <!-- Step 4 -->
          <div class="col-md-6 col-lg-3">
            <div class="step-card text-center">
              <div class="step-icon mx-auto">
                <i class="fas fa-trophy"></i>
              </div>
              <h4 class="step-title">See Your Score</h4>
              <p class="step-description">Get your results and see how well you know Minnesota history! Share your score with friends and challenge them to beat it.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <p class="section-subtitle">Get answers to common questions about our trivia games</p>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <!-- FAQ Item 1 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>How are the trivia questions created?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Our trivia questions are carefully researched and created by Minnesota history experts. We use primary sources, historical documents, and verified information to ensure accuracy in all our quizzes.</p>
              </div>
            </div>
            
            <!-- FAQ Item 2 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Can I suggest a topic for a new trivia quiz?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>We welcome suggestions from our community. You can submit your ideas through our contact form, and our team will review them for potential future quizzes.</p>
              </div>
            </div>
            
            <!-- FAQ Item 3 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Are the quizzes suitable for classroom use?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Yes! Many educators use our trivia quizzes as supplementary learning materials. They're designed to be educational and engaging, making them perfect for classroom activities or homework assignments.</p>
              </div>
            </div>
            
            <!-- FAQ Item 4 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>How often are new quizzes added?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>We add new quizzes as we develop them. Be sure to check back regularly or subscribe to our newsletter to be notified when new content is available.</p>
              </div>
            </div>
            
            <!-- FAQ Item 5 -->
            <div class="faq-item">
              <button class="faq-header">
                <span>Can I share my quiz results on social media?</span>
                <i class="fas fa-chevron-down faq-icon"></i>
              </button>
              <div class="faq-body">
                <p>Yes! At the end of each quiz, you'll have the option to share your results on various social media platforms. Show off your Minnesota history knowledge to friends and family!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer bg-primary py-5"> 
    <div class="container">
      <div class="row g-4 mb-4">
        <div class="col-lg-3 col-md-6 pt-3">
          <h3 class="footer-brand mb-3">
            <span class="text-white">Minnesota</span>
            <span class="text-navy">Then</span>
          </h3>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Who We Are</h5>
          <ul class="list-unstyled footer-links">
            <li><a href="/about.html">About Us</a></li>
            <li><a href="/privacy_terms.html">ToS & Privacy</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">What We Do</h5>
          <ul class="list-unstyled footer-links">
            <li><a href="https://mnthen.com/blog.html">Blog</a></li>
            <li><a href="https://www.mnthen.com/article/thesis_project.pdf">Thesis Project</a></li>
            <li><a href="/upcoming_events.html">Upcoming Events</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5 class="text-white mb-3">Resources</h5>
          <ul class="list-unstyled footer-links">
            <li><a href="https://www.mnthen.com/works.html">Learn the App</a></li>
            <li><a href="/faq.html">Help Center</a></li>
            <li><a href="/resources.html">Research Tools</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 pt-3">
          <p class="tagline">Every Step Tells a Story</p>
        </div>
      </div>
      <hr class="footer-divider">
      <div class="row align-items-center">
        <div class="col-md-4 text-center text-md-start">
          <small style="color: white;">&copy; 2024 Minnesota Then. All rights reserved</small>
        </div>
        <div class="col-md-8">
          <div class="social-icons text-center text-md-end">
            <span class="me-2" style="color: white;">Connect:</span>
            <a href="https://www.facebook.com/profile.php?id=100090355652945" target="_blank" class="text-white">
              <i class="fab fa-facebook-f"></i>
            </a>
            <span class="mx-2 text-white">|</span>
            <a href="https://bsky.app/profile/mnthen.bsky.social" target="_blank" class="text-white">
              <i class="fa-brands fa-bluesky"></i>
            </a>
            <span class="mx-2 text-white">|</span>
            <a href="https://www.linkedin.com/company/minnesota-then" target="_blank" class="text-white">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize navigation
      initializeNavigation();
      
      // Initialize FAQ accordions
      initializeFAQ();
      
      // Load dynamic trivia games
      loadTriviaGames();
    });

    function initializeNavigation() {
      const mobileMenuBtn = document.querySelector('.mnthen-mobile-menu');
      const mainNav = document.querySelector('.mnthen-nav');
      const dropdownBtns = document.querySelectorAll('.mnthen-dropdown-btn');
      const dropdownToggle = document.querySelector('.dropdown-toggle');
      const dropdownMenu = document.querySelector('.dropdown-menu');
      const toggleButton = document.querySelector('.toggle-button');
      const navbarLinks = document.querySelector('.navbar-links');

      // Initialize all navigation elements
      if (dropdownToggle && dropdownMenu) {
        dropdownToggle.addEventListener('click', function() {
          dropdownMenu.classList.toggle('show');
        });
      }

      if (toggleButton && navbarLinks) {
        toggleButton.addEventListener('click', () => {
          navbarLinks.classList.toggle('active');
        });
      }

      if (mobileMenuBtn && mainNav) {
        mobileMenuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          this.classList.toggle('active');
          mainNav.classList.toggle('active');
        });

        dropdownBtns.forEach(btn => {
          ['click', 'touchstart'].forEach(eventType => {
            btn.addEventListener(eventType, function(e) {
              e.preventDefault();
              e.stopPropagation();
              
              dropdownBtns.forEach(otherBtn => {
                if (otherBtn !== btn) {
                  otherBtn.classList.remove('active');
                  otherBtn.nextElementSibling?.classList.remove('active');
                }
              });
              
              this.classList.toggle('active');
              const dropdownContent = this.nextElementSibling;
              if (dropdownContent) {
                dropdownContent.classList.toggle('active');
              }
            });
          });
        });
      }

      // Global click/touch handler
      ['click', 'touchstart'].forEach(eventType => {
        document.addEventListener(eventType, function(e) {
          const isClickInsideNav = e.target.closest('.mnthen-nav');
          const isClickInsideMenu = e.target.closest('.mnthen-mobile-menu');
          const isClickInsideNavbarLinks = navbarLinks?.contains(e.target);
          const isClickInsideToggleButton = toggleButton?.contains(e.target);

          // Handle main navigation clicks
          if (!isClickInsideNav && !isClickInsideMenu) {
            mainNav?.classList.remove('active');
            mobileMenuBtn?.classList.remove('active');
            dropdownBtns.forEach(btn => {
              btn.classList.remove('active');
              btn.nextElementSibling?.classList.remove('active');
            });
          }

          // Handle dropdown menu clicks
          if (!e.target.matches('.dropdown-toggle') && !e.target.closest('.dropdown-menu')) {
            dropdownMenu?.classList.remove('show');
          }

          // Handle navbar links clicks
          if (!isClickInsideNavbarLinks && !isClickInsideToggleButton && navbarLinks?.classList.contains('active')) {
            navbarLinks.classList.remove('active');
          }
        });
      });

      // Handle window resize
      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
          mainNav?.classList.remove('active');
          mobileMenuBtn?.classList.remove('active');
          dropdownBtns.forEach(btn => {
            btn.classList.remove('active');
            btn.nextElementSibling?.classList.remove('active');
          });
        }
      });
    }

    function initializeFAQ() {
      const faqHeaders = document.querySelectorAll('.faq-header');
      
      faqHeaders.forEach(header => {
        header.addEventListener('click', function() {
          this.classList.toggle('active');
          const faqBody = this.nextElementSibling;
          faqBody.classList.toggle('active');
        });
      });
    }

    function loadTriviaGames() {
      // Quiz data
      const quizzes = [
        {
          id: 'gangster-history',
          title: 'Gangster History',
          description: 'Step back in time to the Prohibition era and test your knowledge about Minnesota\'s notorious Depression Era gangster menace. From John Dillinger to Ma Barker\'s gang, discover the criminal underworld that once thrived in the Twin Cities.',
          image: '/images/gangster_1.jpg',
          questions: 10,
          url: 'trivia_gng.html',
          featured: true,
          players: 2500
        },
        {
          id: 'minnesota-history',
          title: 'Minnesota History',
          description: 'Test your knowledge of Minnesota\'s rich history from its founding to modern times. This comprehensive quiz covers important events, notable figures, and significant developments throughout the state\'s history.',
          image: '/images/header_6.jpg',
          questions: 10,
          url: 'trivia_game.html',
          featured: false
        },
        {
          id: 'st-paul-history',
          title: 'St. Paul History',
          description: 'Show that you know the history of Minnesota\'s capital city through the ages. From its early days as a trading post to its development as a major urban center, this quiz explores the rich heritage of St. Paul and its significance to Minnesota.',
          image: '/images/stp_1.jpg',
          questions: 10,
          url: 'stp_trivia.html',
          featured: false
        }
      ];

      // Render featured game
      renderFeaturedGame(quizzes.find(quiz => quiz.featured));
      
      // Render column games
      renderColumnGames(quizzes);
      
      // Render all games
      renderAllGames(quizzes);
    }

    function renderFeaturedGame(game) {
      const container = document.getElementById('featured-game-container');
      
      if (!game) {
        container.innerHTML = '<p class="text-center">No featured game available.</p>';
        return;
      }
      
      const gameHTML = `
        <div class="card featured-card">
          <div class="card-img-wrapper">
            <span class="featured-badge">Featured</span>
            <img src="${game.image}" class="card-img" alt="${game.title}">
          </div>
          <div class="card-body">
            <h3 class="card-title">${game.title}</h3>
            <p class="card-text">${game.description}</p>
            <a href="${game.url}" class="btn btn-primary">Play Now</a>
          </div>
        </div>
      `;
      
      container.innerHTML = gameHTML;
    }

    function renderColumnGames(games) {
      const container = document.getElementById('column-games-container');
      container.innerHTML = ''; // Clear loading spinner
      
      games.forEach(game => {
        if (game.featured) return; // Skip featured game
        
        const gameHTML = `
          <div class="col-12">
            <div class="card column-card">
              <div class="card-img-wrapper">
                <img src="${game.image}" class="card-img" alt="${game.title}">
              </div>
              <div class="card-body">
                <h4 class="card-title">${game.title}</h4>
                <p class="card-text">${game.description}</p>
                <a href="${game.url}" class="btn btn-primary">Play Now</a>
              </div>
            </div>
          </div>
        `;
        
        container.innerHTML += gameHTML;
      });
    }

    function renderAllGames(games) {
      const container = document.getElementById('all-games-container');
      container.innerHTML = ''; // Clear skeleton loading
      
      games.forEach(game => {
        const gameHTML = `
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card grid-card">
              <div class="card-img-wrapper">
                <img src="${game.image}" class="card-img" alt="${game.title}">
              </div>
              <div class="card-body">
                <h5 class="card-title">${game.title}</h5>
                <p class="card-text">${game.description}</p>
                <div class="d-flex justify-content-between align-items-center">
                  <span class="text-muted small"><i class="fas fa-question-circle me-1"></i> ${game.questions} questions</span>
                  <a href="${game.url}" class="btn btn-primary btn-sm">Play</a>
                </div>
              </div>
            </div>
          </div>
        `;
        
        container.innerHTML += gameHTML;
      });
    }

    function openPopup(url) {
      const isMobileDevice = window.matchMedia("(max-width: 767px)").matches;
      const width = Math.round(window.innerWidth * (isMobileDevice ? 0.9 : 0.8));
      const height = Math.round(window.innerHeight * (isMobileDevice ? 0.9 : 0.8));
      const left = Math.round((window.innerWidth - width) / 2);
      const top = isMobileDevice ? 0 : Math.round((window.innerHeight - height) / 2);

      const features = `width=${width},height=${height},left=${left},top=${top},resizable=yes,scrollbars=yes,location=no,toolbar=no,status=no`;

      const popup = window.open('', 'popup', features);

      if (popup) {
        popup.location.replace(url);
        popup.focus();
      } else {
        alert('Popup blocking is enabled in your browser. Please allow popups for this site.');
      }
    }
  </script>
</body>
</html>
